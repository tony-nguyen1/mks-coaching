var bR=Object.defineProperty,CR=Object.defineProperties;var TR=Object.getOwnPropertyDescriptors;var UI=Object.getOwnPropertySymbols,SR=Object.getPrototypeOf,AR=Object.prototype.hasOwnProperty,RR=Object.prototype.propertyIsEnumerable,MR=Reflect.get;var jI=(n,e,t)=>e in n?bR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})AR.call(e,t)&&jI(n,t,e[t]);if(UI)for(var t of UI(e))RR.call(e,t)&&jI(n,t,e[t]);return n},se=(n,e)=>CR(n,TR(e));var dr=(n,e,t)=>MR(SR(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function $I(n,e){return Object.is(n,e)}var qe=null,jc=!1,lf=1,Ot=Symbol("SIGNAL");function le(n){let e=qe;return qe=n,e}function HI(){return qe}var qs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $c(n){if(jc)throw new Error("");if(qe===null)return;qe.consumerOnSignalRead(n);let e=qe.nextProducerIndex++;if(zc(qe),e<qe.producerNode.length&&qe.producerNode[e]!==n&&Hs(qe)){let t=qe.producerNode[e];qc(t,qe.producerIndexOfThis[e])}qe.producerNode[e]!==n&&(qe.producerNode[e]=n,qe.producerIndexOfThis[e]=Hs(qe)?WI(n,qe,e):0),qe.producerLastReadVersion[e]=n.version}function NR(){lf++}function qI(n){if(!(Hs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lf)){if(!n.producerMustRecompute(n)&&!hf(n)){BI(n);return}n.producerRecomputeValue(n),BI(n)}}function zI(n){if(n.liveConsumerNode===void 0)return;let e=jc;jc=!0;try{for(let t of n.liveConsumerNode)t.dirty||xR(t)}finally{jc=e}}function GI(){return qe?.consumerAllowSignalWrites!==!1}function xR(n){n.dirty=!0,zI(n),n.consumerMarkedDirty?.(n)}function BI(n){n.dirty=!1,n.lastCleanEpoch=lf}function Hc(n){return n&&(n.nextProducerIndex=0),le(n)}function df(n,e){if(le(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Hs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hf(n){zc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(qI(t),r!==t.version))return!0}return!1}function ff(n){if(zc(n),Hs(n))for(let e=0;e<n.producerNode.length;e++)qc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function WI(n,e,t){if(KI(n),n.liveConsumerNode.length===0&&QI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=WI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qc(n,e){if(KI(n),n.liveConsumerNode.length===1&&QI(n))for(let r=0;r<n.producerNode.length;r++)qc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];zc(i),i.producerIndexOfThis[r]=e}}function Hs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QI(n){return n.producerNode!==void 0}function YI(n){let e=Object.create(PR);e.computation=n;let t=()=>{if(qI(e),$c(e),e.value===Bc)throw e.error;return e.value};return t[Ot]=e,t}var cf=Symbol("UNSET"),uf=Symbol("COMPUTING"),Bc=Symbol("ERRORED"),PR=se(L({},qs),{value:cf,dirty:!0,error:null,equal:$I,kind:"computed",producerMustRecompute(n){return n.value===cf||n.value===uf},producerRecomputeValue(n){if(n.value===uf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=uf;let t=Hc(n),r,i=!1;try{r=n.computation(),le(null),i=e!==cf&&e!==Bc&&r!==Bc&&n.equal(e,r)}catch(o){r=Bc,n.error=o}finally{df(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function kR(){throw new Error}var ZI=kR;function JI(){ZI()}function XI(n){ZI=n}var OR=null;function ew(n){let e=Object.create(pf);e.value=n;let t=()=>($c(e),e.value);return t[Ot]=e,t}function Gc(n,e){GI()||JI(),n.equal(n.value,e)||(n.value=e,FR(n))}function tw(n,e){GI()||JI(),Gc(n,e(n.value))}var pf=se(L({},qs),{equal:$I,value:void 0,kind:"signal"});function FR(n){n.version++,NR(),zI(n),OR?.()}function X(n){return typeof n=="function"}function Gi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wc=Gi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function zs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Le=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Wc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nw(o)}catch(s){e=e??[],s instanceof Wc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Wc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zs(t,e)}remove(e){let{_finalizers:t}=this;t&&zs(t,e),e instanceof n&&e._removeParent(this)}};Le.EMPTY=(()=>{let n=new Le;return n.closed=!0,n})();var gf=Le.EMPTY;function Kc(n){return n instanceof Le||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function nw(n){X(n)?n():n.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wi={setTimeout(n,e,...t){let{delegate:r}=Wi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Wi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Qc(n){Wi.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(n);else throw n})}function Gs(){}var rw=mf("C",void 0,void 0);function iw(n){return mf("E",void 0,n)}function ow(n){return mf("N",n,void 0)}function mf(n,e,t){return{kind:n,value:e,error:t}}var ri=null;function Ki(n){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!ri;if(e&&(ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ri;if(ri=null,t)throw r}}else n()}function sw(n){Qt.useDeprecatedSynchronousErrorHandling&&ri&&(ri.errorThrown=!0,ri.error=n)}var ii=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kc(e)&&e.add(this)):this.destination=UR}static create(e,t,r){return new Qi(e,t,r)}next(e){this.isStopped?vf(ow(e),this):this._next(e)}error(e){this.isStopped?vf(iw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vf(rw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VR=Function.prototype.bind;function yf(n,e){return VR.call(n,e)}var _f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Yc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Yc(r)}else Yc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yc(t)}}},Qi=class extends ii{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Qt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yf(e.next,o),error:e.error&&yf(e.error,o),complete:e.complete&&yf(e.complete,o)}):i=e}this.destination=new _f(i)}};function Yc(n){Qt.useDeprecatedSynchronousErrorHandling?sw(n):Qc(n)}function LR(n){throw n}function vf(n,e){let{onStoppedNotification:t}=Qt;t&&Wi.setTimeout(()=>t(n,e))}var UR={closed:!0,next:Gs,error:LR,complete:Gs};var Yi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(n){return n}function If(...n){return wf(n)}function wf(n){return n.length===0?Dt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var we=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=BR(t)?t:new Qi(t,r,i);return Ki(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=aw(r),new r((i,o)=>{let s=new Qi({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Yi](){return this}pipe(...t){return wf(t)(this)}toPromise(t){return t=aw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function aw(n){var e;return(e=n??Qt.Promise)!==null&&e!==void 0?e:Promise}function jR(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function BR(n){return n&&n instanceof ii||jR(n)&&Kc(n)}function Ef(n){return X(n?.lift)}function ye(n){return e=>{if(Ef(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new Df(n,e,t,r,i)}var Df=class extends ii{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zi(){return ye((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ji=class extends we{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ef(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return Zi()(this)}};var cw=Gi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Zc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new cw}next(t){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gf:(this.currentObservers=null,o.push(t),new Le(()=>{this.currentObservers=null,zs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new we;return t.source=this,t}}return n.create=(e,t)=>new Zc(e,t),n})(),Zc=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gf}};var tt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yt=new we(n=>n.complete());function uw(n){return n&&X(n.schedule)}function lw(n){return n[n.length-1]}function Jc(n){return X(lw(n))?n.pop():void 0}function hr(n){return uw(lw(n))?n.pop():void 0}function bf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function dw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(n){return this instanceof oi?(this.v=n,this):new oi(n)}function fw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(S){return Promise.resolve(S).then(_,p)}}function a(_,S){r[_]&&(i[_]=function(k){return new Promise(function(M,U){o.push([_,k,M,U])>1||u(_,k)})},S&&(i[_]=S(i[_])))}function u(_,S){try{l(r[_](S))}catch(k){m(o[0][3],k)}}function l(_){_.value instanceof oi?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,S){_(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dw=="function"?dw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Xc=n=>n&&typeof n.length=="number"&&typeof n!="function";function eu(n){return X(n?.then)}function tu(n){return X(n[Yi])}function nu(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function ru(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $R(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iu=$R();function ou(n){return X(n?.[iu])}function su(n){return fw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield oi(t.read());if(i)return yield oi(void 0);yield yield oi(r)}}finally{t.releaseLock()}})}function au(n){return X(n?.getReader)}function Ue(n){if(n instanceof we)return n;if(n!=null){if(tu(n))return HR(n);if(Xc(n))return qR(n);if(eu(n))return zR(n);if(nu(n))return gw(n);if(ou(n))return GR(n);if(au(n))return WR(n)}throw ru(n)}function HR(n){return new we(e=>{let t=n[Yi]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qR(n){return new we(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function zR(n){return new we(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Qc)})}function GR(n){return new we(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gw(n){return new we(e=>{KR(n,e).catch(t=>e.error(t))})}function WR(n){return gw(su(n))}function KR(n,e){var t,r,i,o;return hw(this,void 0,void 0,function*(){try{for(t=pw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function vt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function cu(n,e=0){return ye((t,r)=>{t.subscribe(de(r,i=>vt(r,n,()=>r.next(i),e),()=>vt(r,n,()=>r.complete(),e),i=>vt(r,n,()=>r.error(i),e)))})}function uu(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mw(n,e){return Ue(n).pipe(uu(e),cu(e))}function yw(n,e){return Ue(n).pipe(uu(e),cu(e))}function vw(n,e){return new we(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function _w(n,e){return new we(t=>{let r;return vt(t,e,()=>{r=n[iu](),vt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function lu(n,e){if(!n)throw new Error("Iterable cannot be null");return new we(t=>{vt(t,e,()=>{let r=n[Symbol.asyncIterator]();vt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Iw(n,e){return lu(su(n),e)}function ww(n,e){if(n!=null){if(tu(n))return mw(n,e);if(Xc(n))return vw(n,e);if(eu(n))return yw(n,e);if(nu(n))return lu(n,e);if(ou(n))return _w(n,e);if(au(n))return Iw(n,e)}throw ru(n)}function xe(n,e){return e?ww(n,e):Ue(n)}function Z(...n){let e=hr(n);return xe(n,e)}function Xi(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new we(e?i=>e.schedule(r,0,i):r)}function Cf(n){return!!n&&(n instanceof we||X(n.lift)&&X(n.subscribe))}var Nn=Gi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function he(n,e){return ye((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:QR}=Array;function YR(n,e){return QR(e)?n(...e):n(e)}function du(n){return he(e=>YR(n,e))}var{isArray:ZR}=Array,{getPrototypeOf:JR,prototype:XR,keys:eM}=Object;function hu(n){if(n.length===1){let e=n[0];if(ZR(e))return{args:e,keys:null};if(tM(e)){let t=eM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function tM(n){return n&&typeof n=="object"&&JR(n)===XR}function fu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ws(...n){let e=hr(n),t=Jc(n),{args:r,keys:i}=hu(n);if(r.length===0)return xe([],e);let o=new we(nM(r,e,i?s=>fu(i,s):Dt));return t?o.pipe(du(t)):o}function nM(n,e,t=Dt){return r=>{Ew(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Ew(e,()=>{let l=xe(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ew(n,e,t){n?vt(t,n,e):e()}function Dw(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=k=>l<r?S(k):u.push(k),S=k=>{o&&e.next(k),l++;let M=!1;Ue(t(k,h++)).subscribe(de(e,U=>{i?.(U),o?_(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let U=u.shift();s?vt(e,s,()=>S(U)):S(U)}m()}catch(U){e.error(U)}}))};return n.subscribe(de(e,_,()=>{p=!0,m()})),()=>{a?.()}}function je(n,e,t=1/0){return X(e)?je((r,i)=>he((o,s)=>e(r,o,i,s))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>Dw(r,i,n,t)))}function eo(n=1/0){return je(Dt,n)}function bw(){return eo(1)}function to(...n){return bw()(xe(n,hr(n)))}function pu(n){return new we(e=>{Ue(n()).subscribe(e)})}function Tf(...n){let e=Jc(n),{args:t,keys:r}=hu(n),i=new we(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(t[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?fu(r,a):a),o.complete())}))}});return e?i.pipe(du(e)):i}function Ft(n,e){return ye((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function fr(n){return ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Ue(n(s,fr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Cw(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function si(n,e){return X(e)?je(n,e,1):je(n,1)}function pr(n){return ye((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xn(n){return n<=0?()=>yt:ye((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gu(n=rM){return ye((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rM(){return new Nn}function Ks(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ft((i,o)=>n(i,o,r)):Dt,xn(1),t?pr(e):gu(()=>new Nn))}function no(n){return n<=0?()=>yt:ye((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ft((i,o)=>n(i,o,r)):Dt,no(1),t?pr(e):gu(()=>new Nn))}function Af(n,e){return ye(Cw(n,e,arguments.length>=2,!0))}function Rf(...n){let e=hr(n);return ye((t,r)=>{(e?to(n,t,e):to(n,t)).subscribe(r)})}function Vt(n,e){return ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Mf(n){return ye((e,t)=>{Ue(n).subscribe(de(t,()=>t.complete(),Gs)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var hE="https://g.co/ng/security#xss",$=class extends Error{code;constructor(e,t){super(Pp(e,t)),this.code=e}};function Pp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var fE=Symbol("InputSignalNode#UNSET"),iM=se(L({},pf),{transformFn:void 0,applyValueToInputSignal(n,e){Gc(n,e)}});function pE(n,e){let t=Object.create(iM);t.value=n,t.transformFn=e?.transform;function r(){if($c(t),t.value===fE)throw new $(-950,!1);return t.value}return r[Ot]=t,r}function oa(n){return{toString:n}.toString()}var mu="__parameters__";function oM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gE(n,e,t){return oa(()=>{let r=oM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(mu)?u[mu]:Object.defineProperty(u,mu,{value:[]})[mu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Hf=globalThis;function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function sM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function pt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(pt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Tw(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var aM=Te({__forward_ref__:Te});function Dr(n){return n.__forward_ref__=Dr,n.toString=function(){return pt(this())},n}function ft(n){return mE(n)?n():n}function mE(n){return typeof n=="function"&&n.hasOwnProperty(aM)&&n.__forward_ref__===Dr}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function br(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ju(n){return Sw(n,vE)||Sw(n,_E)}function yE(n){return Ju(n)!==null}function Sw(n,e){return n.hasOwnProperty(e)?n[e]:null}function cM(n){let e=n&&(n[vE]||n[_E]);return e||null}function Aw(n){return n&&(n.hasOwnProperty(Rw)||n.hasOwnProperty(uM))?n[Rw]:null}var vE=Te({\u0275prov:Te}),Rw=Te({\u0275inj:Te}),_E=Te({ngInjectableDef:Te}),uM=Te({ngInjectorDef:Te}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function IE(n){return n&&!!n.\u0275providers}var lM=Te({\u0275cmp:Te}),dM=Te({\u0275dir:Te}),hM=Te({\u0275pipe:Te}),fM=Te({\u0275mod:Te}),Cu=Te({\u0275fac:Te}),Js=Te({__NG_ELEMENT_ID__:Te}),Mw=Te({__NG_ENV_ID__:Te});function uo(n){return typeof n=="string"?n:n==null?"":String(n)}function pM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():uo(n)}function gM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new $(-200,n)}function kp(n,e){throw new $(-201,!1)}var ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ie||{}),qf;function wE(){return qf}function Lt(n){let e=qf;return qf=n,e}function EE(n,e,t){let r=Ju(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ie.Optional)return null;if(e!==void 0)return e;kp(n,"Injector")}var mM={},Xs=mM,zf="__NG_DI_FLAG__",Tu="ngTempTokenPath",yM="ngTokenPath",vM=/\n/gm,_M="\u0275",Nw="__source",ao;function IM(){return ao}function gr(n){let e=ao;return ao=n,e}function wM(n,e=ie.Default){if(ao===void 0)throw new $(-203,!1);return ao===null?EE(n,void 0,e):ao.get(n,e&ie.Optional?null:void 0,e)}function te(n,e=ie.Default){return(wE()||wM)(ft(n),e)}function F(n,e=ie.Default){return te(n,Xu(e))}function Xu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Gf(n){let e=[];for(let t=0;t<n.length;t++){let r=ft(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=ie.Default;for(let s=0;s<r.length;s++){let a=r[s],u=EM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function DE(n,e){return n[zf]=e,n.prototype[zf]=e,n}function EM(n){return n[zf]}function DM(n,e,t,r){let i=n[Tu];throw e[Nw]&&i.unshift(e[Nw]),n.message=bM(`
`+n.message,i,t,r),n[yM]=i,n[Tu]=null,n}function bM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==_M?n.slice(2):n;let i=pt(e);if(Array.isArray(e))i=e.map(pt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):pt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(vM,`
  `)}`}var bE=DE(gE("Optional"),8);var CM=DE(gE("SkipSelf"),4);function lo(n,e){let t=n.hasOwnProperty(Cu);return t?n[Cu]:null}function Op(n,e){n.forEach(t=>Array.isArray(t)?Op(t,e):e(t))}function CE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Su(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function SM(n,e,t){let r=sa(n,e);return r>=0?n[r|1]=t:(r=~r,TM(n,r,e,t)),r}function Nf(n,e){let t=sa(n,e);if(t>=0)return n[t|1]}function sa(n,e){return AM(n,e,1)}function AM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ho={},Ut=[],fo=new z(""),TE=new z("",-1),SE=new z(""),Au=class{get(e,t=Xs){if(t===Xs){let r=new Error(`NullInjectorError: No provider for ${pt(e)}!`);throw r.name="NullInjectorError",r}return t}};function AE(n,e){let t=n[fM]||null;if(!t&&e===!0)throw new Error(`Type ${pt(n)} does not have '\u0275mod' property.`);return t}function vr(n){return n[lM]||null}function RE(n){return n[dM]||null}function ME(n){return n[hM]||null}function NE(n){let e=vr(n)||RE(n)||ME(n);return e!==null&&e.standalone}function el(n){return{\u0275providers:n}}function RM(...n){return{\u0275providers:xE(!0,n),\u0275fromNgModule:!0}}function xE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Op(e,s=>{let a=s;Wf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PE(i,o),t}function PE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fp(i,o=>{e(o,r)})}}function Wf(n,e,t,r){if(n=ft(n),!n)return!1;let i=null,o=Aw(n),s=!o&&vr(n);if(!o&&!s){let u=n.ngModule;if(o=Aw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Wf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Op(o.imports,h=>{Wf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&PE(l,e)}if(!a){let l=lo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ut},i),e({provide:SE,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Fp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Fp(n,e){for(let t of n)IE(t)&&(t=t.\u0275providers),Array.isArray(t)?Fp(t,e):e(t)}var MM=Te({provide:String,useValue:Te});function kE(n){return n!==null&&typeof n=="object"&&MM in n}function NM(n){return!!(n&&n.useExisting)}function xM(n){return!!(n&&n.useFactory)}function po(n){return typeof n=="function"}function PM(n){return!!n.useClass}var tl=new z(""),Iu={},kM={},xf;function Vp(){return xf===void 0&&(xf=new Au),xf}var Tt=class{},ea=class extends Tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Qf(e,s=>this.processProvider(s)),this.records.set(TE,ro(void 0,this)),i.has("environment")&&this.records.set(Tt,ro(void 0,this));let o=this.records.get(tl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SE,Ut,ie.Self))}destroy(){Ys(this),this._destroyed=!0;let e=le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),le(e)}}onDestroy(e){return Ys(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ys(this);let t=gr(this),r=Lt(void 0),i;try{return e()}finally{gr(t),Lt(r)}}get(e,t=Xs,r=ie.Default){if(Ys(this),e.hasOwnProperty(Mw))return e[Mw](this);r=Xu(r);let i,o=gr(this),s=Lt(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=UM(e)&&Ju(e);l&&this.injectableDefInScope(l)?u=ro(Kf(e),Iu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?Vp():this.parent;return t=r&ie.Optional&&t===Xs?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Tu]=a[Tu]||[]).unshift(pt(e)),o)throw a;return DM(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(s),gr(o)}}resolveInjectorInitializers(){let e=le(null),t=gr(this),r=Lt(void 0),i;try{let o=this.get(fo,Ut,ie.Self);for(let s of o)s()}finally{gr(t),Lt(r),le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(pt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ft(e);let t=po(e)?e:ft(e&&e.provide),r=FM(e);if(!po(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ro(void 0,Iu,!0),i.factory=()=>Gf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=le(null);try{return t.value===Iu&&(t.value=kM,t.value=t.factory()),typeof t.value=="object"&&t.value&&LM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{le(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ft(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Kf(n){let e=Ju(n),t=e!==null?e.factory:lo(n);if(t!==null)return t;if(n instanceof z)throw new $(204,!1);if(n instanceof Function)return OM(n);throw new $(204,!1)}function OM(n){if(n.length>0)throw new $(204,!1);let t=cM(n);return t!==null?()=>t.factory(n):()=>new n}function FM(n){if(kE(n))return ro(void 0,n.useValue);{let e=OE(n);return ro(e,Iu)}}function OE(n,e,t){let r;if(po(n)){let i=ft(n);return lo(i)||Kf(i)}else if(kE(n))r=()=>ft(n.useValue);else if(xM(n))r=()=>n.useFactory(...Gf(n.deps||[]));else if(NM(n))r=()=>te(ft(n.useExisting));else{let i=ft(n&&(n.useClass||n.provide));if(VM(n))r=()=>new i(...Gf(n.deps));else return lo(i)||Kf(i)}return r}function Ys(n){if(n.destroyed)throw new $(205,!1)}function ro(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VM(n){return!!n.deps}function LM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function UM(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Qf(n,e){for(let t of n)Array.isArray(t)?Qf(t,e):t&&IE(t)?Qf(t.\u0275providers,e):e(t)}function Bt(n,e){n instanceof ea&&Ys(n);let t,r=gr(n),i=Lt(void 0);try{return e()}finally{gr(r),Lt(i)}}function FE(){return wE()!==void 0||IM()!=null}function jM(n){if(!FE())throw new $(-203,!1)}function BM(n){return typeof n=="function"}var Ln=0,ge=1,ee=2,gt=3,Zt=4,Xt=5,Ru=6,Mu=7,St=8,ta=9,kn=10,rt=11,na=12,xw=13,Do=14,un=15,go=16,io=17,mo=18,nl=19,VE=20,mr=21,Pf=22,Nu=23,bt=24,Jt=25,LE=1;var ci=7,xu=8,Pu=9,Ct=10;function yr(n){return Array.isArray(n)&&typeof n[LE]=="object"}function Un(n){return Array.isArray(n)&&n[LE]===!0}function UE(n){return(n.flags&4)!==0}function pi(n){return n.componentOffset>-1}function Lp(n){return(n.flags&1)===1}function On(n){return!!n.template}function ku(n){return(n[ee]&512)!==0}function aa(n){return(n[ee]&256)===256}var Yf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function jE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Cr=(()=>{let n=()=>BE;return n.ngInherit=!0,n})();function BE(n){return n.type.prototype.ngOnChanges&&(n.setInput=HM),$M}function $M(){let n=HE(this),e=n?.current;if(e){let t=n.previous;if(t===ho)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HM(n,e,t,r,i){let o=this.declaredInputs[r],s=HE(n)||qM(n,{previous:ho,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Yf(l&&l.currentValue,t,u===ho),jE(n,e,i,t)}var $E="__ngSimpleChanges__";function HE(n){return n[$E]||null}function qM(n,e){return n[$E]=e}var Pw=null;var jt=function(n,e,t){Pw?.(n,e,t)},qE="svg",zM="math";function ln(n){for(;Array.isArray(n);)n=n[Ln];return n}function zE(n,e){return ln(e[n])}function en(n,e){return ln(e[n.index])}function Up(n,e){return n.data[e]}function dn(n,e){let t=e[n];return yr(t)?t:t[Ln]}function jp(n){return(n[ee]&128)===128}function GM(n){return Un(n[gt])}function Ou(n,e){return e==null?null:n[e]}function GE(n){n[io]=0}function Bp(n){n[ee]&1024||(n[ee]|=1024,jp(n)&&il(n))}function WM(n,e){for(;n>0;)e=e[Do],n--;return e}function rl(n){return!!(n[ee]&9216||n[bt]?.dirty)}function Zf(n){n[kn].changeDetectionScheduler?.notify(9),n[ee]&64&&(n[ee]|=1024),rl(n)&&il(n)}function il(n){n[kn].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!jp(e)));)e=ui(e)}function WE(n,e){if(aa(n))throw new $(911,!1);n[mr]===null&&(n[mr]=[]),n[mr].push(e)}function KM(n,e){if(n[mr]===null)return;let t=n[mr].indexOf(e);t!==-1&&n[mr].splice(t,1)}function ui(n){let e=n[gt];return Un(e)?e[gt]:e}function QM(n){return n[Mu]??=[]}function YM(n){return n.cleanup??=[]}var oe={lFrame:nD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Jf=!1;function ZM(){return oe.lFrame.elementDepthCount}function JM(){oe.lFrame.elementDepthCount++}function XM(){oe.lFrame.elementDepthCount--}function KE(){return oe.bindingsEnabled}function eN(){return oe.skipHydrationRootTNode!==null}function tN(n){return oe.skipHydrationRootTNode===n}function nN(){oe.skipHydrationRootTNode=null}function Re(){return oe.lFrame.lView}function tn(){return oe.lFrame.tView}function $p(n){return oe.lFrame.contextLView=n,n[St]}function Hp(n){return oe.lFrame.contextLView=null,n}function $t(){let n=QE();for(;n!==null&&n.type===64;)n=n.parent;return n}function QE(){return oe.lFrame.currentTNode}function rN(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ca(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function YE(){return oe.lFrame.isParent}function iN(){oe.lFrame.isParent=!1}function ZE(){return Jf}function kw(n){let e=Jf;return Jf=n,e}function oN(){let n=oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function sN(){return oe.lFrame.bindingIndex}function aN(n){return oe.lFrame.bindingIndex=n}function ol(){return oe.lFrame.bindingIndex++}function JE(n){let e=oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function cN(){return oe.lFrame.inI18n}function uN(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xf(e)}function lN(){return oe.lFrame.currentDirectiveIndex}function Xf(n){oe.lFrame.currentDirectiveIndex=n}function dN(n){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function XE(n){oe.lFrame.currentQueryIndex=n}function hN(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Xt]:null}function eD(n,e,t){if(t&ie.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ie.Host);)if(i=hN(o),i===null||(o=o[Do],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=oe.lFrame=tD();return r.currentTNode=e,r.lView=n,!0}function qp(n){let e=tD(),t=n[ge];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tD(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?nD(n):e}function nD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rD(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var iD=rD;function zp(){let n=rD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fN(n){return(oe.lFrame.contextLView=WM(n,oe.lFrame.contextLView))[St]}function gi(){return oe.lFrame.selectedIndex}function li(n){oe.lFrame.selectedIndex=n}function oD(){let n=oe.lFrame;return Up(n.tView,n.selectedIndex)}function sD(){oe.lFrame.currentNamespace=qE}function pN(){return oe.lFrame.currentNamespace}var aD=!0;function Gp(){return aD}function Wp(n){aD=n}function gN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=BE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Kp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function wu(n,e,t){cD(n,e,3,t)}function Eu(n,e,t,r){(n[ee]&3)===t&&cD(n,e,t,r)}function kf(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function cD(n,e,t,r){let i=r!==void 0?n[io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[io]+=65536),(a<o||o==-1)&&(mN(n,t,e,u),n[io]=(n[io]&4294901760)+u+2),u++}function Ow(n,e){jt(4,n,e);let t=le(null);try{e.call(n)}finally{le(t),jt(5,n,e)}}function mN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[io]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,Ow(a,o)):Ow(a,o)}var co=-1,di=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function yN(n){return n instanceof di}function vN(n){return(n.flags&8)!==0}function _N(n){return(n.flags&16)!==0}function IN(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];wN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function uD(n){return n===3||n===4||n===6}function wN(n){return n.charCodeAt(0)===64}function yo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Fw(n,t,i,null,e[++r]):Fw(n,t,i,null,null))}}return n}function Fw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Of={},ep=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xu(r);let i=this.injector.get(e,Of,r);return i!==Of||t===Of?i:this.parentInjector.get(e,t,r)}};function lD(n){return n!==co}function Fu(n){return n&32767}function EN(n){return n>>16}function Vu(n,e){let t=EN(n),r=e;for(;t>0;)r=r[Do],t--;return r}var tp=!0;function Vw(n){let e=tp;return tp=n,e}var DN=256,dD=DN-1,hD=5,bN=0,cn={};function CN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Js)&&(r=t[Js]),r==null&&(r=t[Js]=bN++);let i=r&dD,o=1<<i;e.data[n+(i>>hD)]|=o}function Lu(n,e){let t=fD(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Ff(r.data,n),Ff(e,null),Ff(r.blueprint,null));let i=Qp(n,e),o=n.injectorIndex;if(lD(i)){let s=Fu(i),a=Vu(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ff(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Qp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vD(i),r===null)return co;if(t++,i=i[Do],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return co}function np(n,e,t){CN(n,e,t)}function TN(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(uD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function pD(n,e,t){if(t&ie.Optional||n!==void 0)return n;kp(e,"NodeInjector")}function gD(n,e,t,r){if(t&ie.Optional&&r===void 0&&(r=null),!(t&(ie.Self|ie.Host))){let i=n[ta],o=Lt(void 0);try{return i?i.get(e,r,t&ie.Optional):EE(e,r,t&ie.Optional)}finally{Lt(o)}}return pD(r,e,t)}function mD(n,e,t,r=ie.Default,i){if(n!==null){if(e[ee]&2048&&!(r&ie.Self)){let s=NN(n,e,t,r,cn);if(s!==cn)return s}let o=yD(n,e,t,r,cn);if(o!==cn)return o}return gD(e,t,r,i)}function yD(n,e,t,r,i){let o=RN(t);if(typeof o=="function"){if(!eD(e,n,r))return r&ie.Host?pD(i,t,r):gD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ie.Optional))kp(t);else return s}finally{iD()}}else if(typeof o=="number"){let s=null,a=fD(n,e),u=co,l=r&ie.Host?e[un][Xt]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?Qp(n,e):e[a+8],u===co||!Uw(r,!1)?a=-1:(s=e[ge],a=Fu(u),e=Vu(u,e)));a!==-1;){let h=e[ge];if(Lw(o,a,h.data)){let p=SN(a,e,t,s,r,l);if(p!==cn)return p}u=e[a+8],u!==co&&Uw(r,e[ge].data[a+8]===l)&&Lw(o,a,e)?(s=h,a=Fu(u),e=Vu(u,e)):a=-1}}return i}function SN(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?pi(a)&&tp:r!=s&&(a.type&3)!==0,l=i&ie.Host&&o===a,h=AN(a,s,t,u,l);return h!==null?Uu(e,s,h,a):cn}function AN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let S=s[_];if(_<u&&t===S||_>=u&&S.type===t)return _}if(i){let _=s[u];if(_&&On(_)&&_.type===t)return u}return null}function Uu(n,e,t,r){let i=n[t],o=e.data;if(yN(i)){let s=i;s.resolving&&gM(pM(o[t]));let a=Vw(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Lt(s.injectImpl):null,h=eD(n,r,ie.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&gN(t,o[t],e)}finally{l!==null&&Lt(l),Vw(a),s.resolving=!1,iD()}}return i}function RN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Js)?n[Js]:void 0;return typeof e=="number"?e>=0?e&dD:MN:e}function Lw(n,e,t){let r=1<<n;return!!(t[e+(n>>hD)]&r)}function Uw(n,e){return!(n&ie.Self)&&!(n&ie.Host&&e)}var ai=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mD(this._tNode,this._lView,e,Xu(r),t)}};function MN(){return new ai($t(),Re())}function mi(n){return oa(()=>{let e=n.prototype.constructor,t=e[Cu]||rp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Cu]||rp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rp(n){return mE(n)?()=>{let e=rp(ft(n));return e&&e()}:lo(n)}function NN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!ku(s);){let a=yD(o,s,t,r|ie.Self,cn);if(a!==cn)return a;let u=o.parent;if(!u){let l=s[VE];if(l){let h=l.get(t,cn,r);if(h!==cn)return h}u=vD(s),s=s[Do]}o=u}return i}function vD(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Xt]:null}function Yp(n){return TN($t(),n)}function jw(n,e=null,t=null,r){let i=_D(n,e,t,r);return i.resolveInjectorInitializers(),i}function _D(n,e=null,t=null,r,i=new Set){let o=[t||Ut,RM(n)];return r=r||(typeof n=="object"?void 0:pt(n)),new ea(o,e||Vp(),r||null,i)}var At=class n{static THROW_IF_NOT_FOUND=Xs;static NULL=new Au;static create(e,t){if(Array.isArray(e))return jw({name:""},t,e,"");{let r=e.name??"";return jw({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>te(TE)});static __NG_ELEMENT_ID__=-1};var xN=new z("");xN.__NG_ELEMENT_ID__=n=>{let e=$t();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&ie.Optional)return null;throw new $(204,!1)};var ID=!1,ua=(()=>{class n{static __NG_ELEMENT_ID__=PN;static __NG_ENV_ID__=t=>t}return n})(),ip=class extends ua{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return WE(this._lView,e),()=>KM(this._lView,e)}};function PN(){return new ip(Re())}var vo=class{},sl=new z("",{providedIn:"root",factory:()=>!1});var wD=new z(""),ED=new z(""),bo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new tt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();var op=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,FE()&&(this.destroyRef=F(ua,{optional:!0})??void 0,this.pendingTasks=F(bo,{optional:!0})??void 0)}emit(e){let t=le(null);try{super.next(e)}finally{le(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ke=op;function ju(...n){}function DD(n){let e,t;function r(){n=ju;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Bw(n){return queueMicrotask(()=>n()),()=>{n=ju}}var Zp="isAngularZone",Bu=Zp+"_ID",kN=0,Ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ke(!1);onMicrotaskEmpty=new Ke(!1);onStable=new Ke(!1);onError=new Ke(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ID}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,VN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ON,ju,ju);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ON={};function Jp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function FN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){DD(()=>{n.callbackScheduled=!1,sp(n),n.isCheckStableRunning=!0,Jp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),sp(n)}function VN(n){let e=()=>{FN(n)},t=kN++;n._inner=n._inner.fork({name:"angular",properties:{[Zp]:!0,[Bu]:t,[Bu+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(LN(u))return r.invokeTask(o,s,a,u);try{return $w(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Hw(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return $w(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!UN(u)&&e(),Hw(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,sp(n),Jp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function sp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $w(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Hw(n){n._nesting--,Jp(n)}var ap=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ke;onMicrotaskEmpty=new Ke;onStable=new Ke;onError=new Ke;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function LN(n){return bD(n,"__ignore_ng_zone__")}function UN(n){return bD(n,"__scheduler_tick__")}function bD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Fn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},jN=new z("",{providedIn:"root",factory:()=>{let n=F(Ve),e=F(Fn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qw(n,e){return pE(n,e)}function BN(n){return pE(fE,n)}var CD=(qw.required=BN,qw);function $N(){return al($t(),Re())}function al(n,e){return new Tr(en(n,e))}var Tr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=$N}return n})();var zw=new Set;function yi(n){zw.has(n)||(zw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Sr(n,e){yi("NgSignals");let t=ew(n),r=t[Ot];return e?.equal&&(r.equal=e.equal),t.set=i=>Gc(r,i),t.update=i=>tw(r,i),t.asReadonly=HN.bind(t),t}function HN(){let n=this[Ot];if(n.readonlyFn===void 0){let e=()=>this();e[Ot]=n,n.readonlyFn=e}return n.readonlyFn}function TD(n){return(n.flags&128)===128}var SD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(SD||{}),AD=new Map,qN=0;function zN(){return qN++}function GN(n){AD.set(n[nl],n)}function cp(n){AD.delete(n[nl])}var Gw="__ngContext__";function Co(n,e){yr(e)?(n[Gw]=e[nl],GN(e)):n[Gw]=e}function RD(n){return ND(n[na])}function MD(n){return ND(n[Zt])}function ND(n){for(;n!==null&&!Un(n);)n=n[Zt];return n}var up;function xD(n){up=n}function WN(){if(up!==void 0)return up;if(typeof document<"u")return document;throw new $(210,!1)}var Xp=new z("",{providedIn:"root",factory:()=>KN}),KN="ng",eg=new z(""),To=new z("",{providedIn:"platform",factory:()=>"unknown"});var tg=new z("",{providedIn:"root",factory:()=>WN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QN="h",YN="b";var PD=!1,ZN=new z("",{providedIn:"root",factory:()=>PD});var ng=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ng||{}),So=new z("");var oo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(oo||{}),kD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),JN=[oo.EarlyRead,oo.Write,oo.MixedReadWrite,oo.Read],XN=(()=>{class n{ngZone=F(Ve);scheduler=F(vo);errorHandler=F(Fn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(So,{optional:!0})}execute(){this.executing=!0;for(let t of JN)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[t]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[t](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ng.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),lp=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o=null){this.impl=e,this.hooks=t,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function rg(n,e){!e?.injector&&jM(rg);let t=e?.injector??F(At);return yi("NgAfterNextRender"),tx(n,t,e,!0)}function ex(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tx(n,e,t,r){let i=e.get(kD);i.impl??=e.get(XN);let o=e.get(So,null,{optional:!0}),s=t?.phase??oo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ua):null,u=new lp(i.impl,ex(n,s),r,a,o?.snapshot(null));return i.impl.register(u),u}var nx=()=>null;function OD(n,e,t=!1){return nx(n,e,t)}function FD(n,e){let t=n.contentQueries;if(t!==null){let r=le(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];XE(o),a.contentQueries(2,e[s],s)}}}finally{le(r)}}}function dp(n,e,t){XE(0);let r=le(null);try{e(n,t)}finally{le(r)}}function VD(n,e,t){if(UE(e)){let r=le(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{le(r)}}}var hn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(hn||{});var yu;function rx(){if(yu===void 0&&(yu=null,Hf.trustedTypes))try{yu=Hf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yu}function Ww(n){return rx()?.createScriptURL(n)||n}var $u=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hE})`}};function la(n){return n instanceof $u?n.changingThisBreaksApplicationSecurity:n}function ig(n,e){let t=ix(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hE})`)}return t===e}function ix(n){return n instanceof $u&&n.getTypeName()||null}var ox=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LD(n){return n=String(n),n.match(ox)?n:"unsafe:"+n}var cl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cl||{});function sx(n){let e=jD();return e?e.sanitize(cl.URL,n)||"":ig(n,"URL")?la(n):LD(uo(n))}function ax(n){let e=jD();if(e)return Ww(e.sanitize(cl.RESOURCE_URL,n)||"");if(ig(n,"ResourceURL"))return Ww(la(n));throw new $(904,!1)}function cx(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?ax:sx}function UD(n,e,t){return cx(e,t)(n)}function jD(){let n=Re();return n&&n[kn].sanitizer}function BD(n){return n instanceof Function?n():n}var _r=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(_r||{});function ux(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var $D="ng-template";function lx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ux(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(og(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function og(n){return n.type===4&&n.value!==$D}function dx(n,e,t){let r=n.type===4&&!t?$D:n.value;return e===r}function hx(n,e,t){let r=4,i=n.attrs,o=i!==null?gx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Yt(r)&&!Yt(u))return!1;if(s&&Yt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!dx(n,u,t)||u===""&&e.length===1){if(Yt(r))return!1;s=!0}}else if(r&8){if(i===null||!lx(n,i,u,t)){if(Yt(r))return!1;s=!0}}else{let l=e[++a],h=fx(u,i,og(n),t);if(h===-1){if(Yt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Yt(r))return!1;s=!0}}}}return Yt(r)||s}function Yt(n){return(n&1)===0}function fx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mx(e,n)}function px(n,e,t=!1){for(let r=0;r<e.length;r++)if(hx(n,e[r],t))return!0;return!1}function gx(n){for(let e=0;e<n.length;e++){let t=n[e];if(uD(t))return e}return n.length}function mx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Kw(n,e){return n?":not("+e.trim()+")":e}function yx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Yt(s)&&(e+=Kw(o,i),i=""),r=s,o=o||!Yt(r);t++}return i!==""&&(e+=Kw(o,i)),e}function vx(n){return n.map(yx).join(",")}function _x(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Yt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var fn={};function Ix(n,e){return n.createText(e)}function wx(n,e,t){n.setValue(e,t)}function HD(n,e,t){return n.createElement(e,t)}function Hu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function qD(n,e,t){n.appendChild(e,t)}function Qw(n,e,t,r,i){r!==null?Hu(n,e,t,r,i):qD(n,e,t)}function Ex(n,e,t){n.removeChild(null,e,t)}function Dx(n,e,t){n.setAttribute(e,"style",t)}function bx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&IN(n,e,r),i!==null&&bx(n,e,i),o!==null&&Dx(n,e,o)}function W(n=1){GD(tn(),Re(),gi()+n,!1)}function GD(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&wu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Eu(e,o,0,t)}li(t)}function ce(n,e=ie.Default){let t=Re();if(t===null)return te(n,e);let r=$t();return mD(r,t,ft(n),e)}function WD(){let n="invalid";throw new Error(n)}function KD(n,e,t,r,i,o){let s=le(null);try{let a=null;i&_r.SignalBased&&(a=e[r][Ot]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&_r.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):jE(e,a,r,o)}finally{le(s)}}function sg(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ln]=i,p[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),GE(p),p[gt]=p[Do]=n,p[St]=t,p[kn]=s||n&&n[kn],p[rt]=a||n&&n[rt],p[ta]=u||n&&n[ta]||null,p[Xt]=o,p[nl]=zN(),p[Ru]=h,p[VE]=l,p[un]=e.type==2?n[un]:p,p}function QD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YD(n,e,t,r,i){let o=gi(),s=r&2;try{li(-1),s&&e.length>Jt&&GD(n,e,Jt,!1),jt(s?2:0,i),t(r,i)}finally{li(o),jt(s?3:1,i)}}function ZD(n,e,t){KE()&&(Co(en(t,e),e),JD(n,e,t))}function JD(n,e,t){Fx(n,e,t),(t.flags&64)===64&&Vx(n,e,t)}function XD(n,e,t=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Cx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ag(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ag(n,e,t,r,i,o,s,a,u,l,h){let p=Jt+r,m=p+i,_=Tx(p,m),S=typeof l=="function"?l():l;return _[ge]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function Tx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fn);return t}function Sx(n,e,t,r){let o=r.get(ZN,PD)||t===hn.ShadowDom,s=n.selectRootElement(e,o);return Ax(s),s}function Ax(n){Rx(n)}var Rx=()=>null;function Yw(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=_r.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?Zw(r,t,l,a,u):Zw(r,t,l,a)}return r}function Zw(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Mx(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,_=m?m.inputs:null,S=m?m.outputs:null;u=Yw(0,p.inputs,h,u,_),l=Yw(1,p.outputs,h,l,S);let k=u!==null&&s!==null&&!og(e)?Yx(u,h,s):null;a.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Nx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function xx(n,e,t,r,i,o,s,a){let u=en(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ug(n,t,h,r,i),pi(e)&&Px(t,e.index)):e.type&3?(r=Nx(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Px(n,e){let t=dn(e,n);t[ee]&16||(t[ee]|=64)}function e0(n,e,t,r){if(KE()){let i=r===null?null:{"":-1},o=Ux(n,t);if(o!==null){let[s,a]=n0(n,t,o);t0(n,e,t,s,i,a)}i&&Bx(t,r,i)}t.mergedAttrs=yo(t.mergedAttrs,t.attrs)}function t0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)np(Lu(t,e),n,r[l].type);Hx(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=QD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=yo(t.mergedAttrs,h.hostAttrs),qx(n,t,e,u,h),$x(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Mx(n,t,o)}function kx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ox(s)!=a&&s.push(a),s.push(t,r,o)}}function Ox(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Fx(n,e,t){let r=t.directiveStart,i=t.directiveEnd;pi(t)&&Gx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Lu(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Uu(e,n,s,t);if(Co(u,e),o!==null&&Qx(e,s-r,u,a,t,o),On(a)){let l=dn(t.index,e);l[St]=Uu(e,n,s,t)}}}function Vx(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=lN();try{li(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Xf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Lx(u,l)}}finally{li(-1),Xf(s)}}function Lx(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ux(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];px(e,o.selectors,!1)&&(r??=[],On(o)?r.unshift(o):r.push(o))}return r}function n0(n,e,t){let r=[],i=null;for(let o of t)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),On(o)&&(r.push(o),jx(n,e,r.length-1));return pi(e)?r.push(...t.slice(1)):r.push(...t),[r,i]}function jx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Bx(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}}function $x(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;On(e)&&(t[""]=n)}}function Hx(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function qx(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=lo(i.type,!0)),s=new di(o,On(i),ce);n.blueprint[r]=s,t[r]=s,kx(n,e,r,QD(n,t,i.hostVars,fn),i)}function zx(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Gx(n,e,t){let r=en(e,n),i=Cx(t),o=n[kn].rendererFactory,s=cg(n,sg(n,i,null,zx(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Wx(n,e,t,r,i,o){let s=en(n,e);Kx(e[rt],s,o,n.value,t,r,i)}function Kx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?uo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Qx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];KD(r,t,u,l,h,p)}}function Yx(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function r0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function cg(n,e){return n[na]?n[xw][Zt]=e:n[na]=e,n[xw]=e,e}function i0(n,e){let t=n[ta],r=t?t.get(Fn,null):null;r&&r.handleError(e)}function ug(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];KD(h,l,r,a,u,i)}}function Zx(n,e){let t=dn(e,n),r=t[ge];Jx(r,t);let i=t[Ln];i!==null&&t[Ru]===null&&(t[Ru]=OD(i,t[ta])),lg(r,t,t[St])}function Jx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function lg(n,e,t){qp(e);try{let r=n.viewQuery;r!==null&&dp(1,r,t);let i=n.template;i!==null&&YD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[mo]?.finishViewCreation(n),n.staticContentQueries&&FD(n,e),n.staticViewQueries&&dp(2,n.viewQuery,t);let o=n.components;o!==null&&Xx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,zp()}}function Xx(n,e){for(let t=0;t<e.length;t++)Zx(n,e[t])}var Vn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Vn||{}),eP;function dg(n,e){return eP(n,e)}function o0(n){return(n.flags&32)===32}function so(n,e,t,r,i){if(r!=null){let o,s=!1;Un(r)?o=r:yr(r)&&(s=!0,r=r[Ln]);let a=ln(r);n===0&&t!==null?i==null?qD(e,t,a):Hu(e,t,a,i||null,!0):n===1&&t!==null?Hu(e,t,a,i||null,!0):n===2?Ex(e,a,s):n===3&&e.destroyNode(a),o!=null&&fP(e,n,o,t,i)}}function tP(n,e){s0(n,e),e[Ln]=null,e[Xt]=null}function nP(n,e,t,r,i,o){r[Ln]=i,r[Xt]=e,ul(n,r,t,1,i,o)}function s0(n,e){e[kn].changeDetectionScheduler?.notify(10),ul(n,e,e[rt],2,null,null)}function rP(n){let e=n[na];if(!e)return Vf(n[ge],n);for(;e;){let t=null;if(yr(e))t=e[na];else{let r=e[Ct];r&&(t=r)}if(!t){for(;e&&!e[Zt]&&e!==n;)yr(e)&&Vf(e[ge],e),e=e[gt];e===null&&(e=n),yr(e)&&Vf(e[ge],e),t=e&&e[Zt]}e=t}}function iP(n,e,t,r){let i=Ct+r,o=t.length;r>0&&(t[i-1][Zt]=e),r<o-Ct?(e[Zt]=t[i],CE(t,Ct+r,e)):(t.push(e),e[Zt]=null),e[gt]=t;let s=e[go];s!==null&&t!==s&&a0(s,e);let a=e[mo];a!==null&&a.insertView(n),Zf(e),e[ee]|=128}function a0(n,e){let t=n[Pu],r=e[gt];if(yr(r))n[ee]|=2;else{let i=r[gt][un];e[un]!==i&&(n[ee]|=2)}t===null?n[Pu]=[e]:t.push(e)}function hg(n,e){let t=n[Pu],r=t.indexOf(e);t.splice(r,1)}function qu(n,e){if(n.length<=Ct)return;let t=Ct+e,r=n[t];if(r){let i=r[go];i!==null&&i!==n&&hg(i,r),e>0&&(n[t-1][Zt]=r[Zt]);let o=Su(n,Ct+e);tP(r[ge],r);let s=o[mo];s!==null&&s.detachView(o[ge]),r[gt]=null,r[Zt]=null,r[ee]&=-129}return r}function fg(n,e){if(aa(e))return;let t=e[rt];t.destroyNode&&ul(n,e,t,3,null,null),rP(e)}function Vf(n,e){if(aa(e))return;let t=le(null);try{e[ee]&=-129,e[ee]|=256,e[bt]&&ff(e[bt]),sP(n,e),oP(n,e),e[ge].type===1&&e[rt].destroy();let r=e[go];if(r!==null&&Un(e[gt])){r!==e[gt]&&hg(r,e);let i=e[mo];i!==null&&i.detachView(n)}cp(e)}finally{le(t)}}function oP(n,e){let t=n.cleanup,r=e[Mu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Mu]=null);let i=e[mr];if(i!==null){e[mr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Nu];if(o!==null){e[Nu]=null;for(let s of o)s.destroy()}}function sP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof di)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];jt(4,a,u);try{u.call(a)}finally{jt(5,a,u)}}else{jt(4,i,o);try{o.call(i)}finally{jt(5,i,o)}}}}}function aP(n,e,t){return cP(n,e.parent,t)}function cP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ln];if(pi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===hn.None||i===hn.Emulated)return null}return en(r,t)}function uP(n,e,t){return dP(n,e,t)}function lP(n,e,t){return n.type&40?en(n,t):null}var dP=lP,Jw;function pg(n,e,t,r){let i=aP(n,r,e),o=e[rt],s=r.parent||e[Xt],a=uP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Qw(o,i,t[u],a,!1);else Qw(o,i,t,a,!1);Jw!==void 0&&Jw(o,r,e,t,i)}function Zs(n,e){if(e!==null){let t=e.type;if(t&3)return en(e,n);if(t&4)return hp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Zs(n,r);{let i=n[e.index];return Un(i)?hp(-1,i):ln(i)}}else{if(t&128)return Zs(n,e.next);if(t&32)return dg(e,n)()||ln(n[e.index]);{let r=c0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[un]);return Zs(i,r)}else return Zs(n,e.next)}}}return null}function c0(n,e){if(e!==null){let r=n[un][Xt],i=e.projection;return r.projection[i]}return null}function hp(n,e){let t=Ct+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Zs(r,i)}return e[ci]}function gg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Co(ln(a),r),t.flags|=2),!o0(t))if(u&8)gg(n,e,t.child,r,i,o,!1),so(e,n,i,a,o);else if(u&32){let l=dg(t,r),h;for(;h=l();)so(e,n,i,h,o);so(e,n,i,a,o)}else u&16?hP(n,e,r,t,i,o):so(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ul(n,e,t,r,i,o){gg(t,r,n.firstChild,e,i,o,!1)}function hP(n,e,t,r,i,o){let s=t[un],u=s[Xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];so(e,n,i,h,o)}else{let l=u,h=s[gt];TD(r)&&(l.flags|=128),gg(n,e,l,h,i,o,!0)}}function fP(n,e,t,r,i){let o=t[ci],s=ln(t);o!==s&&so(e,n,r,o,i);for(let a=Ct;a<t.length;a++){let u=t[a];ul(u[ge],u,n,e,r,o)}}function pP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Vn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vn.Important),n.setStyle(t,r,i,o))}}function u0(n,e,t,r){let i=le(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=sg(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[go]=l;let h=n[mo];return h!==null&&(u[mo]=h.createEmbeddedView(o)),lg(o,u,t),u}finally{le(i)}}function gP(n,e){let t=Ct+e;if(t<n.length)return n[t]}function fp(n,e){return!e||e.firstChild===null||TD(n)}function l0(n,e,t,r=!0){let i=e[ge];if(iP(i,e,n,t),r){let s=hp(t,n),a=e[rt],u=a.parentNode(n[ci]);u!==null&&nP(i,n[Xt],a,e,u,s)}let o=e[Ru];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mP(n,e){let t=qu(n,e);return t!==void 0&&fg(t[ge],t),t}function zu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ln(o)),Un(o)&&yP(o,r);let s=t.type;if(s&8)zu(n,e,t.child,r);else if(s&32){let a=dg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=c0(e,t);if(Array.isArray(a))r.push(...a);else{let u=ui(e[un]);zu(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function yP(n,e){for(let t=Ct;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&zu(r[ge],r,i,e)}n[ci]!==n[Ln]&&e.push(n[ci])}var d0=[];function vP(n){return n[bt]??_P(n)}function _P(n){let e=d0.pop()??Object.create(wP);return e.lView=n,e}function IP(n){n.lView[bt]!==n&&(n.lView=null,d0.push(n))}var wP=se(L({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{il(n.lView)},consumerOnSignalRead(){this.lView[bt]=this}});function EP(n){let e=n[bt]??Object.create(DP);return e.lView=n,e}var DP=se(L({},qs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!h0(e[ge]);)e=ui(e);e&&Bp(e)},consumerOnSignalRead(){this.lView[bt]=this}});function h0(n){return n.type!==2}function f0(n){if(n[Nu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Nu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var bP=100;function p0(n,e=!0,t=0){let i=n[kn].rendererFactory,o=!1;o||i.begin?.();try{CP(n,t)}catch(s){throw e&&i0(n,s),s}finally{o||i.end?.()}}function CP(n,e){let t=ZE();try{kw(!0),pp(n,e);let r=0;for(;rl(n);){if(r===bP)throw new $(103,!1);r++,pp(n,1)}}finally{kw(t)}}function TP(n,e,t,r){if(aa(e))return;let i=e[ee],o=!1,s=!1;qp(e);let a=!0,u=null,l=null;o||(h0(n)?(l=vP(e),u=Hc(l)):HI()===null?(a=!1,l=EP(e),u=Hc(l)):e[bt]&&(ff(e[bt]),e[bt]=null));try{GE(e),aN(n.bindingStartIndex),t!==null&&YD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&wu(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Eu(e,_,0,null),kf(e,0)}if(s||SP(e),f0(e),g0(e,0),n.contentQueries!==null&&FD(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&wu(e,_)}else{let _=n.contentHooks;_!==null&&Eu(e,_,1),kf(e,1)}RP(n,e);let p=n.components;p!==null&&y0(e,p,0);let m=n.viewQuery;if(m!==null&&dp(2,m,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&wu(e,_)}else{let _=n.viewHooks;_!==null&&Eu(e,_,2),kf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pf]){for(let _ of e[Pf])_();e[Pf]=null}o||(e[ee]&=-73)}catch(h){throw o||il(e),h}finally{l!==null&&(df(l,u),a&&IP(l)),zp()}}function g0(n,e){for(let t=RD(n);t!==null;t=MD(t))for(let r=Ct;r<t.length;r++){let i=t[r];m0(i,e)}}function SP(n){for(let e=RD(n);e!==null;e=MD(e)){if(!(e[ee]&2))continue;let t=e[Pu];for(let r=0;r<t.length;r++){let i=t[r];Bp(i)}}}function AP(n,e,t){let r=dn(e,n);m0(r,t)}function m0(n,e){jp(n)&&pp(n,e)}function pp(n,e){let r=n[ge],i=n[ee],o=n[bt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hf(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)TP(r,n,r.template,n[St]);else if(i&8192){f0(n),g0(n,1);let a=r.components;a!==null&&y0(n,a,1)}}function y0(n,e,t){for(let r=0;r<e.length;r++)AP(n,e[r],t)}function RP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)li(~i);else{let o=i,s=t[++r],a=t[++r];uN(s,o);let u=e[o];jt(24,u),a(2,u),jt(25,u)}}}finally{li(-1)}}function mg(n,e){let t=ZE()?64:1088;for(n[kn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=ui(n);if(ku(n)&&!r)return n;n=r}return null}var hi=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ge];return zu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[St]}get dirty(){return!!(this._lView[ee]&9280)||!!this._lView[bt]?.dirty}set context(e){this._lView[St]=e}get destroyed(){return aa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gt];if(Un(e)){let t=e[xu],r=t?t.indexOf(this):-1;r>-1&&(qu(e,r),Su(t,r))}this._attachedToViewContainer=!1}fg(this._lView[ge],this._lView)}onDestroy(e){WE(this._lView,e)}markForCheck(){mg(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Bp(this._cdRefInjectingView||this._lView)}detach(){this._lView[ee]&=-129}reattach(){Zf(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,p0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ku(this._lView),t=this._lView[go];t!==null&&!e&&hg(t,this._lView),s0(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=ku(this._lView),r=this._lView[go];r!==null&&!t&&a0(r,this._lView),Zf(this._lView)}},ll=(()=>{class n{static __NG_ELEMENT_ID__=xP}return n})(),MP=ll,NP=class extends MP{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=u0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new hi(i)}};function xP(){return PP($t(),Re())}function PP(n,e){return n.type&4?new NP(e,n,al(n,e)):null}function dl(n,e,t,r,i){let o=n.data[e];if(o===null)o=kP(n,e,t,r,i),cN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=rN();o.injectorIndex=s===null?-1:s.injectorIndex}return ca(o,!0),o}function kP(n,e,t,r,i){let o=QE(),s=YE(),a=s?o:o&&o.parent,u=n.data[e]=FP(n,a,t,e,r,i);return OP(n,u,o,s),u}function OP(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function FP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return eN()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var NG=new RegExp(`^(\\d+)*(${YN}|${QN})*(.*)`);var VP=()=>null;function gp(n,e){return VP(n,e)}var mp=class{},Gu=class{},yp=class{resolveComponentFactory(e){throw Error(`No component factory found for ${pt(e)}.`)}},_o=class{static NULL=new yp},Io=class{},vi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>LP()}return n})();function LP(){let n=Re(),e=$t(),t=dn(e.index,n);return(yr(t)?t:n)[rt]}var UP=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();function vp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Tw(i,a);else if(o==2){let u=a,l=e[++s];r=Tw(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Wu=class extends _o{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vr(e);return new wo(t,this.ngModule)}};function Xw(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:_r.None;e?t.push({propName:s,templateName:r,isSignal:(a&_r.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function jP(n){let e=n.toLowerCase();return e==="svg"?qE:e==="math"?zM:null}var wo=class extends Gu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Xw(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Xw(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){let o=le(null);try{i=i||this.ngModule;let s=i instanceof Tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ep(e,s):e,u=a.get(Io,null);if(u===null)throw new $(407,!1);let l=a.get(UP,null),h=a.get(vo,null),p={rendererFactory:u,sanitizer:l,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",S=r?Sx(m,r,this.componentDef.encapsulation,a):HD(m,_,jP(_)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let M=null;S!==null&&(M=OD(S,a,!0));let U=ag(0,null,null,1,0,null,null,null,null,null,null),q=sg(null,U,null,k,null,null,p,m,a,null,M);q[Jt]=S,qp(q);let G=null;try{let ae=r?["ng-version","19.1.4"]:_x(this.componentDef.selectors[0]),_e=dl(U,Jt,2,"#host",ae),[pe,D]=n0(U,_e,[this.componentDef]);t0(U,q,_e,pe,{},D);for(let y of pe)_e.mergedAttrs=yo(_e.mergedAttrs,y.hostAttrs);_e.mergedAttrs=yo(_e.mergedAttrs,ae),vp(_e,_e.mergedAttrs,!0),S&&(zD(m,S,_e),Co(S,q)),t!==void 0&&BP(_e,this.ngContentSelectors,t),JD(U,q,_e),VD(U,_e,q),Kp(U,_e),G=dn(_e.index,q),q[St]=G[St],lg(U,q,null)}catch(ae){throw G!==null&&cp(G),cp(q),ae}finally{zp()}return new _p(this.componentType,q)}finally{le(o)}}},_p=class extends mp{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Up(t[ge],Jt),this.location=al(this._tNode,t),this.instance=dn(this._tNode.index,t)[St],this.hostView=this.changeDetectorRef=new hi(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;ug(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=dn(this._tNode.index,o);mg(s,1)}}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function BP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ao=(()=>{class n{static __NG_ELEMENT_ID__=$P}return n})();function $P(){let n=$t();return qP(n,Re())}var HP=Ao,v0=class extends HP{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return al(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qp(this._hostTNode,this._hostLView);if(lD(e)){let t=Vu(e,this._hostLView),r=Fu(e),i=t[ge].data[r+8];return new ai(i,t)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=eE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=gp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fp(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!BM(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new wo(vr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let k=(s?l:this.parentInjector).get(Tt,null);k&&(o=k)}let h=vr(u.componentType??{}),p=gp(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,o);return this.insertImpl(_.hostView,a,fp(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(GM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[gt],l=new v0(u,u[Xt],u[gt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return l0(s,i,o,r),e.attachToViewContainerRef(),CE(Lf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=eE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=qu(this._lContainer,t);r&&(Su(Lf(this._lContainer),t),fg(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=qu(this._lContainer,t);return r&&Su(Lf(this._lContainer),t)!=null?new hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eE(n){return n[xu]}function Lf(n){return n[xu]||(n[xu]=[])}function qP(n,e){let t,r=e[n.index];return Un(r)?t=r:(t=r0(r,e,null,n),e[n.index]=t,cg(e,t)),GP(t,e,n,r),new v0(t,n,e)}function zP(n,e){let t=n[rt],r=t.createComment(""),i=en(e,n),o=t.parentNode(i);return Hu(t,o,r,t.nextSibling(i),!1),r}var GP=QP,WP=()=>!1;function KP(n,e,t){return WP(n,e,t)}function QP(n,e,t,r){if(n[ci])return;let i;t.type&8?i=ln(r):i=zP(e,t),n[ci]=i}var Ir=class{},ra=class{};var Ip=class extends Ir{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Wu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=AE(e);this._bootstrapComponents=BD(o.bootstrap),this._r3Injector=_D(e,t,[{provide:Ir,useValue:this},{provide:_o,useValue:this.componentFactoryResolver},...r],pt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wp=class extends ra{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ip(this.moduleType,e,[])}};var Ku=class extends Ir{injector;componentFactoryResolver=new Wu(this);instance=null;constructor(e){super();let t=new ea([...e.providers,{provide:Ir,useValue:this},{provide:_o,useValue:this.componentFactoryResolver}],e.parent||Vp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hl(n,e,t=null){return new Ku({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var YP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xE(!1,t.type),i=r.length>0?hl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(te(Tt))})}return n})();function Be(n){return oa(()=>{let e=_0(n),t=se(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===SD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(YP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||hn.Emulated,styles:n.styles||Ut,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&yi("NgStandalone"),I0(t);let r=n.dependencies;return t.directiveDefs=nE(r,!1),t.pipeDefs=nE(r,!0),t.id=XP(t),t})}function ZP(n){return vr(n)||RE(n)}function JP(n){return n!==null}function Ar(n){return oa(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tE(n,e){if(n==null)return ho;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=_r.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==_r.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Qe(n){return oa(()=>{let e=_0(n);return I0(e),e})}function _0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ho,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tE(n.inputs,e),outputs:tE(n.outputs),debugInfo:null}}function I0(n){n.features?.forEach(e=>e(n))}function nE(n,e){if(!n)return null;let t=e?ME:ZP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(JP)}function XP(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ek(n){return Object.getPrototypeOf(n.prototype).constructor}function pn(n){let e=ek(n.type),t=!0,r=[n];for(;e;){let i;if(On(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=vu(n.inputs),s.inputTransforms=vu(n.inputTransforms),s.declaredInputs=vu(n.declaredInputs),s.outputs=vu(n.outputs);let a=i.hostBindings;a&&ok(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&rk(n,u),l&&ik(n,l),tk(n,i),sM(n.outputs,i.outputs),On(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===pn&&(t=!1)}}e=Object.getPrototypeOf(e)}nk(r)}function tk(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function nk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yo(i.hostAttrs,t=yo(t,i.hostAttrs))}}function vu(n){return n===ho?{}:n===Ut?[]:n}function rk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function ik(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function ok(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function yg(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}function w0(n){return ak(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function sk(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function ak(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ck(n,e,t){return n[e]=t}function wr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function uk(n,e,t,r){let i=wr(n,e,t);return wr(n,e+1,r)||i}function lk(n,e,t,r,i,o,s,a,u){let l=e.consts,h=dl(e,n,4,s||null,a||null);e0(e,t,h,Ou(l,u)),Kp(e,h);let p=h.tView=ag(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function dk(n,e,t,r,i,o,s,a,u,l){let h=t+Jt,p=e.firstCreatePass?lk(h,e,n,r,i,o,s,a,u):e.data[h];ca(p,!1);let m=hk(e,n,p,t);Gp()&&pg(e,n,m,p),Co(m,n);let _=r0(m,n,m,p);return n[h]=_,cg(n,_),KP(_,p,n),Lp(p)&&ZD(e,n,p),u!=null&&XD(n,p,l),p}function Me(n,e,t,r,i,o,s,a){let u=Re(),l=tn(),h=Ou(l.consts,o);return dk(u,l,n,e,t,r,i,h,s,a),Me}var hk=fk;function fk(n,e,t,r){return Wp(!0),e[rt].createComment("")}var vg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var E0=new z("");function _i(n){return!!n&&typeof n.then=="function"}function D0(n){return!!n&&typeof n.subscribe=="function"}var fl=new z("");var b0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=F(fl,{optional:!0})??[];injector=F(At);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Bt(this.injector,i);if(_i(o))t.push(o);else if(D0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pk=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Ep})}return n})(),Ep=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},pl=new z("");function gk(){XI(()=>{throw new $(600,!1)})}function mk(n){return n.isBoundToModule}var yk=10;function vk(n,e,t){try{let r=t();return _i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Er=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(jN);afterRenderManager=F(kD);zonelessEnabled=F(sl);rootEffectScheduler=F(pk);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ze;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=F(bo).hasPendingTasks.pipe(he(t=>!t));constructor(){F(So,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=F(Tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Gu;if(!this._injector.get(b0).done){let m=!i&&NE(t),_=!1;throw new $(405,_)}let s;i?s=t:s=this._injector.get(_o).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=mk(s)?void 0:this._injector.get(Ir),u=r||s.selector,l=s.create(At.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(E0,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Du(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(ng.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new $(101,!1);let t=le(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,le(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Io,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<yk;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)_k(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>rl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Du(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Du(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Du(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _k(n,e,t,r){if(!t&&!rl(n))return;p0(n,e,t&&!r?0:1)}function da(n,e,t,r){let i=Re(),o=ol();if(wr(i,o,e)){let s=tn(),a=oD();Wx(a,i,n,e,t,r)}return da}function Ik(n,e,t,r){return wr(n,ol(),t)?e+uo(t)+r:fn}function wk(n,e,t,r,i,o){let s=sN(),a=uk(n,s,t,i);return JE(2),a?e+uo(t)+r+uo(i)+o:fn}function _u(n,e){return n<<17|e<<2}function fi(n){return n>>17&32767}function Ek(n){return(n&2)==2}function Dk(n,e){return n&131071|e<<17}function Dp(n){return n|2}function Eo(n){return(n&131068)>>2}function Uf(n,e){return n&-131069|e<<2}function bk(n){return(n&1)===1}function bp(n){return n|1}function Ck(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fi(s),u=Eo(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||sa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=fi(n[a+1]);n[r+1]=_u(m,a),m!==0&&(n[m+1]=Uf(n[m+1],r)),n[a+1]=Dk(n[a+1],r)}else n[r+1]=_u(a,0),a!==0&&(n[a+1]=Uf(n[a+1],r)),a=r;else n[r+1]=_u(u,0),a===0?a=r:n[u+1]=Uf(n[u+1],r),u=r;l&&(n[r+1]=Dp(n[r+1])),rE(n,h,r,!0),rE(n,h,r,!1),Tk(e,h,n,r,o),s=_u(a,u),o?e.classBindings=s:e.styleBindings=s}function Tk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&sa(o,e)>=0&&(t[r+1]=bp(t[r+1]))}function rE(n,e,t,r){let i=n[t+1],o=e===null,s=r?fi(i):Eo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Sk(u,e)&&(a=!0,n[s+1]=r?bp(l):Dp(l)),s=r?fi(l):Eo(l)}a&&(n[t+1]=r?Dp(i):bp(i))}function Sk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?sa(n,e)>=0:!1}function be(n,e,t){let r=Re(),i=ol();if(wr(r,i,e)){let o=tn(),s=oD();xx(o,s,r,n,e,r[rt],t,!1)}return be}function iE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";ug(n,t,o[s],s,r)}function gl(n,e){return Ak(n,e,null,!0),gl}function Ak(n,e,t,r){let i=Re(),o=tn(),s=JE(2);if(o.firstUpdatePass&&Mk(o,n,s,r),e!==fn&&wr(i,s,e)){let a=o.data[gi()];Ok(o,a,i,i[rt],n,i[s+1]=Fk(e,t),r,s)}}function Rk(n,e){return e>=n.expandoStartIndex}function Mk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[gi()],s=Rk(n,t);Vk(o,r)&&e===null&&!s&&(e=!1),e=Nk(i,o,e,r),Ck(i,o,e,t,s,r)}}function Nk(n,e,t,r){let i=dN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=jf(null,n,e,t,r),t=ia(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=jf(i,n,e,t,r),o===null){let u=xk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=jf(null,n,e,u[1],r),u=ia(u,e.attrs,r),Pk(n,e,r,u))}else o=kk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function xk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Eo(r)!==0)return n[fi(r)]}function Pk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fi(i)]=r}function kk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ia(r,s,t)}return ia(r,e.attrs,t)}function jf(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ia(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ia(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),SM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Ok(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=bk(l)?oE(u,e,t,i,Eo(l),s):void 0;if(!Qu(h)){Qu(o)||Ek(l)&&(o=oE(u,null,t,i,a,s));let p=zE(gi(),t);pP(r,s,p,i,o)}}function oE(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===fn&&(m=p?Ut:void 0);let _=p?Nf(m,r):h===r?m:void 0;if(l&&!Qu(_)&&(_=Nf(u,r)),Qu(_)&&(a=_,s))return a;let S=n[i+1];i=s?fi(S):Eo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Nf(u,r))}return a}function Qu(n){return n!==void 0}function Fk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=pt(la(n)))),n}function Vk(n,e){return(n.flags&(e?8:16))!==0}function jn(n,e){yi("NgControlFlow");let t=Re(),r=ol(),i=t[r]!==fn?t[r]:-1,o=i!==-1?sE(t,Jt+i):void 0,s=0;if(wr(t,r,n)){let a=le(null);try{if(o!==void 0&&mP(o,s),n!==-1){let u=Jt+n,l=sE(t,u),h=Lk(t[ge],u),p=gp(l,h.tView.ssrId),m=u0(t,h,e,{dehydratedView:p});l0(l,m,s,fp(h,p))}}finally{le(a)}}else if(o!==void 0){let a=gP(o,s);a!==void 0&&(a[St]=e)}}function sE(n,e){return n[e]}function Lk(n,e){return Up(n,e)}function Uk(n,e,t,r,i,o){let s=e.consts,a=Ou(s,i),u=dl(e,n,2,r,a);return e0(e,t,u,Ou(s,o)),u.attrs!==null&&vp(u,u.attrs,!1),u.mergedAttrs!==null&&vp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function N(n,e,t,r){let i=Re(),o=tn(),s=Jt+n,a=i[rt],u=o.firstCreatePass?Uk(s,o,i,e,t,r):o.data[s],l=jk(o,i,u,a,e,n);i[s]=l;let h=Lp(u);return ca(u,!0),zD(a,l,u),!o0(u)&&Gp()&&pg(o,i,l,u),ZM()===0&&Co(l,i),JM(),h&&(ZD(o,i,u),VD(o,u,i)),r!==null&&XD(i,u),N}function R(){let n=$t();YE()?iN():(n=n.parent,ca(n,!1));let e=n;tN(e)&&nN(),XM();let t=tn();return t.firstCreatePass&&(Kp(t,n),UE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&vN(e)&&iE(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&_N(e)&&iE(t,e,Re(),e.stylesWithoutHost,!1),R}function Se(n,e,t,r){return N(n,e,t,r),R(),Se}var jk=(n,e,t,r,i,o)=>(Wp(!0),HD(r,i,pN()));function _g(){return Re()}var Yu="en-US";var Bk=Yu;function $k(n){typeof n=="string"&&(Bk=n.toLowerCase().replace(/_/g,"-"))}var Hk=(n,e,t)=>{};function mt(n,e,t,r){let i=Re(),o=tn(),s=$t();return zk(o,i,i[rt],s,n,e,r),mt}function qk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Mu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function zk(n,e,t,r,i,o,s){let a=Lp(r),l=n.firstCreatePass&&YM(n),h=e[St],p=QM(e),m=!0;if(r.type&3||s){let k=en(r,e),M=s?s(k):k,U=p.length,q=s?ae=>s(ln(ae[r.index])):r.index,G=null;if(!s&&a&&(G=qk(n,e,i,r.index)),G!==null){let ae=G.__ngLastListenerFn__||G;ae.__ngNextListenerFn__=o,G.__ngLastListenerFn__=o,m=!1}else{o=cE(r,e,h,o),Hk(k,i,o);let ae=t.listen(M,i,o);p.push(o,ae),l&&l.push(i,q,U,U+1)}}else o=cE(r,e,h,o);let _=r.outputs,S;if(m&&_!==null&&(S=_[i])){let k=S.length;if(k)for(let M=0;M<k;M+=2){let U=S[M],q=S[M+1],_e=e[U][q].subscribe(o),pe=p.length;p.push(o,_e),l&&l.push(i,r.index,pe,-(pe+1))}}}function aE(n,e,t,r){let i=le(null);try{return jt(6,e,t),t(r)!==!1}catch(o){return i0(n,o),!1}finally{jt(7,e,t),le(i)}}function cE(n,e,t,r){return function i(o){if(o===Function)return r;let s=pi(n)?dn(n.index,e):e;mg(s,5);let a=aE(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=aE(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Bn(n=1){return fN(n)}function O(n,e=""){let t=Re(),r=tn(),i=n+Jt,o=r.firstCreatePass?dl(r,i,1,e,null):r.data[i],s=Gk(r,t,o,e,n);t[i]=s,Gp()&&pg(r,t,s,o),ca(o,!1)}var Gk=(n,e,t,r,i)=>(Wp(!0),Ix(e[rt],r));function nn(n){return Rt("",n,""),nn}function Rt(n,e,t){let r=Re(),i=Ik(r,n,e,t);return i!==fn&&C0(r,gi(),i),Rt}function Ig(n,e,t,r,i){let o=Re(),s=wk(o,n,e,t,r,i);return s!==fn&&C0(o,gi(),s),Ig}function C0(n,e,t){let r=zE(e,n);wx(n[rt],r,t)}function Wk(n,e,t){let r=tn();if(r.firstCreatePass){let i=On(n);Cp(t,r.data,r.blueprint,i,!0),Cp(e,r.data,r.blueprint,i,!1)}}function Cp(n,e,t,r,i){if(n=ft(n),Array.isArray(n))for(let o=0;o<n.length;o++)Cp(n[o],e,t,r,i);else{let o=tn(),s=Re(),a=$t(),u=po(n)?n:ft(n.provide),l=OE(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(po(n)||!n.multi){let _=new di(l,i,ce),S=$f(u,e,i?h:h+m,p);S===-1?(np(Lu(a,s),o,u),Bf(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[S]=_,s[S]=_)}else{let _=$f(u,e,h+m,p),S=$f(u,e,h,h+m),k=_>=0&&t[_],M=S>=0&&t[S];if(i&&!M||!i&&!k){np(Lu(a,s),o,u);let U=Yk(i?Qk:Kk,t.length,i,r,l);!i&&M&&(t[S].providerFactory=U),Bf(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=T0(t[i?S:_],l,!i&&r);Bf(o,n,_>-1?_:S,U)}!i&&r&&M&&t[S].componentProviders++}}}function Bf(n,e,t,r){let i=po(e),o=PM(e);if(i||o){let u=(o?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function T0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $f(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Kk(n,e,t,r){return Tp(this.multi,[])}function Qk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Uu(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),Tp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Tp(i,o);return o}function Tp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Yk(n,e,t,r,i){let o=new di(n,t,ce);return o.multi=[],o.index=e,o.componentProviders=0,T0(o,i,r&&!t),o}function Ro(n,e=[]){return t=>{t.providersResolver=(r,i)=>Wk(r,i?i(n):n,e)}}function S0(n,e,t,r){return Jk(Re(),oN(),n,e,t,r)}function Zk(n,e){let t=n[e];return t===fn?void 0:t}function Jk(n,e,t,r,i,o){let s=e+t;return wr(n,s,i)?ck(n,s+1,o?r.call(o,i):r(i)):Zk(n,s+1)}var Sp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ml=(()=>{class n{compileModuleSync(t){return new wp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=AE(t),o=BD(i.declarations).reduce((s,a)=>{let u=vr(a);return u&&s.push(new wo(u)),s},[]);return new Sp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xk=(()=>{class n{zone=F(Ve);changeDetectionScheduler=F(vo);applicationRef=F(Er);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eO=new z("",{factory:()=>!1});function A0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ve(se(L({},M0()),{scheduleInRootZone:t})),[{provide:Ve,useFactory:n},{provide:fo,multi:!0,useFactory:()=>{let r=F(Xk,{optional:!0});return()=>r.initialize()}},{provide:fo,multi:!0,useFactory:()=>{let r=F(tO);return()=>{r.initialize()}}},e===!0?{provide:wD,useValue:!0}:[],{provide:ED,useValue:t??ID}]}function R0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=A0({ngZoneFactory:()=>{let i=M0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&yi("NgZone_CoalesceEvent"),new Ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return el([{provide:eO,useValue:!0},{provide:sl,useValue:!1},r])}function M0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tO=(()=>{class n{subscription=new Le;initialized=!1;zone=F(Ve);pendingTasks=F(bo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nO=(()=>{class n{appRef=F(Er);taskService=F(bo);ngZone=F(Ve);zonelessEnabled=F(sl);tracing=F(So,{optional:!0});disableScheduling=F(wD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Le;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(ED,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ap||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Bw:DD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rO(){return typeof $localize<"u"&&$localize.locale||Yu}var wg=new z("",{providedIn:"root",factory:()=>F(wg,ie.Optional|ie.SkipSelf)||rO()});var Ap=new z(""),iO=new z("");function Qs(n){return!n.moduleRef}function oO(n){let e=Qs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ve);return t.run(()=>{Qs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Fn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Qs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ap);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ap);s.add(o),n.moduleRef.onDestroy(()=>{Du(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return vk(r,t,()=>{let o=e.get(b0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(wg,Yu);if($k(s||Yu),!e.get(iO,!0))return Qs(n)?e.get(Er):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Qs(n)){let u=e.get(Er);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return sO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sO(n,e){let t=n.injector.get(Er);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new $(-403,!1);e.push(n)}var bu=null;function aO(n=[],e){return At.create({name:e,providers:[{provide:tl,useValue:"platform"},{provide:Ap,useValue:new Set([()=>bu=null])},...n]})}function cO(n=[]){if(bu)return bu;let e=aO(n);return bu=e,gk(),uO(e),e}function uO(n){let e=n.get(eg,null);Bt(n,()=>{e?.forEach(t=>t())})}var Mo=(()=>{class n{static __NG_ELEMENT_ID__=lO}return n})();function lO(n){return dO($t(),Re(),(n&16)===16)}function dO(n,e,t){if(pi(n)&&!t){let r=dn(n.index,e);return new hi(r,r)}else if(n.type&175){let r=e[un];return new hi(r,e)}return null}var Rp=class{constructor(){}supports(e){return w0(e)}create(e){return new Mp(e)}},hO=(n,e)=>e,Mp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||hO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<uE(r,i,o)?t:r,a=uE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let _=m<o.length?o[m]:o[m]=0,S=_+m;h<=S&&S<l&&(o[m]=_+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!w0(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,sk(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Np(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Np=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},xp=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Zu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new xp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function lE(){return new Eg([new Rp])}var Eg=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:lE});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lE()),deps:[[n,new CM,new bE]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function N0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=cO(r),o=[A0({}),{provide:vo,useExisting:nO},...t||[]],s=new Ku({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return oO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Ii(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ha(n,e){yi("NgSignals");let t=YI(n);return e?.equal&&(t[Ot].equal=e.equal),t}function $n(n){let e=le(null);try{return n()}finally{le(e)}}var dE=class{[Ot];constructor(e){this[Ot]=e}destroy(){this[Ot].destroy()}};function x0(n){let e=vr(n);if(!e)return null;let t=new wo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var V0=null;function qn(){return V0}function L0(n){V0??=n}var yl=class{};var It=new z(""),Sg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(fO),providedIn:"platform"})}return n})(),U0=new z(""),fO=(()=>{class n extends Sg{_location;_history;_doc=F(It);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Ag(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function P0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Hn(n){return n&&n[0]!=="?"?"?"+n:n}var zn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(Rg),providedIn:"root"})}return n})(),j0=new z(""),Rg=(()=>{class n extends zn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ag(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Hn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(Sg),te(j0,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),B0=(()=>{class n extends zn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Ag(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Hn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(Sg),te(j0,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),No=(()=>{class n{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mO(P0(k0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Hn(r))}normalize(t){return n.stripTrailingSlash(gO(this._basePath,k0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Hn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Hn;static joinWithSlash=Ag;static stripTrailingSlash=P0;static \u0275fac=function(r){return new(r||n)(te(zn))};static \u0275prov=H({token:n,factory:()=>pO(),providedIn:"root"})}return n})();function pO(){return new No(te(zn))}function gO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function k0(n){return n.replace(/\/index.html$/,"")}function mO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function $0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Dg=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Rr=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Dg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),O0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);O0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(Ao),ce(ll),ce(Eg))};static \u0275dir=Qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function O0(n,e){n.context.$implicit=e.item}var _l=(()=>{class n{_viewContainer;_context=new bg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){F0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){F0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(Ao),ce(ll))};static \u0275dir=Qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),bg=class{$implicit=null;ngIf=null};function F0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${pt(e)}'.`)}var it=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({})}return n})(),H0="browser",yO="server";function Mg(n){return n===yO}var q0=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Cg(F(It),window)})}return n})(),Cg=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=vO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function vO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var vl=class{};var xg=class extends yl{supportsDOMEvents=!0},Pg=class n extends xg{static makeCurrent(){L0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_O();return t==null?null:IO(t)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $0(document.cookie,e)}},fa=null;function _O(){return fa=fa||document.querySelector("base"),fa?fa.getAttribute("href"):null}function IO(n){return new URL(n,document.baseURI).pathname}var wO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),kg=new z(""),Y0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(kg),te(Ve))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),wl=class{_doc;constructor(e){this._doc=e}manager},Il="ng-app-id";function z0(n){for(let e of n)e.remove()}function G0(n,e){let t=e.createElement("style");return t.textContent=n,t}function EO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Il}="${e}"],link[${Il}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Il),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Og(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Z0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Mg(o),EO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,G0);r?.forEach(i=>this.addUsage(i,this.external,Og))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(z0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])z0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,G0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Og(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Il,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(It),te(Xp),te(tg,8),te(To))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Ng={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vg=/%COMP%/g;var J0="%COMP%",DO=`_nghost-${J0}`,bO=`_ngcontent-${J0}`,CO=!0,TO=new z("",{providedIn:"root",factory:()=>CO});function SO(n){return bO.replace(Vg,n)}function AO(n){return DO.replace(Vg,n)}function X0(n,e){return e.map(t=>t.replace(Vg,n))}var W0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Mg(a),this.defaultRenderer=new pa(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hn.ShadowDom&&(r=se(L({},r),{encapsulation:hn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof El?i.applyToHost(t):i instanceof ga&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case hn.Emulated:o=new El(u,l,r,this.appId,h,s,a,p,m);break;case hn.ShadowDom:return new Fg(u,l,t,r,s,a,this.nonce,p,m);default:o=new ga(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(Y0),te(Z0),te(Xp),te(TO),te(It),te(To),te(Ve),te(tg),te(So,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),pa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ng[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(K0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(K0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ng[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ng[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(t,r,i&Vn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Vn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function K0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Fg=class extends pa{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=X0(i.id,h);for(let m of h){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=m,this.shadowRoot.appendChild(_)}let p=i.getExternalStyles?.();if(p)for(let m of p){let _=Og(m,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ga=class extends pa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?X0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},El=class extends ga{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=SO(h),this.hostAttr=AO(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},RO=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(te(It))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Q0=["alt","control","meta","shift"],MO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xO=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Q0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=MO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Q0.forEach(s=>{if(s!==i){let a=NO[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(It))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function eb(n,e){return N0(L({rootComponent:n},PO(e)))}function PO(n){return{appProviders:[...LO,...n?.providers??[]],platformProviders:VO}}function kO(){Pg.makeCurrent()}function OO(){return new Fn}function FO(){return xD(document),document}var VO=[{provide:To,useValue:H0},{provide:eg,useValue:kO,multi:!0},{provide:It,useFactory:FO,deps:[]}];var LO=[{provide:tl,useValue:"root"},{provide:Fn,useFactory:OO,deps:[]},{provide:kg,useClass:RO,multi:!0,deps:[It,Ve,To]},{provide:kg,useClass:xO,multi:!0,deps:[It]},W0,Z0,Y0,{provide:Io,useExisting:W0},{provide:vl,useClass:wO,deps:[]},[]];var tb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(It))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Ra=Symbol("RouteTitle"),$g=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vo(n){return new $g(n)}function jO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function BO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gn(n[t],e[t]))return!1;return!0}function gn(n,e){let t=n?Hg(n):void 0,r=e?Hg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!db(n[i],e[i]))return!1;return!0}function Hg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function db(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function hb(n){return n.length>0?n[n.length-1]:null}function xr(n){return Cf(n)?n:_i(n)?xe(Promise.resolve(n)):Z(n)}var $O={exact:pb,subset:gb},fb={exact:HO,subset:qO,ignored:()=>!0};function nb(n,e,t){return $O[t.paths](n.root,e.root,t.matrixParams)&&fb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function HO(n,e){return gn(n,e)}function pb(n,e,t){if(!Di(n.segments,e.segments)||!Cl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!pb(n.children[r],e.children[r],t))return!1;return!0}function qO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>db(n[t],e[t]))}function gb(n,e,t){return mb(n,e,e.segments,t)}function mb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Di(i,t)||e.hasChildren()||!Cl(i,t,r))}else if(n.segments.length===t.length){if(!Di(n.segments,t)||!Cl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gb(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Di(n.segments,i)||!Cl(n.segments,i,r)||!n.children[re]?!1:mb(n.children[re],e,o,r)}}function Cl(n,e,t){return e.every((r,i)=>fb[t](n[i].parameters,r.parameters))}var Wn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){return WO.serialize(this)}},Ee=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tl(this)}},Ei=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vo(this.parameters),this._parameterMap}toString(){return vb(this)}};function zO(n,e){return Di(n,e)&&n.every((t,r)=>gn(t.parameters,e[r].parameters))}function Di(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function GO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var Ma=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Lo,providedIn:"root"})}return n})(),Lo=class{parse(e){let t=new zg(e);return new Wn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ma(e.root,!0)}`,r=YO(e.queryParams),i=typeof e.fragment=="string"?`#${KO(e.fragment)}`:"";return`${t}${r}${i}`}},WO=new Lo;function Tl(n){return n.segments.map(e=>vb(e)).join("/")}function ma(n,e){if(!n.hasChildren())return Tl(n);if(e){let t=n.children[re]?ma(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${ma(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=GO(n,(r,i)=>i===re?[ma(n.children[re],!1)]:[`${i}:${ma(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Tl(n)}/${t[0]}`:`${Tl(n)}/(${t.join("//")})`}}function yb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dl(n){return yb(n).replace(/%3B/gi,";")}function KO(n){return encodeURI(n)}function qg(n){return yb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sl(n){return decodeURIComponent(n)}function rb(n){return Sl(n.replace(/\+/g,"%20"))}function vb(n){return`${qg(n.path)}${QO(n.parameters)}`}function QO(n){return Object.entries(n).map(([e,t])=>`;${qg(e)}=${qg(t)}`).join("")}function YO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Dl(t)}=${Dl(i)}`).join("&"):`${Dl(t)}=${Dl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ZO=/^[^\/()?;#]+/;function Lg(n){let e=n.match(ZO);return e?e[0]:""}var JO=/^[^\/()?;=#]+/;function XO(n){let e=n.match(JO);return e?e[0]:""}var e1=/^[^=?&#]+/;function t1(n){let e=n.match(e1);return e?e[0]:""}var n1=/^[^&#]+/;function r1(n){let e=n.match(n1);return e?e[0]:""}var zg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new Ee(e,t)),r}parseSegment(){let e=Lg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ei(Sl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=XO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Lg(this.remaining);i&&(r=i,this.capture(r))}e[Sl(t)]=Sl(r)}parseQueryParam(e){let t=t1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=r1(this.remaining);s&&(r=s,this.capture(r))}let i=rb(t),o=rb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Lg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[re]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function _b(n){return n.segments.length>0?new Ee([],{[re]:n}):n}function Ib(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Ib(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return i1(t)}function i1(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new Ee(n.segments.concat(e.segments),e.children)}return n}function bi(n){return n instanceof Wn}function o1(n,e,t=null,r=null){let i=wb(n);return Eb(i,e,t,r)}function wb(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=_b(r);return e??i}function Eb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ug(i,i,i,t,r);let o=s1(e);if(o.toRoot())return Ug(i,i,new Ee([],{}),t,r);let s=a1(o,i,n),a=s.processChildren?va(s.segmentGroup,s.index,o.commands):bb(s.segmentGroup,s.index,o.commands);return Ug(i,s.segmentGroup,a,t,r)}function Al(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function wa(n){return typeof n=="object"&&n!=null&&n.outlets}function Ug(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=Db(n,e,t);let a=_b(Ib(s));return new Wn(a,o,i)}function Db(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Db(o,e,t)}),new Ee(n.segments,r)}var Rl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Al(r[0]))throw new $(4003,!1);let i=r.find(wa);if(i&&i!==hb(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function s1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Rl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Rl(t,e,r)}var ko=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function a1(n,e,t){if(n.isAbsolute)return new ko(e,!0,0);if(!t)return new ko(e,!1,NaN);if(t.parent===null)return new ko(t,!0,0);let r=Al(n.commands[0])?0:1,i=t.segments.length-1+r;return c1(t,i,n.numberOfDoubleDots)}function c1(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new ko(r,!1,i-o)}function u1(n){return wa(n[0])?n[0].outlets:{[re]:n}}function bb(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return va(n,e,t);let r=l1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new Ee(n.segments.slice(r.pathIndex),n.children),va(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?Gg(n,e,t):r.match?va(n,0,i):Gg(n,e,t)}function va(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=u1(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=va(n.children[re],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=bb(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function l1(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(wa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ob(u,l,s))return o;r+=2}else{if(!ob(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(wa(o)){let u=d1(o.outlets);return new Ee(r,u)}if(i===0&&Al(t[0])){let u=n.segments[e];r.push(new Ei(u.path,ib(t[0]))),i++;continue}let s=wa(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Al(a)?(r.push(new Ei(s,ib(a))),i+=2):(r.push(new Ei(s,{})),i++)}return new Ee(r,{})}function d1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Gg(new Ee([],{}),0,r))}),e}function ib(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ob(n,e,t){return n==t.path&&gn(e,t.parameters)}var _a="imperative",Ye=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ye||{}),Ht=class{id;url;constructor(e,t){this.id=e,this.url=t}},Uo=class extends Ht{type=Ye.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mn=class extends Ht{urlAfterRedirects;type=Ye.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Nt||{}),Ml=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ml||{}),Gn=class extends Ht{reason;code;type=Ye.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends Ht{reason;code;type=Ye.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ea=class extends Ht{error;target;type=Ye.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nl=class extends Ht{urlAfterRedirects;state;type=Ye.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends Ht{urlAfterRedirects;state;type=Ye.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class extends Ht{urlAfterRedirects;state;shouldActivate;type=Ye.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qg=class extends Ht{urlAfterRedirects;state;type=Ye.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends Ht{urlAfterRedirects;state;type=Ye.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class{route;type=Ye.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jg=class{route;type=Ye.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xg=class{snapshot;type=Ye.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},em=class{snapshot;type=Ye.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tm=class{snapshot;type=Ye.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nm=class{snapshot;type=Ye.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xl=class{routerEvent;position;anchor;type=Ye.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Da=class{},jo=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function h1(n,e){return n.providers&&!n._injector&&(n._injector=hl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function rn(n){return n.outlet||re}function f1(n,e){let t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}function Na(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var rm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Na(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new xa(this.rootInjector)}},xa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(Tt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=im(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=im(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=om(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return om(e,this._root).map(t=>t.value)}};function im(n,e){if(n===e.value)return e;for(let t of e.children){let r=im(n,t);if(r)return r}return null}function om(n,e){if(n===e.value)return[e];for(let t of e.children){let r=om(n,t);if(r.length)return r.unshift(e),r}return[]}var Mt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Po(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var kl=class extends Pl{snapshot;constructor(e,t){super(e),this.snapshot=t,pm(this,e)}toString(){return this.snapshot.toString()}};function Cb(n){let e=p1(n),t=new tt([new Ei("",{})]),r=new tt({}),i=new tt({}),o=new tt({}),s=new tt(""),a=new Nr(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new kl(new Mt(a,[]),e)}function p1(n){let e={},t={},r={},i="",o=new Oo([],e,r,i,t,re,n,null,{});return new Fl("",new Mt(o,[]))}var Nr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(he(l=>l[Ra]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>Vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>Vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ol(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Sb(i)&&(r.resolve[Ra]=i.title),r}var Oo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ra]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Fl=class extends Pl{url;constructor(e,t){super(t),this.url=e,pm(this,t)}toString(){return Tb(this._root)}};function pm(n,e){e.value._routerState=n,e.children.forEach(t=>pm(n,t))}function Tb(n){let e=n.children.length>0?` { ${n.children.map(Tb).join(", ")} } `:"";return`${n.value}${e}`}function jg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),gn(e.params,t.params)||n.paramsSubject.next(t.params),BO(e.url,t.url)||n.urlSubject.next(t.url),gn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sm(n,e){let t=gn(n.params,e.params)&&zO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||sm(n.parent,e.parent))}function Sb(n){return typeof n.title=="string"||n.title===null}var g1=new z(""),gm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Ke;deactivateEvents=new Ke;attachEvents=new Ke;detachEvents=new Ke;routerOutletData=CD(void 0);parentContexts=F(xa);location=F(Ao);changeDetector=F(Mo);inputBinder=F(jl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new am(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Cr]})}return n})(),am=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Nr?this.route:e===xa?this.childContexts:e===g1?this.outletData:this.parent.get(e,t)}},jl=new z(""),sb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ws([r.queryParams,r.params,r.data]).pipe(Vt(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=x0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function m1(n,e,t){let r=ba(n,e._root,t?t._root:void 0);return new kl(r,e)}function ba(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=y1(n,e,t);return new Mt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ba(n,a)),s}}let r=v1(e.value),i=e.children.map(o=>ba(n,o));return new Mt(r,i)}}function y1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ba(n,r,i);return ba(n,r)})}function v1(n){return new Nr(new tt(n.url),new tt(n.params),new tt(n.queryParams),new tt(n.fragment),new tt(n.data),n.outlet,n.component,n)}var Ca=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Ab="ngNavigationCancelingError";function Vl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=bi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rb(!1,Nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Rb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Ab]=!0,t.cancellationCode=e,t}function _1(n){return Mb(n)&&bi(n.url)}function Mb(n){return!!n&&n[Ab]}var I1=(n,e,t,r)=>he(i=>(new cm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),cm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),jg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Po(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Po(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Po(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Po(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new em(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(jg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),jg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ll=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function w1(n,e,t){let r=n._root,i=e?e._root:null;return ya(r,i,t,[r.value])}function E1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $o(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!yE(n)?n:e.get(n):r}function ya(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Po(e);return n.children.forEach(s=>{D1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ia(a,t.getContext(s),i)),i}function D1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=b1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ll(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ya(n,e,a?a.children:null,r,i):ya(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fo(a.outlet.component,s))}else s&&Ia(e,a,i),i.canActivateChecks.push(new Ll(r)),o.component?ya(n,null,a?a.children:null,r,i):ya(n,null,t,r,i);return i}function b1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Di(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Di(n.url,e.url)||!gn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sm(n,e)||!gn(n.queryParams,e.queryParams);case"paramsChange":default:return!sm(n,e)}}function Ia(n,e,t){let r=Po(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ia(s,e.children.getContext(o),t):Ia(s,null,t):Ia(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Fo(e.outlet.component,i)):t.canDeactivateChecks.push(new Fo(null,i)):t.canDeactivateChecks.push(new Fo(null,i))}function Pa(n){return typeof n=="function"}function C1(n){return typeof n=="boolean"}function T1(n){return n&&Pa(n.canLoad)}function S1(n){return n&&Pa(n.canActivate)}function A1(n){return n&&Pa(n.canActivateChild)}function R1(n){return n&&Pa(n.canDeactivate)}function M1(n){return n&&Pa(n.canMatch)}function Nb(n){return n instanceof Nn||n?.name==="EmptyError"}var bl=Symbol("INITIAL_VALUE");function Bo(){return Vt(n=>Ws(n.map(e=>e.pipe(xn(1),Rf(bl)))).pipe(he(e=>{for(let t of e)if(t!==!0){if(t===bl)return bl;if(t===!1||N1(t))return t}return!0}),Ft(e=>e!==bl),xn(1)))}function N1(n){return bi(n)||n instanceof Ca}function x1(n,e){return je(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(se(L({},t),{guardsResult:!0})):P1(s,r,i,n).pipe(je(a=>a&&C1(a)?k1(r,o,n,e):Z(a)),he(a=>se(L({},t),{guardsResult:a})))})}function P1(n,e,t,r){return xe(n).pipe(je(i=>U1(i.component,i.route,t,e,r)),Pn(i=>i!==!0,!0))}function k1(n,e,t,r){return xe(e).pipe(si(i=>to(F1(i.route.parent,r),O1(i.route,r),L1(n,i.path,t),V1(n,i.route,t))),Pn(i=>i!==!0,!0))}function O1(n,e){return n!==null&&e&&e(new tm(n)),Z(!0)}function F1(n,e){return n!==null&&e&&e(new Xg(n)),Z(!0)}function V1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>pu(()=>{let s=Na(e)??t,a=$o(o,s),u=S1(a)?a.canActivate(e,n):Bt(s,()=>a(e,n));return xr(u).pipe(Pn())}));return Z(i).pipe(Bo())}function L1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>E1(s)).filter(s=>s!==null).map(s=>pu(()=>{let a=s.guards.map(u=>{let l=Na(s.node)??t,h=$o(u,l),p=A1(h)?h.canActivateChild(r,n):Bt(l,()=>h(r,n));return xr(p).pipe(Pn())});return Z(a).pipe(Bo())}));return Z(o).pipe(Bo())}function U1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Na(e)??i,l=$o(a,u),h=R1(l)?l.canDeactivate(n,e,t,r):Bt(u,()=>l(n,e,t,r));return xr(h).pipe(Pn())});return Z(s).pipe(Bo())}function j1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=$o(s,n),u=T1(a)?a.canLoad(e,t):Bt(n,()=>a(e,t));return xr(u)});return Z(o).pipe(Bo(),xb(r))}function xb(n){return If(nt(e=>{if(typeof e!="boolean")throw Vl(n,e)}),he(e=>e===!0))}function B1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=$o(s,n),u=M1(a)?a.canMatch(e,t):Bt(n,()=>a(e,t));return xr(u)});return Z(o).pipe(Bo(),xb(r))}var Ta=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Sa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function xo(n){return Xi(new Ta(n))}function $1(n){return Xi(new $(4e3,!1))}function H1(n){return Xi(Rb(!1,Nt.GuardRejected))}var um=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[re])return $1(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:_,data:S,title:k}=i,M=Bt(o,()=>a({params:_,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:k}));if(M instanceof Wn)throw new Sa(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Sa(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Wn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q1(n,e,t,r,i){let o=Pb(n,e,t);return o.matched?(r=h1(e,r),B1(r,e,t,i).pipe(he(s=>s===!0?o:L({},lm)))):Z(o)}function Pb(n,e,t){if(e.path==="**")return z1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},lm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||jO)(t,n,e);if(!i)return L({},lm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function z1(n){return{matched:!0,parameters:n.length>0?hb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ab(n,e,t,r){return t.length>0&&K1(n,t,r)?{segmentGroup:new Ee(e,W1(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&Q1(n,t,r)?{segmentGroup:new Ee(n.segments,G1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function G1(n,e,t,r){let i={};for(let o of t)if(Bl(n,e,o)&&!r[rn(o)]){let s=new Ee([],{});i[rn(o)]=s}return L(L({},r),i)}function W1(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&rn(r)!==re){let i=new Ee([],{});t[rn(r)]=i}return t}function K1(n,e,t){return t.some(r=>Bl(n,e,r)&&rn(r)!==re)}function Q1(n,e,t){return t.some(r=>Bl(n,e,r))}function Bl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Y1(n,e,t){return e.length===0&&!n.children[t]}var dm=class{};function Z1(n,e,t,r,i,o,s="emptyOnly"){return new hm(n,e,t,r,i,s,o).recognize()}var J1=31,hm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new um(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=ab(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:t,rootSnapshot:r})=>{let i=new Mt(r,t),o=new Fl("",i),s=o1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Oo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(he(r=>({children:r,rootSnapshot:t})),fr(r=>{if(r instanceof Sa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ta?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(he(s=>s instanceof Mt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return xe(o).pipe(si(s=>{let a=r.children[s],u=f1(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Af((s,a)=>(s.push(...a),s)),pr(null),Sf(),je(s=>{if(s===null)return xo(r);let a=kb(s);return X1(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return xe(t).pipe(si(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(fr(l=>{if(l instanceof Ta)return Z(null);throw l}))),Pn(u=>!!u),fr(u=>{if(Nb(u))return Y1(r,i,o)?Z(new dm):xo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return rn(r)!==s&&(s===re||!Bl(i,o,r))?xo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):xo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=Pb(t,i,o);if(!u)return xo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>J1&&(this.allowRedirects=!1));let _=new Oo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,cb(i),rn(i),i.component??i._loadedComponent??null,i,ub(i)),S=Ol(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data);let k=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,k).pipe(je(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=q1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Vt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Vt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:_}=u,S=new Oo(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,cb(r),rn(r),r.component??r._loadedComponent??null,r,ub(r)),k=Ol(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let{segmentGroup:M,slicedSegments:U}=ab(t,m,_,l);if(U.length===0&&M.hasChildren())return this.processChildren(h,l,M,S).pipe(he(G=>new Mt(S,G)));if(l.length===0&&U.length===0)return Z(new Mt(S,[]));let q=rn(r)===o;return this.processSegment(h,l,M,U,q?re:o,!0,S).pipe(he(G=>new Mt(S,G instanceof Mt?[G]:[])))}))):xo(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):j1(e,t,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):H1(t))):Z({routes:[],injector:e})}};function X1(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function eF(n){let e=n.value.routeConfig;return e&&e.path===""}function kb(n){let e=[],t=new Set;for(let r of n){if(!eF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=kb(r.children);e.push(new Mt(r.value,i))}return e.filter(r=>!t.has(r))}function cb(n){return n.data||{}}function ub(n){return n.resolve||{}}function tF(n,e,t,r,i,o){return je(s=>Z1(n,e,t,r,s.extractedUrl,i,o).pipe(he(({state:a,tree:u})=>se(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function nF(n,e){return je(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Ob(u))s.add(l);let a=0;return xe(s).pipe(si(u=>o.has(u)?rF(u,r,n,e):(u.data=Ol(u,u.parent,n).resolve,Z(void 0))),nt(()=>a++),no(1),je(u=>a===s.size?Z(t):yt))})}function Ob(n){let e=n.children.map(t=>Ob(t)).flat();return[n,...e]}function rF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Sb(i)&&(o[Ra]=i.title),iF(o,n,e,r).pipe(he(s=>(n._resolvedData=s,n.data=Ol(n,n.parent,t).resolve,null)))}function iF(n,e,t,r){let i=Hg(n);if(i.length===0)return Z({});let o={};return xe(i).pipe(je(s=>oF(n[s],e,t,r).pipe(Pn(),nt(a=>{if(a instanceof Ca)throw Vl(new Lo,a);o[s]=a}))),no(1),he(()=>o),fr(s=>Nb(s)?yt:Xi(s)))}function oF(n,e,t,r){let i=Na(e)??r,o=$o(n,i),s=o.resolve?o.resolve(e,t):Bt(i,()=>o(e,t));return xr(s)}function Bg(n){return Vt(e=>{let t=n(e);return t?xe(t).pipe(he(()=>e)):Z(e)})}var Fb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Ra]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(sF),providedIn:"root"})}return n})(),sF=(()=>{class n extends Fb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(tb))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ka=new z("",{providedIn:"root",factory:()=>({})}),aF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Be({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Se(0,"router-outlet")},dependencies:[gm],encapsulation:2})}return n})();function mm(n){let e=n.children&&n.children.map(mm),t=e?se(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=aF),t}var Aa=new z(""),ym=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(ml);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=xr(t.loadComponent()).pipe(he(Vb),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ks(()=>{this.componentLoaders.delete(t)})),i=new Ji(r,()=>new ze).pipe(Zi());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=cF(r,this.compiler,t,this.onLoadEndListener).pipe(Ks(()=>{this.childrenLoaders.delete(r)})),s=new Ji(o,()=>new ze).pipe(Zi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cF(n,e,t,r){return xr(n.loadChildren()).pipe(he(Vb),je(i=>i instanceof ra||Array.isArray(i)?Z(i):xe(e.compileModuleAsync(i))),he(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Aa,[],{optional:!0,self:!0}).flat()),{routes:s.map(mm),injector:o}}))}function uF(n){return n&&typeof n=="object"&&"default"in n}function Vb(n){return uF(n)?n.default:n}var vm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(lF),providedIn:"root"})}return n})(),lF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lb=new z(""),Ub=new z("");function dF(n,e,t){let r=n.get(Ub),i=n.get(It);return n.get(Ve).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hF(n))),{onViewTransitionCreated:u}=r;return u&&Bt(n,()=>u({transition:a,from:e,to:t})),s})}function hF(n){return new Promise(e=>{rg({read:()=>setTimeout(e)},{injector:n})})}var jb=new z(""),_m=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortSubject=new ze;configLoader=F(ym);environmentInjector=F(Tt);destroyRef=F(ua);urlSerializer=F(Ma);rootContexts=F(xa);location=F(No);inputBindingEnabled=F(jl,{optional:!0})!==null;titleStrategy=F(Fb);options=F(ka,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(vm);createViewTransition=F(Lb,{optional:!0});navigationErrorHandler=F(jb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Zg(i)),r=i=>this.events.next(new Jg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(se(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new tt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:_a,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ft(o=>o.id!==0),he(o=>se(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vt(o=>{let s=!1,a=!1;return Z(o).pipe(Vt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Nt.SupersededByNewNavigation),yt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?se(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Ml.IgnoredSameUrlNavigation)),u.resolve(!1),yt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Z(u).pipe(Vt(p=>{let m=this.transitions?.getValue();return this.events.next(new Uo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?yt:Promise.resolve(p)}),tF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=se(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Nl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:S,extras:k}=u,M=new Uo(p,this.urlSerializer.serialize(m),_,S);this.events.next(M);let U=Cb(this.rootComponentType).snapshot;return this.currentTransition=o=se(L({},u),{targetSnapshot:U,urlAfterRedirects:m,extras:se(L({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let p="";return this.events.next(new Mr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Ml.IgnoredByUrlHandlingStrategy)),u.resolve(!1),yt}}),nt(u=>{let l=new Wg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),he(u=>(this.currentTransition=o=se(L({},u),{guards:w1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),x1(this.environmentInjector,u=>this.events.next(u)),nt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Vl(this.urlSerializer,u.guardsResult);let l=new Kg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ft(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Nt.GuardRejected),!1)),Bg(u=>{if(u.guards.canActivateChecks.length)return Z(u).pipe(nt(l=>{let h=new Qg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Vt(l=>{let h=!1;return Z(l).pipe(nF(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Nt.NoDataFromResolver)}}))}),nt(l=>{let h=new Yg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Bg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),he(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ws(l(u.targetSnapshot.root)).pipe(pr(null),xn(1))}),Bg(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?xe(h).pipe(he(()=>o)):Z(o)}),he(u=>{let l=m1(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=se(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Da)}),I1(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),xn(1),nt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Mf(this.transitionAbortSubject.pipe(nt(u=>{throw u}))),Ks(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),fr(u=>{if(this.destroyed)return o.resolve(!1),yt;if(a=!0,Mb(u))this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),_1(u)?this.events.next(new jo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ea(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Bt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ca){let{message:p,cancellationCode:m}=Vl(this.urlSerializer,h);this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new jo(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return yt}))}))}cancelNavigationTransition(t,r,i){let o=new Gn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fF(n){return n!==_a}var pF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(gF),providedIn:"root"})}return n})(),fm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gF=(()=>{class n extends fm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=mi(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(mF),providedIn:"root"})}return n})(),mF=(()=>{class n extends Bb{location=F(No);urlSerializer=F(Ma);options=F(ka,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=F(vm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=Cb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Uo)this.stateMemento=this.createStateMemento();else if(t instanceof Mr)this.rawUrlTree=r.initialUrl;else if(t instanceof Nl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Da?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Gn&&(t.code===Nt.GuardRejected||t.code===Nt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ea?this.restoreHistory(r,!0):t instanceof mn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Wn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mi(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $b(n,e){n.events.pipe(Ft(t=>t instanceof mn||t instanceof Gn||t instanceof Ea||t instanceof Mr),he(t=>t instanceof mn||t instanceof Mr?0:(t instanceof Gn?t.code===Nt.Redirect||t.code===Nt.SupersededByNewNavigation:!1)?2:1),Ft(t=>t!==2),xn(1)).subscribe(()=>{e()})}var yF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(vg);stateManager=F(Bb);options=F(ka,{optional:!0})||{};pendingTasks=F(bo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(_m);urlSerializer=F(Ma);location=F(No);urlHandlingStrategy=F(vm);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(pF);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(Aa,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(jl,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Le;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Gn&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mn)this.navigated=!0;else if(r instanceof jo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fF(i.source)},s);this.scheduleNavigation(a,_a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=wb(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return Eb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=bi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_a,null,r)}navigate(t,r={skipLocationChange:!1}){return _F(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},yF):r===!1?i=L({},vF):i=r,bi(t))return nb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return nb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return $b(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _F(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}function IF(n){return!(n instanceof Da)&&!(n instanceof jo)}var Pr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof mn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(bi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:UD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:bi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ce(qt),ce(Nr),Yp("tabindex"),ce(vi),ce(Tr),ce(zn))};static \u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&mt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&da("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ii],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ii],replaceUrl:[2,"replaceUrl","replaceUrl",Ii],routerLink:"routerLink"},features:[yg,Cr]})}return n})();var Ul=class{};var wF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ft(t=>t instanceof mn),si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=hl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return xe(i).pipe(eo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(je(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return xe([o,s]).pipe(eo())}else return o})}static \u0275fac=function(r){return new(r||n)(te(qt),te(ml),te(Tt),te(Ul),te(ym))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hb=new z(""),EF=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Mr&&t.code===Ml.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){WD()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function qb(n,...e){return el([{provide:Aa,multi:!0,useValue:n},[],{provide:Nr,useFactory:zb,deps:[qt]},{provide:pl,multi:!0,useFactory:Gb},e.map(t=>t.\u0275providers)])}function zb(n){return n.routerState.root}function Oa(n,e){return{\u0275kind:n,\u0275providers:e}}function Gb(){let n=F(At);return e=>{let t=n.get(Er);if(e!==t.components[0])return;let r=n.get(qt),i=n.get(Wb);n.get(Im)===1&&r.initialNavigation(),n.get(Kb,null,ie.Optional)?.setUpPreloading(),n.get(Hb,null,ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Wb=new z("",{factory:()=>new ze}),Im=new z("",{providedIn:"root",factory:()=>1});function DF(){return Oa(2,[{provide:Im,useValue:0},{provide:fl,multi:!0,deps:[At],useFactory:e=>{let t=e.get(U0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(qt),o=e.get(Wb);$b(i,()=>{r(!0)}),e.get(_m).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function bF(){return Oa(3,[{provide:fl,multi:!0,useFactory:()=>{let e=F(qt);return()=>{e.setUpLocationChangeListener()}}},{provide:Im,useValue:2}])}var Kb=new z("");function CF(n){return Oa(0,[{provide:Kb,useExisting:wF},{provide:Ul,useExisting:n}])}function wm(){return Oa(8,[sb,{provide:jl,useExisting:sb}])}function TF(n){let e=[{provide:Lb,useValue:dF},{provide:Ub,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Oa(9,e)}var SF=[No,{provide:Ma,useClass:Lo},qt,xa,{provide:Nr,useFactory:zb,deps:[qt]},ym,[]],yn=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[SF,[],{provide:Aa,multi:!0,useValue:t},[],r?.errorHandler?{provide:jb,useValue:r.errorHandler}:[],{provide:ka,useValue:r||{}},r?.useHash?RF():MF(),AF(),r?.preloadingStrategy?CF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?NF(r):[],r?.bindToComponentInputs?wm().\u0275providers:[],r?.enableViewTransitions?TF().\u0275providers:[],xF()]}}static forChild(t){return{ngModule:n,providers:[{provide:Aa,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({})}return n})();function AF(){return{provide:Hb,useFactory:()=>{let n=F(q0),e=F(Ve),t=F(ka),r=F(_m),i=F(Ma);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EF(i,r,n,e,t)}}}function RF(){return{provide:zn,useClass:B0}}function MF(){return{provide:zn,useClass:Rg}}function NF(n){return[n.initialNavigation==="disabled"?bF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?DF().\u0275providers:[]]}var lb=new z("");function xF(){return[{provide:lb,useFactory:Gb},{provide:pl,multi:!0,useExisting:lb}]}var rC=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ce(vi),ce(Tr))};static \u0275dir=Qe({type:n})}return n})(),iC=(()=>{class n extends rC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=mi(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[pn]})}return n})(),Sm=new z("");var PF={provide:Sm,useExisting:Dr(()=>Wo),multi:!0};function kF(){let n=qn()?qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OF=new z(""),Wo=(()=>{class n extends rC{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ce(vi),ce(Tr),ce(OF,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&mt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ro([PF]),pn]})}return n})();function kr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function oC(n){return n!=null&&typeof n.length=="number"}var Am=new z(""),sC=new z(""),FF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ge=class{static min(e){return VF(e)}static max(e){return LF(e)}static required(e){return aC(e)}static requiredTrue(e){return UF(e)}static email(e){return jF(e)}static minLength(e){return BF(e)}static maxLength(e){return $F(e)}static pattern(e){return HF(e)}static nullValidator(e){return zl(e)}static compose(e){return fC(e)}static composeAsync(e){return gC(e)}};function VF(n){return e=>{if(kr(e.value)||kr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function LF(n){return e=>{if(kr(e.value)||kr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function aC(n){return kr(n.value)?{required:!0}:null}function UF(n){return n.value===!0?null:{required:!0}}function jF(n){return kr(n.value)||FF.test(n.value)?null:{email:!0}}function BF(n){return e=>kr(e.value)||!oC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function $F(n){return e=>oC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function HF(n){if(!n)return zl;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(kr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function zl(n){return null}function cC(n){return n!=null}function uC(n){return _i(n)?xe(n):n}function lC(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function dC(n,e){return e.map(t=>t(n))}function qF(n){return!n.validate}function hC(n){return n.map(e=>qF(e)?e:t=>e.validate(t))}function fC(n){if(!n)return null;let e=n.filter(cC);return e.length==0?null:function(t){return lC(dC(t,e))}}function pC(n){return n!=null?fC(hC(n)):null}function gC(n){if(!n)return null;let e=n.filter(cC);return e.length==0?null:function(t){let r=dC(t,e).map(uC);return Tf(r).pipe(he(lC))}}function mC(n){return n!=null?gC(hC(n)):null}function Qb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yC(n){return n._rawValidators}function vC(n){return n._rawAsyncValidators}function Em(n){return n?Array.isArray(n)?n:[n]:[]}function Gl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Yb(n,e){let t=Em(e);return Em(n).forEach(i=>{Gl(t,i)||t.push(i)}),t}function Zb(n,e){return Em(e).filter(t=>!Gl(n,t))}var Wl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},zo=class extends Wl{name;get formDirective(){return null}get path(){return null}},ja=class extends Wl{_parent=null;name=null;valueAccessor=null},Kl=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},g9=se(L({},zF),{"[class.ng-submitted]":"isSubmitted"}),Xl=(()=>{class n extends Kl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(ja,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[pn]})}return n})(),ed=(()=>{class n extends Kl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(zo,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&gl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[pn]})}return n})();var Fa="VALID",Hl="INVALID",Ho="PENDING",Va="DISABLED",Or=class{},Ql=class extends Or{value;source;constructor(e,t){super(),this.value=e,this.source=t}},La=class extends Or{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ua=class extends Or{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},qo=class extends Or{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Dm=class extends Or{source;constructor(e){super(),this.source=e}},bm=class extends Or{source;constructor(e){super(),this.source=e}};function Rm(n){return(td(n)?n.validators:n)||null}function GF(n){return Array.isArray(n)?pC(n):n||null}function Mm(n,e){return(td(e)?e.asyncValidators:n)||null}function WF(n){return Array.isArray(n)?mC(n):n||null}function td(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function _C(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function IC(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var Go=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return $n(this.statusReactive)}set status(e){$n(()=>this.statusReactive.set(e))}_status=ha(()=>this.statusReactive());statusReactive=Sr(void 0);get valid(){return this.status===Fa}get invalid(){return this.status===Hl}get pending(){return this.status==Ho}get disabled(){return this.status===Va}get enabled(){return this.status!==Va}errors;get pristine(){return $n(this.pristineReactive)}set pristine(e){$n(()=>this.pristineReactive.set(e))}_pristine=ha(()=>this.pristineReactive());pristineReactive=Sr(!0);get dirty(){return!this.pristine}get touched(){return $n(this.touchedReactive)}set touched(e){$n(()=>this.touchedReactive.set(e))}_touched=ha(()=>this.touchedReactive());touchedReactive=Sr(!1);get untouched(){return!this.touched}_events=new ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zb(e,this._rawAsyncValidators))}hasValidator(e){return Gl(this._rawValidators,e)}hasAsyncValidator(e){return Gl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(se(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ua(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ua(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(se(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new La(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new La(!0,r))}markAsPending(e={}){this.status=Ho;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(se(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Va,this.errors=null,this._forEachChild(i=>{i.disable(se(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ql(this.value,r)),this._events.next(new qo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fa,this._forEachChild(r=>{r.enable(se(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fa||this.status===Ho)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ql(this.value,t)),this._events.next(new qo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(se(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Va:Fa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ho,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=uC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?Va:this.errors?Hl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ho)?Ho:this._anyControlsHaveStatus(Hl)?Hl:Fa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new La(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ua(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){td(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=WF(this._rawAsyncValidators)}},Yl=class extends Go{constructor(e,t,r){super(Rm(t),Mm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){IC(this,!0,e),Object.keys(e).forEach(r=>{_C(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Cm=class extends Yl{};var wC=new z("",{providedIn:"root",factory:()=>Nm}),Nm="always";function KF(n,e){return[...e.path,n]}function Jb(n,e,t=Nm){xm(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YF(n,e),JF(n,e),ZF(n,e),QF(n,e)}function Xb(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Jl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Zl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QF(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function xm(n,e){let t=yC(n);e.validator!==null?n.setValidators(Qb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=vC(n);e.asyncValidator!==null?n.setAsyncValidators(Qb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Zl(e._rawValidators,i),Zl(e._rawAsyncValidators,i)}function Jl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=yC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=vC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Zl(e._rawValidators,r),Zl(e._rawAsyncValidators,r),t}function YF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&EC(n,e)})}function ZF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&EC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function EC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JF(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XF(n,e){n==null,xm(n,e)}function eV(n,e){return Jl(n,e)}function tV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function nV(n){return Object.getPrototypeOf(n.constructor)===iC}function rV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wo?t=o:nV(o)?r=o:i=o}),i||r||t||null}function oV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function eC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ql=class extends Go{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Rm(t),Mm(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),td(t)&&(t.nonNullable||t.initialValueIsDefault)&&(tC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sV=n=>n instanceof ql;var nd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),aV={provide:Sm,useExisting:Dr(()=>Pm),multi:!0},Pm=(()=>{class n extends iC{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mi(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&mt("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ro([aV]),pn]})}return n})();var DC=new z("");var cV={provide:zo,useExisting:Dr(()=>Ba)},Ba=(()=>{class n extends zo{callSetDisabledState;get submitted(){return $n(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ha(()=>this._submittedReactive());_submittedReactive=Sr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ke;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Jb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Xb(t.control||null,t,!1),oV(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),rV(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Dm(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new bm(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Xb(r||null,t),sV(i)&&(Jb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);XF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&eV(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){xm(this.form,this),this._oldForm&&Jl(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(ce(Am,10),ce(sC,10),ce(wC,8))};static \u0275dir=Qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&mt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ro([cV]),pn,Cr]})}return n})();var uV={provide:ja,useExisting:Dr(()=>$a)},$a=(()=>{class n extends ja{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ke;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iV(this,o)}ngOnChanges(t){this._added||this._setUpControl(),tV(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return KF(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(ce(zo,13),ce(Am,10),ce(sC,10),ce(Sm,10),ce(DC,8))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ro([uV]),pn,Cr]})}return n})();var lV=(()=>{class n{_validator=zl;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):zl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,features:[Cr]})}return n})();var dV={provide:Am,useExisting:Dr(()=>km),multi:!0};var km=(()=>{class n extends lV{required;inputName="required";normalizeInput=Ii;createValidator=t=>aC;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=mi(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&da("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ro([dV]),pn]})}return n})();var hV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({})}return n})(),Tm=class extends Go{constructor(e,t,r){super(Rm(t),Mm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){IC(this,!1,e),e.forEach((r,i)=>{_C(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function nC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var rd=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return nC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Yl(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Cm(i,r)}control(t,r,i){let o={};return this.useNonNullable?(nC(r)?o=r:(o.validators=r,o.asyncValidators=i),new ql(t,se(L({},o),{nonNullable:!0}))):new ql(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Tm(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ql)return t;if(t instanceof Go)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var id=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:wC,useValue:t.callSetDisabledState??Nm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ar({type:n});static \u0275inj=br({imports:[hV]})}return n})();var TC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},SC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,_=l&63;u||(_=64,s||(m=64)),r.push(t[h],t[p],t[m],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(TC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Fm;let m=o<<2|a>>4;if(r.push(m),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Fm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pV=function(n){let e=TC(n);return SC.encodeByteArray(e,!0)},Ha=function(n){return pV(n).replace(/\./g,"")},Lm=function(n){try{return SC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mV=()=>gV().__FIREBASE_DEFAULTS__,yV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Lm(n[1]);return e&&JSON.parse(e)},sd=()=>{try{return mV()||yV()||vV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Um=n=>{var e,t;return(t=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AC=n=>{let e=Um(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jm=()=>{var n;return(n=sd())===null||n===void 0?void 0:n.config},Bm=n=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${n}`]};var od=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function RC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ha(JSON.stringify(t)),Ha(JSON.stringify(s)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function _V(){var n;let e=(n=sd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kC(){let n=Ze();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OC(){return!_V()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $m(){try{return typeof indexedDB=="object"}catch{return!1}}function FC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var IV="FirebaseError",xt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kn.prototype.create)}},Kn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?wV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new xt(i,a,r)}};function wV(n,e){return n.replace(EV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var EV=/\{\$([^}]+)}/g;function VC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ci(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(CC(o)&&CC(s)){if(!Ci(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function CC(n){return n!==null&&typeof n=="object"}function qa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ko(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Qo(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function LC(n,e){let t=new Vm(n,e);return t.subscribe.bind(t)}var Vm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Om),i.error===void 0&&(i.error=Om),i.complete===void 0&&(i.complete=Om);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function DV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Om(){}var v9=4*60*60*1e3;function wt(n){return n&&n._delegate?n._delegate:n}var zt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ti="[DEFAULT]";var Hm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new od;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CV(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bV(n){return n===Ti?void 0:n}function CV(n){return n.instantiationMode==="EAGER"}var ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Hm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var TV=[],ue=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ue||{}),SV={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},AV=ue.INFO,RV={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},MV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=RV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Fr=class{constructor(e){this.name=e,this._logLevel=AV,this._logHandler=MV,this._userLogHandler=null,TV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var NV=(n,e)=>e.some(t=>n instanceof t),UC,jC;function xV(){return UC||(UC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PV(){return jC||(jC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var BC=new WeakMap,zm=new WeakMap,$C=new WeakMap,qm=new WeakMap,Wm=new WeakMap;function kV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(vn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&BC.set(t,n)}).catch(()=>{}),Wm.set(e,n),e}function OV(n){if(zm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});zm.set(n,e)}var Gm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$C.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HC(n){Gm=n(Gm)}function FV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(cd(this),e,...t);return $C.set(r,e.sort?e.sort():[e]),vn(r)}:PV().includes(n)?function(...e){return n.apply(cd(this),e),vn(BC.get(this))}:function(...e){return vn(n.apply(cd(this),e))}}function VV(n){return typeof n=="function"?FV(n):(n instanceof IDBTransaction&&OV(n),NV(n,xV())?new Proxy(n,Gm):n)}function vn(n){if(n instanceof IDBRequest)return kV(n);if(qm.has(n))return qm.get(n);let e=VV(n);return e!==n&&(qm.set(n,e),Wm.set(e,n)),e}var cd=n=>Wm.get(n);function zC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=vn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(vn(s.result),u.oldVersion,u.newVersion,vn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var LV=["get","getKey","getAll","getAllKeys","count"],UV=["put","add","delete","clear"],Km=new Map;function qC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=UV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LV.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Km.set(e,o),o}HC(n=>se(L({},n),{get:(e,t,r)=>qC(e,t)||n.get(e,t,r),has:(e,t)=>!!qC(e,t)||n.has(e,t)}));var Ym=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function jV(n){let e=n.getComponent();return e?.type==="VERSION"}var Zm="@firebase/app",GC="0.10.18";var Qn=new Fr("@firebase/app"),BV="@firebase/app-compat",$V="@firebase/analytics-compat",HV="@firebase/analytics",qV="@firebase/app-check-compat",zV="@firebase/app-check",GV="@firebase/auth",WV="@firebase/auth-compat",KV="@firebase/database",QV="@firebase/data-connect",YV="@firebase/database-compat",ZV="@firebase/functions",JV="@firebase/functions-compat",XV="@firebase/installations",eL="@firebase/installations-compat",tL="@firebase/messaging",nL="@firebase/messaging-compat",rL="@firebase/performance",iL="@firebase/performance-compat",oL="@firebase/remote-config",sL="@firebase/remote-config-compat",aL="@firebase/storage",cL="@firebase/storage-compat",uL="@firebase/firestore",lL="@firebase/vertexai",dL="@firebase/firestore-compat",hL="firebase",fL="11.2.0";var Jm="[DEFAULT]",pL={[Zm]:"fire-core",[BV]:"fire-core-compat",[HV]:"fire-analytics",[$V]:"fire-analytics-compat",[zV]:"fire-app-check",[qV]:"fire-app-check-compat",[GV]:"fire-auth",[WV]:"fire-auth-compat",[KV]:"fire-rtdb",[QV]:"fire-data-connect",[YV]:"fire-rtdb-compat",[ZV]:"fire-fn",[JV]:"fire-fn-compat",[XV]:"fire-iid",[eL]:"fire-iid-compat",[tL]:"fire-fcm",[nL]:"fire-fcm-compat",[rL]:"fire-perf",[iL]:"fire-perf-compat",[oL]:"fire-rc",[sL]:"fire-rc-compat",[aL]:"fire-gcs",[cL]:"fire-gcs-compat",[uL]:"fire-fst",[dL]:"fire-fst-compat",[lL]:"fire-vertex","fire-js":"fire-js",[hL]:"fire-js-all"};var ud=new Map,gL=new Map,Xm=new Map;function WC(n,e){try{n.container.addComponent(e)}catch(t){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lr(n){let e=n.name;if(Xm.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,n);for(let t of ud.values())WC(t,n);for(let t of gL.values())WC(t,n);return!0}function Ga(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _n(n){return n.settings!==void 0}var mL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Kn("app","Firebase",mL);var ey=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}};var Ur=fL;function Yn(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(t||(t=jm()),!t)throw Vr.create("no-options");let o=ud.get(i);if(o){if(Ci(t,o.options)&&Ci(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}let s=new ad(i);for(let u of Xm.values())s.addComponent(u);let a=new ey(t,r,s);return ud.set(i,a),a}function ld(n=Jm){let e=ud.get(n);if(!e&&n===Jm&&jm())return Yn();if(!e)throw Vr.create("no-app",{appName:n});return e}function on(n,e,t){var r;let i=(r=pL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}Lr(new zt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var yL="firebase-heartbeat-database",vL=1,za="firebase-heartbeat-store",Qm=null;function ZC(){return Qm||(Qm=zC(yL,vL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(za)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),Qm}function _L(n){return v(this,null,function*(){try{let t=(yield ZC()).transaction(za),r=yield t.objectStore(za).get(JC(n));return yield t.done,r}catch(e){if(e instanceof xt)Qn.warn(e.message);else{let t=Vr.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(t.message)}}})}function KC(n,e){return v(this,null,function*(){try{let r=(yield ZC()).transaction(za,"readwrite");yield r.objectStore(za).put(e,JC(n)),yield r.done}catch(t){if(t instanceof xt)Qn.warn(t.message);else{let r=Vr.create("idb-set",{originalErrorMessage:t?.message});Qn.warn(r.message)}}})}function JC(n){return`${n.name}!${n.options.appId}`}var IL=1024,wL=30*24*60*60*1e3,ty=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ny(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=QC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=wL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Qn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=QC(),{heartbeatsToSend:r,unsentEntries:i}=EL(this._heartbeatsCache.heartbeats),o=Ha(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Qn.warn(t),""}})}};function QC(){return new Date().toISOString().substring(0,10)}function EL(n,e=IL){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),YC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),YC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ny=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return $m()?FC().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _L(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return KC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return KC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function YC(n){return Ha(JSON.stringify({version:2,heartbeats:n})).length}function DL(n){Lr(new zt("platform-logger",e=>new Ym(e),"PRIVATE")),Lr(new zt("heartbeat",e=>new ty(e),"PRIVATE")),on(Zm,GC,n),on(Zm,GC,"esm2017"),on("fire-js","")}DL("");function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mT=gT,yT=new Kn("auth","Firebase",gT());var md=new Fr("@firebase/auth");function bL(n,...e){md.logLevel<=ue.WARN&&md.warn(`Auth (${Ur}): ${n}`,...e)}function hd(n,...e){md.logLevel<=ue.ERROR&&md.error(`Auth (${Ur}): ${n}`,...e)}function wn(n,...e){throw Ty(n,...e)}function Si(n,...e){return Ty(n,...e)}function vT(n,e,t){let r=Object.assign(Object.assign({},mT()),{[e]:t});return new Kn("auth","Firebase",r).create(e,{appName:n.name})}function Br(n){return vT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yT.create(n,...e)}function Y(n,e,...t){if(!n)throw Ty(e,...t)}function Zn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw hd(e),new Error(e)}function $r(n,e){n||Zn(e)}function sy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CL(){return XC()==="http:"||XC()==="https:"}function XC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function TL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CL()||xC()||"connection"in navigator)?navigator.onLine:!0}function SL(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ai=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,$r(t>e,"Short delay should be less than long delay!"),this.isMobile=MC()||PC()}get(){return TL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Sy(n,e){$r(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RL=new Ai(3e4,6e4);function Mi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Hr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return _T(n,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=qa(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:m},l);return NC()||(_.referrerPolicy="no-referrer"),yd.fetch()(IT(n,n.config.apiHost,t,p),_)}))})}function _T(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AL),e);try{let i=new ay(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw dd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw dd(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw dd(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw dd(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw vT(n,h,l);wn(n,h)}}catch(i){if(i instanceof xt)throw i;wn(n,"network-request-failed",{message:String(i)})}})}function Sd(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Hr(n,e,t,r,i);return"mfaPendingCredential"in l&&wn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function IT(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Sy(n.config,i):`${n.config.apiScheme}://${i}`}function ML(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ay=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),RL.get())})}};function dd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Si(n,e,r);return i.customData._tokenResponse=t,i}function eT(n){return n!==void 0&&n.enterprise!==void 0}var cy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ML(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function NL(n,e){return v(this,null,function*(){return Hr(n,"GET","/v2/recaptchaConfig",Mi(n,e))})}function xL(n,e){return v(this,null,function*(){return Hr(n,"POST","/v1/accounts:delete",e)})}function wT(n,e){return v(this,null,function*(){return Hr(n,"POST","/v1/accounts:lookup",e)})}function Ka(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ET(n,e=!1){return v(this,null,function*(){let t=wt(n),r=yield t.getIdToken(e),i=Ay(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ka(ry(i.auth_time)),issuedAtTime:Ka(ry(i.iat)),expirationTime:Ka(ry(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ry(n){return Number(n)*1e3}function Ay(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lm(t);return i?JSON.parse(i):(hd("Failed to decode base64 JWT payload"),null)}catch(i){return hd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tT(n){let e=Ay(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ya(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof xt&&PL(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function PL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var uy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Za=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vd(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ya(n,wT(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bT(o.providerUserInfo):[],a=kL(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Za(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function DT(n){return v(this,null,function*(){let e=wt(n);yield vd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function kL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bT(n){return n.map(e=>{var{providerId:t}=e,r=bf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function OL(n,e){return v(this,null,function*(){let t=yield _T(n,{},()=>v(this,null,function*(){let r=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=IT(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function FL(n,e){return v(this,null,function*(){return Hr(n,"POST","/v2/accounts:revokeToken",Mi(n,e))})}var Qa=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=tT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield OL(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Zn("not implemented")}};function jr(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Yo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Za(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ya(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ET(this,e)}reload(){return DT(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield vd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(_n(this.auth.app))return Promise.reject(Br(this.auth));let e=yield this.getIdToken();return yield Ya(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,U=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:ae,isAnonymous:_e,providerData:pe,stsTokenManager:D}=t;Y(G&&D,e,"internal-error");let y=Qa.fromJSON(this.name,D);Y(typeof G=="string",e,"internal-error"),jr(p,e.name),jr(m,e.name),Y(typeof ae=="boolean",e,"internal-error"),Y(typeof _e=="boolean",e,"internal-error"),jr(_,e.name),jr(S,e.name),jr(k,e.name),jr(M,e.name),jr(U,e.name),jr(q,e.name);let w=new n({uid:G,auth:e,email:m,emailVerified:ae,displayName:p,isAnonymous:_e,photoURL:S,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:U,lastLoginAt:q});return pe&&Array.isArray(pe)&&(w.providerData=pe.map(E=>Object.assign({},E))),M&&(w._redirectEventId=M),w}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Qa;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Qa;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Za(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var nT=new Map;function Jn(n){$r(n instanceof Function,"Expected a class definition");let e=nT.get(n);return e?($r(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nT.set(n,e),e)}var VL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ly=VL;function fd(n,e,t){return`firebase:${n}:${e}:${t}`}var _d=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=fd(this.userKey,i.apiKey,o),this.fullPersistenceKey=fd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Yo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Jn(ly),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Jn(ly),s=fd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=Yo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function rT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MT(e))return"Blackberry";if(NT(e))return"Webos";if(TT(e))return"Safari";if((e.includes("chrome/")||ST(e))&&!e.includes("edge/"))return"Chrome";if(RT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function CT(n=Ze()){return/firefox\//i.test(n)}function TT(n=Ze()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ST(n=Ze()){return/crios\//i.test(n)}function AT(n=Ze()){return/iemobile/i.test(n)}function RT(n=Ze()){return/android/i.test(n)}function MT(n=Ze()){return/blackberry/i.test(n)}function NT(n=Ze()){return/webos/i.test(n)}function Ry(n=Ze()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LL(n=Ze()){var e;return Ry(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UL(){return kC()&&document.documentMode===10}function xT(n=Ze()){return Ry(n)||RT(n)||NT(n)||MT(n)||/windows phone/i.test(n)||AT(n)}function PT(n,e=[]){let t;switch(n){case"Browser":t=rT(Ze());break;case"Worker":t=`${rT(Ze())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ur}/${r}`}var dy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jL(t){return v(this,arguments,function*(n,e={}){return Hr(n,"GET","/v2/passwordPolicy",Mi(n,e))})}var BL=6,hy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:BL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var fy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Id(this),this.idTokenSubscription=new Id(this),this.beforeStateQueue=new dy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield _d.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield wT(this,{idToken:e}),r=yield Yo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(_n(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield vd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SL()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(_n(this.app))return Promise.reject(Br(this));let t=e?wt(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return _n(this.app)?Promise.reject(Br(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _n(this.app)?Promise.reject(Br(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield jL(this),t=new hy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield FL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jn(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield _d.create(this,[Jn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&bL(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zo(n){return wt(n)}var Id=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ad={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $L(n){Ad=n}function kT(n){return Ad.loadJS(n)}function HL(){return Ad.recaptchaEnterpriseScript}function qL(){return Ad.gapiScript}function OT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var py=class{constructor(){this.enterprise=new gy}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},gy=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var zL="recaptcha-enterprise",FT="NO_RECAPTCHA",my=class{constructor(e){this.type=zL,this.auth=Zo(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){NL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new cy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;eT(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(FT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new py().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&eT(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HL();u.length!==0&&(u+=a),kT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Wa(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new my(n),s;if(i)s=FT;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function iT(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Wa(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Wa(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Wa(n,e,t);return r(n,a).catch(u=>v(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Wa(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield Wa(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function VT(n,e){let t=Ga(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ci(o,e??{}))return i;wn(i,"already-initialized")}return t.initialize({options:e})}function GL(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function LT(n,e,t){let r=Zo(n);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=UT(e),{host:s,port:a}=WL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||KL()}function UT(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WL(n){let e=UT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:oT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:oT(s)}}}function oT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function KL(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ja=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,t){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}};function QL(n,e){return v(this,null,function*(){return Hr(n,"POST","/v1/accounts:signUp",e)})}function YL(n,e){return v(this,null,function*(){return Sd(n,"POST","/v1/accounts:signInWithPassword",Mi(n,e))})}function ZL(n,e){return v(this,null,function*(){return Sd(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))})}function JL(n,e){return v(this,null,function*(){return Sd(n,"POST","/v1/accounts:signInWithEmailLink",Mi(n,e))})}var Xa=class n extends Ja{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iT(e,t,"signInWithPassword",YL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZL(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return iT(e,r,"signUpPassword",QL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JL(e,{idToken:t,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function iy(n,e){return v(this,null,function*(){return Sd(n,"POST","/v1/accounts:signInWithIdp",Mi(n,e))})}function XL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e2(n){let e=Ko(Qo(n)).link,t=e?Ko(Qo(e)).deep_link_id:null,r=Ko(Qo(n)).deep_link_id;return(r?Ko(Qo(r)).link:null)||r||t||e||n}var wd=class n{constructor(e){var t,r,i,o,s,a;let u=Ko(Qo(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=XL((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=e2(e);try{return new n(t)}catch{return null}}};var jT=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Xa._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=wd.parseLink(r);return Y(i,"argument-error"),Xa._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ed=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var yy=class extends Ed{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ec=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Yo._fromIdTokenResponse(e,r,i),s=sT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=sT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function sT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var vy=class n extends xt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function BT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vy._fromErrorAndOperation(n,o,e,r):o})}function t2(n,e,t=!1){return v(this,null,function*(){let r=yield Ya(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ec._forOperation(n,"link",r)})}function n2(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(_n(r.app))return Promise.reject(Br(r));let i="reauthenticate";try{let o=yield Ya(n,BT(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=Ay(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),ec._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&wn(r,"user-mismatch"),o}})}function $T(n,e,t=!1){return v(this,null,function*(){if(_n(n.app))return Promise.reject(Br(n));let r="signIn",i=yield BT(n,r,e),o=yield ec._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function HT(n,e){return v(this,null,function*(){return $T(Zo(n),e)})}function r2(n){return v(this,null,function*(){let e=Zo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function My(n,e,t){return _n(n.app)?Promise.reject(Br(n)):HT(wt(n),jT.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&r2(n),r}))}function qT(n,e,t,r){return wt(n).onIdTokenChanged(e,t,r)}function zT(n,e,t){return wt(n).beforeAuthStateChanged(e,t)}var Dd="__sak";var bd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var i2=1e3,o2=10,s2=(()=>{class n extends bd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);UL()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,o2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield dr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield dr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield dr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),GT=s2;var a2=(()=>{class n extends bd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ny=a2;function c2(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var u2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield c2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function WT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var _y=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=WT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function In(){return window}function l2(n){In().location.href=n}function KT(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}function d2(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function h2(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function f2(){return KT()?self:null}var QT="firebaseLocalStorageDb",p2=1,Cd="firebaseLocalStorage",YT="fbase_key",Ri=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Rd(n,e){return n.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function g2(){let n=indexedDB.deleteDatabase(QT);return new Ri(n).toPromise()}function Iy(){let n=indexedDB.open(QT,p2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Cd,{keyPath:YT})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),yield g2(),e(yield Iy()))}))})}function aT(n,e,t){return v(this,null,function*(){let r=Rd(n,!0).put({[YT]:e,value:t});return new Ri(r).toPromise()})}function m2(n,e){return v(this,null,function*(){let t=Rd(n,!1).get(e),r=yield new Ri(t).toPromise();return r===void 0?null:r.value})}function cT(n,e){let t=Rd(n,!0).delete(e);return new Ri(t).toPromise()}var y2=800,v2=3,_2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Iy(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>v2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return KT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=u2._getInstance(f2()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield d2(),!this.activeServiceWorker)return;this.sender=new _y(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Iy();return yield aT(t,Dd,"1"),yield cT(t,Dd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>aT(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>m2(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>cT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Rd(o,!1).getAll();return new Ri(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ZT=_2;var z9=OT("rcb"),G9=new Ai(3e4,6e4);function I2(n,e){return e?Jn(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var tc=class extends Ja{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iy(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iy(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iy(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function w2(n){return $T(n.auth,new tc(n),n.bypassAuthState)}function E2(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),n2(t,new tc(n),n.bypassAuthState)}function D2(n){return v(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),t2(t,new tc(n),n.bypassAuthState)})}var wy=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return D2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:wn(this.auth,"internal-error")}}resolve(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$r(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var W9=new Ai(2e3,1e4);var b2="pendingRedirect",pd=new Map,Ey=class n extends wy{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=pd.get(this.auth._key());if(!e){try{let r=(yield C2(this.resolver,this.auth))?yield dr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return dr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,dr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function C2(n,e){return v(this,null,function*(){let t=A2(e),r=S2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function T2(n,e){pd.set(n._key(),e)}function S2(n){return Jn(n._redirectPersistence)}function A2(n){return fd(b2,n.config.apiKey,n.name)}function R2(n,e,t=!1){return v(this,null,function*(){if(_n(n.app))return Promise.reject(Br(n));let r=Zo(n),i=I2(r,e),s=yield new Ey(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var M2=10*60*1e3,Dy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Si(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M2&&this.cachedEventUids.clear(),this.cachedEventUids.has(uT(e))}saveEventToCache(e){this.cachedEventUids.add(uT(e)),this.lastProcessedEventTime=Date.now()}};function uT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function N2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JT(n);default:return!1}}function x2(t){return v(this,arguments,function*(n,e={}){return Hr(n,"GET","/v1/projects",e)})}var P2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k2=/^https?/;function O2(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield x2(n);for(let t of e)try{if(F2(t))return}catch{}wn(n,"unauthorized-domain")})}function F2(n){let e=sy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!k2.test(t))return!1;if(P2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var V2=new Ai(3e4,6e4);function lT(){let n=In().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function L2(n){return new Promise((e,t)=>{var r,i,o;function s(){lT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lT(),t(Si(n,"network-request-failed"))},timeout:V2.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)s();else{let a=OT("iframefcb");return In()[a]=()=>{gapi.load?s():t(Si(n,"network-request-failed"))},kT(`${qL()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw gd=null,e})}var gd=null;function U2(n){return gd=gd||L2(n),gd}var j2=new Ai(5e3,15e3),B2="__/auth/iframe",$2="emulator/auth/iframe",H2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z2(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Sy(e,$2):`https://${n.config.authDomain}/${B2}`,r={apiKey:e.apiKey,appName:n.name,v:Ur},i=q2.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${qa(r).slice(1)}`}function G2(n){return v(this,null,function*(){let e=yield U2(n),t=In().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:z2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H2,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Si(n,"network-request-failed"),a=In().setTimeout(()=>{o(s)},j2.get());function u(){In().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var W2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K2=500,Q2=600,Y2="_blank",Z2="http://localhost",Td=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function J2(n,e,t,r=K2,i=Q2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},W2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();t&&(a=ST(l)?Y2:t),CT(l)&&(e=e||Z2,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(LL(l)&&a!=="_self")return X2(e||"",a),new Td(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new Td(p)}function X2(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var eU="__/auth/handler",tU="emulator/auth/handler",nU=encodeURIComponent("fac");function dT(n,e,t,r,i,o){return v(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ur,eventId:i};if(e instanceof Ed){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",VC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof yy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${nU}=${encodeURIComponent(u)}`:"";return`${rU(n)}?${qa(a).slice(1)}${l}`})}function rU({config:n}){return n.emulator?Sy(n,tU):`https://${n.authDomain}/${eU}`}var oy="webStorageSupport",by=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ny,this._completeRedirectFn=R2,this._overrideRedirectResult=T2}_openPopup(e,t,r,i){return v(this,null,function*(){var o;$r((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield dT(e,t,r,sy(),i);return J2(e,s,WT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield dT(e,t,r,sy(),i);return l2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):($r(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield G2(e),r=new Dy(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oy,{type:oy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[oy];s!==void 0&&t(!!s),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=O2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xT()||TT()||Ry()}},XT=by;var hT="@firebase/auth",fT="1.8.2";var Cy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function iU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oU(n){Lr(new zt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PT(n)},l=new fy(r,i,o,u);return GL(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lr(new zt("auth-internal",e=>{let t=Zo(e.getProvider("auth").getImmediate());return(r=>new Cy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(hT,fT,iU(n)),on(hT,fT,"esm2017")}var sU=5*60,aU=Bm("authIdTokenMaxAge")||sU,pT=null,cU=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aU)return;let i=t?.token;pT!==i&&(pT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function xy(n=ld()){let e=Ga(n,"auth");if(e.isInitialized())return e.getImmediate();let t=VT(n,{popupRedirectResolver:XT,persistence:[ZT,GT,Ny]}),r=Bm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=cU(o.toString());zT(t,s,()=>s(t.currentUser)),qT(t,a=>s(a))}}let i=Um("auth");return i&&LT(t,`http://${i}`),t}function uU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$L({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Si("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",uU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oU("Browser");var qr={apiKey:"AIzaSyAVJIMz4fZa52bhaEviW9KZDe0T0FyrvoM",authDomain:"mks-coaching.firebaseapp.com",projectId:"mks-coaching",storageBucket:"mks-coaching.firebasestorage.app",messagingSenderId:"473942184193",appId:"1:473942184193:web:3bcabc4621d1c2058a0b00"};var lU="firebase",dU="11.2.0";on(lU,dU,"app");function hU(n,e){n&1&&(N(0,"p"),O(1,"Email invalide"),R())}function fU(n,e){n&1&&(N(0,"p"),O(1,"Mot de passe invalide"),R())}function pU(n,e){n&1&&(N(0,"li"),O(1,"Mot de passe doit contenir au moins une lettre majuscule."),R())}function gU(n,e){n&1&&(N(0,"li"),O(1,"Mot de passe doit contenir au moins une lettre minuscule."),R())}function mU(n,e){n&1&&(N(0,"li"),O(1,"Au moins un chiffre."),R())}function yU(n,e){n&1&&(N(0,"li"),O(1,"Au moins un charact\xE8re sp\xE9cial."),R())}function vU(n,e){n&1&&(N(0,"li"),O(1,"Au moins 8 charact\xE8res."),R())}function _U(n,e){if(n&1&&(Me(0,hU,2,0,"p")(1,fU,2,0,"p"),N(2,"ul"),Me(3,pU,2,0,"li")(4,gU,2,0,"li")(5,mU,2,0,"li")(6,yU,2,0,"li")(7,vU,2,0,"li"),R()),n&2){let t=Bn();jn(t.email!=null&&t.email.invalid?0:-1),W(),jn(t.password!=null&&t.password.invalid?1:-1),W(2),jn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[A-Z])")?-1:3),W(),jn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[a-z])")?-1:4),W(),jn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[0-9])")?-1:5),W(),jn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[!@#$%^&*])")?-1:6),W(),jn(!(t.password==null||t.password.value==null)&&t.password.value.match(".{8,}")?-1:7)}}var IU=/^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\D*\d).{8,}$/,xW=Yn(qr),Md=class n{constructor(e){this.router=e}formBuilder=F(rd);profileForm=this.formBuilder.group({password:["",[Ge.required,Ge.pattern(IU)]],email:["",[Ge.required,Ge.email]]});get password(){return this.profileForm.get("password")}get email(){return this.profileForm.get("email")}onSubmit(){console.log("Click")}handleSubmit(){this.connect(this.profileForm.value.email,this.profileForm.value.password)}connect(e,t){console.log("Service connect");let r=xy();My(r,e,t).then(i=>{let o=i.user;console.log(o.email),console.log(o.displayName),console.log(o.phoneNumber),console.log(o.metadata.creationTime),console.log(o.metadata.lastSignInTime),this.router.navigate(["/dashboard"])}).catch(i=>{let o=i.code,s=i.message;console.log(o),console.log(s)})}static \u0275fac=function(t){return new(t||n)(ce(qt))};static \u0275cmp=Be({type:n,selectors:[["app-authentification"]],decls:25,vars:2,consts:[[1,"bg-gray-100","flex","items-center","justify-center","h-screen"],[1,"bg-white","p-8","rounded-lg","shadow-lg","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Votre email","formControlName","email","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Votre mot de passe","required","","formControlName","password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","submit",1,"w-full","bg-indigo-600","text-white","py-2","px-4","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"click"],[1,"mt-4","text-center","text-sm","text-gray-600"],["routerLink","/signup",1,"text-indigo-600","hover:text-indigo-500"],["disabled","",1,"text-indigo-600","hover:text-indigo-500"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"h2",2),O(3,"Connexion"),R(),N(4,"form",3),mt("ngSubmit",function(){return r.handleSubmit()}),N(5,"div",4)(6,"label",5),O(7,"Email"),R(),Se(8,"input",6),R(),N(9,"div",7)(10,"label",8),O(11,"Mot de passe"),R(),Se(12,"input",9),R(),N(13,"button",10),mt("click",function(){return r.onSubmit()}),O(14," Se connecter "),R()(),N(15,"p",11),O(16," Pas encore de compte ? "),N(17,"a",12),O(18,"Inscrivez-vous"),R()(),N(19,"p",11),O(20," Mot de passe oubli\xE9 ? "),N(21,"a",13),O(22,"R\xE9initialisation"),R()(),N(23,"div"),Me(24,_U,8,7),R()()()),t&2&&(W(4),be("formGroup",r.profileForm),W(20),jn(r.password!=null&&r.password.dirty&&(r.email!=null&&r.email.dirty)?24:-1))},dependencies:[id,nd,Wo,Xl,ed,km,Ba,$a,it,yn,Pr],encapsulation:2})};var eS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tS={};var Xn,Py;(function(){var n;function e(D,y){function w(){}w.prototype=y.prototype,D.D=y.prototype,D.prototype=new w,D.prototype.constructor=D,D.C=function(E,b,T){for(var I=Array(arguments.length-2),An=2;An<arguments.length;An++)I[An-2]=arguments[An];return y.prototype[b].apply(E,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)E[b]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(b=0;16>b;++b)E[b]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=D.g[0],w=D.g[1],b=D.g[2];var T=D.g[3],I=y+(T^w&(b^T))+E[0]+3614090360&4294967295;y=w+(I<<7&4294967295|I>>>25),I=T+(b^y&(w^b))+E[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(w^T&(y^w))+E[2]+606105819&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(y^b&(T^y))+E[3]+3250441966&4294967295,w=b+(I<<22&4294967295|I>>>10),I=y+(T^w&(b^T))+E[4]+4118548399&4294967295,y=w+(I<<7&4294967295|I>>>25),I=T+(b^y&(w^b))+E[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(w^T&(y^w))+E[6]+2821735955&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(y^b&(T^y))+E[7]+4249261313&4294967295,w=b+(I<<22&4294967295|I>>>10),I=y+(T^w&(b^T))+E[8]+1770035416&4294967295,y=w+(I<<7&4294967295|I>>>25),I=T+(b^y&(w^b))+E[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(w^T&(y^w))+E[10]+4294925233&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(y^b&(T^y))+E[11]+2304563134&4294967295,w=b+(I<<22&4294967295|I>>>10),I=y+(T^w&(b^T))+E[12]+1804603682&4294967295,y=w+(I<<7&4294967295|I>>>25),I=T+(b^y&(w^b))+E[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=b+(w^T&(y^w))+E[14]+2792965006&4294967295,b=T+(I<<17&4294967295|I>>>15),I=w+(y^b&(T^y))+E[15]+1236535329&4294967295,w=b+(I<<22&4294967295|I>>>10),I=y+(b^T&(w^b))+E[1]+4129170786&4294967295,y=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(y^w))+E[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^w&(T^y))+E[11]+643717713&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^y&(b^T))+E[0]+3921069994&4294967295,w=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(w^b))+E[5]+3593408605&4294967295,y=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(y^w))+E[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^w&(T^y))+E[15]+3634488961&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^y&(b^T))+E[4]+3889429448&4294967295,w=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(w^b))+E[9]+568446438&4294967295,y=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(y^w))+E[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^w&(T^y))+E[3]+4107603335&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^y&(b^T))+E[8]+1163531501&4294967295,w=b+(I<<20&4294967295|I>>>12),I=y+(b^T&(w^b))+E[13]+2850285829&4294967295,y=w+(I<<5&4294967295|I>>>27),I=T+(w^b&(y^w))+E[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=b+(y^w&(T^y))+E[7]+1735328473&4294967295,b=T+(I<<14&4294967295|I>>>18),I=w+(T^y&(b^T))+E[12]+2368359562&4294967295,w=b+(I<<20&4294967295|I>>>12),I=y+(w^b^T)+E[5]+4294588738&4294967295,y=w+(I<<4&4294967295|I>>>28),I=T+(y^w^b)+E[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^w)+E[11]+1839030562&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^y)+E[14]+4259657740&4294967295,w=b+(I<<23&4294967295|I>>>9),I=y+(w^b^T)+E[1]+2763975236&4294967295,y=w+(I<<4&4294967295|I>>>28),I=T+(y^w^b)+E[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^w)+E[7]+4139469664&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^y)+E[10]+3200236656&4294967295,w=b+(I<<23&4294967295|I>>>9),I=y+(w^b^T)+E[13]+681279174&4294967295,y=w+(I<<4&4294967295|I>>>28),I=T+(y^w^b)+E[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^w)+E[3]+3572445317&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^y)+E[6]+76029189&4294967295,w=b+(I<<23&4294967295|I>>>9),I=y+(w^b^T)+E[9]+3654602809&4294967295,y=w+(I<<4&4294967295|I>>>28),I=T+(y^w^b)+E[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=b+(T^y^w)+E[15]+530742520&4294967295,b=T+(I<<16&4294967295|I>>>16),I=w+(b^T^y)+E[2]+3299628645&4294967295,w=b+(I<<23&4294967295|I>>>9),I=y+(b^(w|~T))+E[0]+4096336452&4294967295,y=w+(I<<6&4294967295|I>>>26),I=T+(w^(y|~b))+E[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~w))+E[14]+2878612391&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~y))+E[5]+4237533241&4294967295,w=b+(I<<21&4294967295|I>>>11),I=y+(b^(w|~T))+E[12]+1700485571&4294967295,y=w+(I<<6&4294967295|I>>>26),I=T+(w^(y|~b))+E[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~w))+E[10]+4293915773&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~y))+E[1]+2240044497&4294967295,w=b+(I<<21&4294967295|I>>>11),I=y+(b^(w|~T))+E[8]+1873313359&4294967295,y=w+(I<<6&4294967295|I>>>26),I=T+(w^(y|~b))+E[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~w))+E[6]+2734768916&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~y))+E[13]+1309151649&4294967295,w=b+(I<<21&4294967295|I>>>11),I=y+(b^(w|~T))+E[4]+4149444226&4294967295,y=w+(I<<6&4294967295|I>>>26),I=T+(w^(y|~b))+E[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=b+(y^(T|~w))+E[2]+718787259&4294967295,b=T+(I<<15&4294967295|I>>>17),I=w+(T^(b|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var w=y-this.blockSize,E=this.B,b=this.h,T=0;T<y;){if(b==0)for(;T<=w;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<y;)if(E[b++]=D.charCodeAt(T++),b==this.blockSize){i(this,E),b=0;break}}else for(;T<y;)if(E[b++]=D[T++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var w=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=w&255,w/=256;for(this.u(D),D=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)D[w++]=this.g[y]>>>E&255;return D};function o(D,y){var w=a;return Object.prototype.hasOwnProperty.call(w,D)?w[D]:w[D]=y(D)}function s(D,y){this.h=y;for(var w=[],E=!0,b=D.length-1;0<=b;b--){var T=D[b]|0;E&&T==y||(w[b]=T,E=!1)}this.g=w}var a={};function u(D){return-128<=D&&128>D?o(D,function(y){return new s([y|0],0>y?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return M(l(-D));for(var y=[],w=1,E=0;D>=w;E++)y[E]=D/w|0,w*=4294967296;return new s(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return M(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,b=0;b<D.length;b+=8){var T=Math.min(8,D.length-b),I=parseInt(D.substring(b,b+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(I))):(E=E.j(w),E=E.add(l(I)))}return E}var p=u(0),m=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(k(this))return-M(this).m();for(var D=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(k(this))return"-"+M(this).toString(D);for(var y=l(Math.pow(D,6)),w=this,E="";;){var b=ae(w,y).g;w=U(w,b.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(D);if(w=b,S(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=U(this,D),k(D)?-1:S(D)?0:1};function M(D){for(var y=D.g.length,w=[],E=0;E<y;E++)w[E]=~D.g[E];return new s(w,~D.h).add(m)}n.abs=function(){return k(this)?M(this):this},n.add=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],E=0,b=0;b<=y;b++){var T=E+(this.i(b)&65535)+(D.i(b)&65535),I=(T>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);E=I>>>16,T&=65535,I&=65535,w[b]=I<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function U(D,y){return D.add(M(y))}n.j=function(D){if(S(this)||S(D))return p;if(k(this))return k(D)?M(this).j(M(D)):M(M(this).j(D));if(k(D))return M(this.j(M(D)));if(0>this.l(_)&&0>D.l(_))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<D.g.length;b++){var T=this.i(E)>>>16,I=this.i(E)&65535,An=D.i(b)>>>16,bs=D.i(b)&65535;w[2*E+2*b]+=I*bs,q(w,2*E+2*b),w[2*E+2*b+1]+=T*bs,q(w,2*E+2*b+1),w[2*E+2*b+1]+=I*An,q(w,2*E+2*b+1),w[2*E+2*b+2]+=T*An,q(w,2*E+2*b+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function G(D,y){this.g=D,this.h=y}function ae(D,y){if(S(y))throw Error("division by zero");if(S(D))return new G(p,p);if(k(D))return y=ae(M(D),y),new G(M(y.g),M(y.h));if(k(y))return y=ae(D,M(y)),new G(M(y.g),y.h);if(30<D.g.length){if(k(D)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(D);)w=_e(w),E=_e(E);var b=pe(w,1),T=pe(E,1);for(E=pe(E,2),w=pe(w,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(b=b.add(w),T=I),E=pe(E,1),w=pe(w,1)}return y=U(D,b.j(y)),new G(b,y)}for(b=p;0<=D.l(y);){for(w=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),I=T.j(y);k(I)||0<I.l(D);)w-=E,T=l(w),I=T.j(y);S(T)&&(T=m),b=b.add(T),D=U(D,I)}return new G(b,D)}n.A=function(D){return ae(this,D).h},n.and=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&D.i(E);return new s(w,this.h&D.h)},n.or=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|D.i(E);return new s(w,this.h|D.h)},n.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^D.i(E);return new s(w,this.h^D.h)};function _e(D){for(var y=D.g.length+1,w=[],E=0;E<y;E++)w[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(w,D.h)}function pe(D,y){var w=y>>5;y%=32;for(var E=D.g.length-w,b=[],T=0;T<E;T++)b[T]=0<y?D.i(T+w)>>>y|D.i(T+w+1)<<32-y:D.i(T+w);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Py=tS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Xn=tS.Integer=s}).apply(typeof eS<"u"?eS:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={};var ky,wU,Jo,Oy,nc,xd,Fy,Vy,Ly;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var V=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)V[Ce-2]=arguments[Ce];return d.prototype[C].apply(g,V)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let V=0;V<A;V++)c[C+V]=g[V]}else c.push(g)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var _e=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function pe(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Fh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class An{constructor(){this.h=this.g=null}add(d,f){let g=bs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var bs=new U(()=>new qA,c=>c.reset());class qA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Cs,Ts=!1,Fh=new An,L_=()=>{let c=a.Promise.resolve(void 0);Cs=()=>{c.then(zA)}};var zA=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=bs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ts=!1};function ar(){this.s=this.s,this.C=this.C}ar.prototype.s=!1,ar.prototype.ma=function(){this.s||(this.s=!0,this.N())},ar.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var GA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ss(c,d){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(_e){e:{try{ae(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:WA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ss.aa.h.call(this)}}S(Ss,ot);var WA={2:"touch",3:"pen",4:"mouse"};Ss.prototype.h=function(){Ss.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var As="closure_listenable_"+(1e6*Math.random()|0),KA=0;function QA(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++KA,this.da=this.fa=!1}function Dc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bc(c){this.src=c,this.g={},this.h=0}bc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var V=Lh(c,d,g,C);return-1<V?(d=c[V],f||(d.fa=!1)):(d=new QA(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Vh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Dc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Lh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Uh="closure_lm_"+(1e6*Math.random()|0),jh={};function U_(c,d,f,g,C){if(g&&g.once)return B_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)U_(c,d[A],f,g,C);return null}return f=qh(f),c&&c[As]?c.K(d,f,l(g)?!!g.capture:!!g,C):j_(c,d,f,!1,g,C)}function j_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var V=l(C)?!!C.capture:!!C,Ce=$h(c);if(Ce||(c[Uh]=Ce=new bc(c)),f=Ce.add(d,f,g,V,A),f.proxy)return f;if(g=YA(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)GA||(C=V),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(H_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function YA(){function c(f){return d.call(c.src,c.listener,f)}let d=ZA;return c}function B_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)B_(c,d[A],f,g,C);return null}return f=qh(f),c&&c[As]?c.L(d,f,l(g)?!!g.capture:!!g,C):j_(c,d,f,!0,g,C)}function $_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)$_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=qh(f),c&&c[As]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Lh(A,f,g,C),-1<f&&(Dc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=$h(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Lh(d,f,g,C)),(f=-1<c?d[c]:null)&&Bh(f))}function Bh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[As])Vh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(H_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=$h(d))?(Vh(f,c),f.h==0&&(f.src=null,d[Uh]=null)):Dc(c)}}}function H_(c){return c in jh?jh[c]:jh[c]="on"+c}function ZA(c,d){if(c.da)c=!0;else{d=new Ss(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Bh(c),c=f.call(g,d)}return c}function $h(c){return c=c[Uh],c instanceof bc?c:null}var Hh="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(c){return typeof c=="function"?c:(c[Hh]||(c[Hh]=function(d){return c.handleEvent(d)}),c[Hh])}function st(){ar.call(this),this.i=new bc(this),this.M=this,this.F=null}S(st,ar),st.prototype[As]=!0,st.prototype.removeEventListener=function(c,d,f,g){$_(this,c,d,f,g)};function dt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ot(d,c);else if(d instanceof ot)d.target=d.target||c;else{var C=d;d=new ot(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var V=d.g=f[A];C=Cc(V,g,!0,d)&&C}if(V=d.g=c,C=Cc(V,g,!0,d)&&C,C=Cc(V,g,!1,d)&&C,f)for(A=0;A<f.length;A++)V=d.g=f[A],C=Cc(V,g,!1,d)&&C}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Dc(f[g]);delete c.g[d],c.h--}}this.F=null},st.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},st.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Cc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var V=d[A];if(V&&!V.da&&V.capture==f){var Ce=V.listener,et=V.ha||V.src;V.fa&&Vh(c.i,V),C=Ce.call(et,g)!==!1&&C}}return C&&!g.defaultPrevented}function q_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function z_(c){c.g=q_(()=>{c.g=null,c.i&&(c.i=!1,z_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class JA extends ar{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:z_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(c){ar.call(this),this.h=c,this.g={}}S(Rs,ar);var G_=[];function W_(c){pe(c.g,function(d,f){this.g.hasOwnProperty(f)&&Bh(d)},c),c.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),W_(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zh=a.JSON.stringify,XA=a.JSON.parse,eR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Gh(){}Gh.prototype.h=null;function K_(c){return c.h||(c.h=c.i())}function Q_(){}var Ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wh(){ot.call(this,"d")}S(Wh,ot);function Kh(){ot.call(this,"c")}S(Kh,ot);var Xr={},Y_=null;function Tc(){return Y_=Y_||new st}Xr.La="serverreachability";function Z_(c){ot.call(this,Xr.La,c)}S(Z_,ot);function Ns(c){let d=Tc();dt(d,new Z_(d))}Xr.STAT_EVENT="statevent";function J_(c,d){ot.call(this,Xr.STAT_EVENT,c),this.stat=d}S(J_,ot);function ht(c){let d=Tc();dt(d,new J_(d,c))}Xr.Ma="timingevent";function X_(c,d){ot.call(this,Xr.Ma,c),this.size=d}S(X_,ot);function xs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ps(){this.g=!0}Ps.prototype.xa=function(){this.g=!1};function tR(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var V="",Ce=A.split("&"),et=0;et<Ce.length;et++){var Ie=Ce[et].split("=");if(1<Ie.length){var at=Ie[0];Ie=Ie[1];var ct=at.split("_");V=2<=ct.length&&ct[1]=="type"?V+(at+"="+Ie+"&"):V+(at+"=redacted&")}}else V=null;else V=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+V})}function nR(c,d,f,g,C,A,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+V})}function $i(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+iR(c,f)+(g?" "+g:"")})}function rR(c,d){c.info(function(){return"TIMEOUT: "+d})}Ps.prototype.info=function(){};function iR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var V=1;V<C.length;V++)C[V]=""}}}}return zh(f)}catch{return d}}var Sc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qh;function Ac(){}S(Ac,Gh),Ac.prototype.g=function(){return new XMLHttpRequest},Ac.prototype.i=function(){return{}},Qh=new Ac;function cr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tI}function tI(){this.i=null,this.g="",this.h=!1}var nI={},Yh={};function Zh(c,d,f){c.L=1,c.v=xc(Rn(d)),c.m=f,c.P=!0,rI(c,null)}function rI(c,d){c.F=Date.now(),Rc(c),c.A=Rn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),yI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new tI,c.g=OI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new JA(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(G_[0]=C.toString()),C=G_);for(var A=0;A<C.length;A++){var V=U_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ns(),tR(c.i,c.u,c.A,c.l,c.R,c.m)}cr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Mn(c)==3?d.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{let ct=Mn(this.g);var d=this.g.Ba();let zi=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||bI(this.g)))){this.J||ct!=4||d==7||(d==8||0>=zi?Ns(3):Ns(2)),Jh(this);var f=this.g.Z();this.X=f;t:if(iI(this)){var g=bI(this.g);c="";var C=g.length,A=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ks(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,nR(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,et=this.g;if((Ce=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ce)){var Ie=Ce;break t}}Ie=null}if(f=Ie)$i(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xh(this,f);else{this.o=!1,this.s=3,ht(12),ei(this),ks(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<V.length;)if(Kt=oR(this,V),Kt==Yh){ct==4&&(this.s=4,ht(14),f=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==nI){this.s=4,ht(15),$i(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else $i(this.i,this.l,Kt,null),Xh(this,Kt);if(iI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||V.length!=0||this.h.h||(this.s=1,ht(16),f=!1),this.o=this.o&&f,!f)$i(this.i,this.l,V,"[Invalid Chunked Response]"),ei(this),ks(this);else if(0<V.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),sf(at),at.M=!0,ht(11))}}else $i(this.i,this.l,V,null),Xh(this,V);ct==4&&ei(this),this.o&&!this.J&&(ct==4?NI(this.j,this):(this.o=!1,Rc(this)))}else ER(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),ei(this),ks(this)}}}catch{}finally{}};function iI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function oR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Yh:(f=Number(d.substring(f,g)),isNaN(f)?nI:(g+=1,g+f>d.length?Yh:(d=d.slice(g,g+f),c.C=g+f,d)))}cr.prototype.cancel=function(){this.J=!0,ei(this)};function Rc(c){c.S=Date.now()+c.I,oI(c,c.I)}function oI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xs(m(c.ba,c),d)}function Jh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}cr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rR(this.i,this.A),this.L!=2&&(Ns(),ht(17)),ei(this),this.s=2,ks(this)):oI(this,this.S-c)};function ks(c){c.j.G==0||c.J||NI(c.j,c)}function ei(c){Jh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,W_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Xh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ef(f.h,c))){if(!c.K&&ef(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Vc(f),Oc(f);else break e;of(f),ht(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=xs(m(f.Za,f),6e3));if(1>=cI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ni(f,11)}else if((c.K||f.g==c)&&Vc(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let at=Ie[3];at!=null&&(f.la=at,f.j.info("VER="+f.la));let ct=Ie[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));let zi=Ie[5];zi!=null&&typeof zi=="number"&&0<zi&&(g=1.5*zi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Kt=c.g;if(Kt){let Uc=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var A=g.h;A.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(tf(A,A.h),A.h=null))}if(g.D){let af=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(g.ya=af,Ae(g.I,g.D,af))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var V=c;if(g.qa=kI(g,g.J?g.ia:null,g.W),V.K){uI(g.h,V);var Ce=V,et=g.L;et&&(Ce.I=et),Ce.B&&(Jh(Ce),Rc(Ce)),g.g=V}else RI(g);0<f.i.length&&Fc(f)}else Ie[0]!="stop"&&Ie[0]!="close"||ni(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ni(f,7):rf(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}Ns(4)}catch{}}var sR=class{constructor(c,d){this.g=c,this.map=d}};function sI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cI(c){return c.h?1:c.g?c.g.size:0}function ef(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function tf(c,d){c.g?c.g.add(d):c.h=d}function uI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}sI.prototype.cancel=function(){if(this.i=lI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function lI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function aR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function cR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function dI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=cR(c),g=aR(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var hI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ti(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ti){this.h=c.h,Mc(this,c.j),this.o=c.o,this.g=c.g,Nc(this,c.s),this.l=c.l;var d=c.i,f=new Vs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),fI(this,f),this.m=c.m}else c&&(d=String(c).match(hI))?(this.h=!1,Mc(this,d[1]||"",!0),this.o=Os(d[2]||""),this.g=Os(d[3]||"",!0),Nc(this,d[4]),this.l=Os(d[5]||"",!0),fI(this,d[6]||"",!0),this.m=Os(d[7]||"")):(this.h=!1,this.i=new Vs(null,this.h))}ti.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Fs(d,pI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Fs(d,pI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Fs(f,f.charAt(0)=="/"?hR:dR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Fs(f,pR)),c.join("")};function Rn(c){return new ti(c)}function Mc(c,d,f){c.j=f?Os(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Nc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function fI(c,d,f){d instanceof Vs?(c.i=d,gR(c.i,c.h)):(f||(d=Fs(d,fR)),c.i=new Vs(d,c.h))}function Ae(c,d,f){c.i.set(d,f)}function xc(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Os(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,lR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pI=/[#\/\?@]/g,dR=/[#\?:]/g,hR=/[#\?]/g,fR=/[#\?@]/g,pR=/#/g;function Vs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ur(c){c.g||(c.g=new Map,c.h=0,c.i&&uR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Vs.prototype,n.add=function(c,d){ur(this),this.i=null,c=Hi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function gI(c,d){ur(c),d=Hi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mI(c,d){return ur(c),d=Hi(c,d),c.g.has(d)}n.forEach=function(c,d){ur(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){ur(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){ur(this);let d=[];if(typeof c=="string")mI(this,c)&&(d=d.concat(this.g.get(Hi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return ur(this),this.i=null,c=Hi(this,c),mI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function yI(c,d,f){gI(c,d),0<f.length&&(c.i=null,c.g.set(Hi(c,d),k(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),V=this.V(g);for(g=0;g<V.length;g++){var C=A;V[g]!==""&&(C+="="+encodeURIComponent(String(V[g]))),c.push(C)}}return this.i=c.join("&")};function Hi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function gR(c,d){d&&!c.j&&(ur(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(gI(this,g),yI(this,C,f))},c)),c.j=d}function mR(c,d){let f=new Ps;if(a.Image){let g=new Image;g.onload=_(lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(lr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function yR(c,d){let f=new Ps,g=new AbortController,C=setTimeout(()=>{g.abort(),lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?lr(f,"TestPingServer: ok",!0,d):lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),lr(f,"TestPingServer: error",!1,d)})}function lr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function vR(){this.g=new eR}function _R(c,d,f){let g=f||"";try{dI(c,function(C,A){let V=C;l(C)&&(V=zh(C)),d.push(g+A+"="+encodeURIComponent(V))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Ls(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ls,Gh),Ls.prototype.g=function(){return new Pc(this.l,this.j)},Ls.prototype.i=function(c){return function(){return c}}({});function Pc(c,d){st.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Pc,st),n=Pc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,js(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function vI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Us(this):js(this),this.readyState==3&&vI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Us(this))},n.Qa=function(c){this.g&&(this.response=c,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(c){c.readyState=4,c.l=null,c.j=null,c.v=null,js(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function js(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _I(c){let d="";return pe(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function nf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=_I(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ae(c,d,f))}function Pe(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Pe,st);var IR=/^https?$/i,wR=["POST","PUT"];n=Pe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qh.g(),this.v=this.o?K_(this.o):K_(Qh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){II(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{DI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){II(this,A)}};function II(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,wI(c),kc(c)}function wI(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,dt(this,"complete"),dt(this,"abort"),kc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kc(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?EI(this):this.bb())},n.bb=function(){EI(this)};function EI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Mn(c)!=4||c.Z()!=2)){if(c.u&&Mn(c)==4)q_(c.Ea,0,c);else if(dt(c,"readystatechange"),Mn(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=V===0){var C=String(c.D).match(hI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!IR.test(C?C.toLowerCase():"")}f=g}if(f)dt(c,"complete"),dt(c,"success");else{c.m=6;try{var A=2<Mn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",wI(c)}}finally{kc(c)}}}}function kc(c,d){if(c.g){DI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||dt(c,"ready");try{f.onreadystatechange=g}catch{}}}function DI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Mn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),XA(d)}};function bI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ER(c){let d={};c=(c.g&&2<=Mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function CI(c){this.Aa=0,this.i=[],this.j=new Ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,c),this.cb=Bs("retryDelaySeedMs",1e4,c),this.Wa=Bs("forwardChannelMaxRetries",2,c),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sI(c&&c.concurrentRequestLimit),this.Da=new vR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=CI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){ht(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=kI(this,null,this.W),Fc(this)};function rf(c){if(TI(c),c.G==3){var d=c.U++,f=Rn(c.I);if(Ae(f,"SID",c.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),$s(c,f),d=new cr(c,c.j,d),d.L=2,d.v=xc(Rn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=OI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Rc(d)}PI(c)}function Oc(c){c.g&&(sf(c),c.g.cancel(),c.g=null)}function TI(c){Oc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Vc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Fc(c){if(!aI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Cs||L_(),Ts||(Cs(),Ts=!0),Fh.add(d,c),c.B=0}}function DR(c,d){return cI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xs(m(c.Ga,c,d),xI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new cr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=AI(this,C,d),f=Rn(this.I),Ae(f,"RID",c),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),$s(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(_I(A)))+"&"+d:this.m&&nf(f,this.m,A)),tf(this.h,C),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),C.T=!0,Zh(C,f,null)):Zh(C,f,d),this.G=2}}else this.G==3&&(c?SI(this,c):this.i.length==0||aI(this.h)||SI(this))};function SI(c,d){var f;d?f=d.l:f=c.U++;let g=Rn(c.I);Ae(g,"SID",c.K),Ae(g,"RID",f),Ae(g,"AID",c.T),$s(c,g),c.m&&c.o&&nf(g,c.m,c.o),f=new cr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=AI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),tf(c.h,f),Zh(f,g,d)}function $s(c,d){c.H&&pe(c.H,function(f,g){Ae(d,g,f)}),c.l&&dI({},function(f,g){Ae(d,g,f)})}function AI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let V=["count="+f];A==-1?0<f?(A=C[0].g,V.push("ofs="+A)):A=0:V.push("ofs="+A);let Ce=!0;for(let et=0;et<f;et++){let Ie=C[et].g,at=C[et].map;if(Ie-=A,0>Ie)A=Math.max(0,C[et].g-100),Ce=!1;else try{_R(at,V,"req"+Ie+"_")}catch{g&&g(at)}}if(Ce){g=V.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function RI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Cs||L_(),Ts||(Cs(),Ts=!0),Fh.add(d,c),c.v=0}}function of(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xs(m(c.Fa,c),xI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,MI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Oc(this),MI(this))};function sf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function MI(c){c.g=new cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Rn(c.qa);Ae(d,"RID","rpc"),Ae(d,"SID",c.K),Ae(d,"AID",c.T),Ae(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(d,"TO",c.ja),Ae(d,"TYPE","xmlhttp"),$s(c,d),c.m&&c.o&&nf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=xc(Rn(d)),f.m=null,f.P=!0,rI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Oc(this),of(this),ht(19))};function Vc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function NI(c,d){var f=null;if(c.g==d){Vc(c),sf(c),c.g=null;var g=2}else if(ef(c.h,d))f=d.D,uI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Tc(),dt(g,new X_(g,f)),Fc(c)}else RI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&DR(c,d)||g==2&&of(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ni(c,5);break;case 4:ni(c,10);break;case 3:ni(c,6);break;default:ni(c,2)}}}function xI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ni(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ti(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mc(g,"https"),xc(g),C?mR(g.toString(),f):yR(g.toString(),f)}else ht(2);c.G=0,c.l&&c.l.sa(d),PI(c),TI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function PI(c){if(c.G=0,c.ka=[],c.l){let d=lI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function kI(c,d,f){var g=f instanceof ti?Rn(f):new ti(f);if(g.g!="")d&&(g.g=d+"."+g.g),Nc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ti(null);g&&Mc(A,g),d&&(A.g=d),C&&Nc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",c.la),$s(c,g),g}function OI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Pe(new Ls({eb:f})):new Pe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function FI(){}n=FI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Lc(){}Lc.prototype.g=function(c,d){return new Et(c,d)};function Et(c,d){st.call(this),this.g=new CI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new qi(this)}S(Et,st),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){rf(this.g)},Et.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=zh(c),c=f);d.i.push(new sR(d.Ya++,c)),d.G==3&&Fc(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,Et.aa.N.call(this)};function VI(c){Wh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(VI,Wh);function LI(){Kh.call(this),this.status=1}S(LI,Kh);function qi(c){this.g=c}S(qi,FI),qi.prototype.ua=function(){dt(this.g,"a")},qi.prototype.ta=function(c){dt(this.g,new VI(c))},qi.prototype.sa=function(c){dt(this.g,new LI)},qi.prototype.ra=function(){dt(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,Ly=er.createWebChannelTransport=function(){return new Lc},Vy=er.getStatEventTarget=function(){return Tc()},Fy=er.Event=Xr,xd=er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sc.NO_ERROR=0,Sc.TIMEOUT=8,Sc.HTTP_ERROR=6,nc=er.ErrorCode=Sc,eI.COMPLETE="complete",Oy=er.EventType=eI,Q_.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",st.prototype.listen=st.prototype.K,Jo=er.WebChannel=Q_,wU=er.FetchXmlHttpFactory=Ls,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,ky=er.XhrIo=Pe}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});var nS="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var _s="11.2.0";var ki=new Fr("@firebase/firestore");function Xo(){return ki.logLevel}function j(n,...e){if(ki.logLevel<=ue.DEBUG){let t=e.map(I_);ki.debug(`Firestore (${_s}): ${n}`,...t)}}function tr(n,...e){if(ki.logLevel<=ue.ERROR){let t=e.map(I_);ki.error(`Firestore (${_s}): ${n}`,...t)}}function ss(n,...e){if(ki.logLevel<=ue.WARN){let t=e.map(I_);ki.warn(`Firestore (${_s}): ${n}`,...t)}}function I_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${_s}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function De(n,e){n||Q()}function J(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ud=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}},qy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zy=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){De(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new Ud(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Je(e)}},Gy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Wy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Gy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ky=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){De(this.o===void 0);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(De(typeof t.token=="string"),this.R=t.token,new Ky(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function EU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var jd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=EU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function as(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Oe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Oe(0,0))}static max(){return new n(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xn.fromString(e.substring(4,e.length-2))}},ke=class n extends Bd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},DU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends Bd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return DU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};var Yy=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Yy.UNKNOWN_ID=-1;function bU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new Oi(i,K.empty(),e)}function CU(n){return new Oi(n.readTime,n.key,-1)}var Oi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),K.empty(),-1)}static max(){return new n(ne.max(),K.empty(),-1)}};function TU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Is(n){return v(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==SU)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function AU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ws(n){return n.name==="IndexedDbTransactionError"}var w_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function vh(n){return n==null}function cc(n){return n===0&&1/n==-1/0}function RU(n){return typeof n=="number"&&Number.isInteger(n)&&!cc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function MU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rS(e)),e=NU(n.get(t),e);return rS(e)}function NU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function rS(n){return n+""}var xU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zW=[...xU,"documentOverlays"],PU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kU=PU,OU=[...kU,"indexConfiguration","indexState","indexEntries"];var GW=[...OU,"globals"];function iS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Fe=class n{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rs(this.root,e,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rs(this.root,e,this.comparator,!0)}},rs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class n{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $d(this.data.getIterator())}getIteratorFrom(e){return new $d(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$d=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var En=class n{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xe(Pt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return as(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var FU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(n){if(De(!!n),typeof n=="string"){let e=0,t=FU.exec(n);if(De(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rr(n){return typeof n=="string"?lt.fromBase64String(n):lt.fromUint8Array(n)}function E_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function _h(n){let e=n.mapValue.fields.__previous_value__;return E_(e)?_h(e):e}function uc(n){let e=nr(n.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var Jy=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},qd=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?E_(n)?4:FS(n)?9007199254740991:OS(n)?10:11:Q()}function Tn(n,e){if(n===e)return!0;let t=Kr(n);if(t!==Kr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uc(n).isEqual(uc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=nr(i.timestampValue),a=nr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return rr(i.bytesValue).isEqual(rr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?cc(s)===cc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return as(n.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(iS(s)!==iS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Tn(s[u],a[u])))return!1;return!0}(n,e);default:return Q()}}function lc(n,e){return(n.values||[]).find(t=>Tn(t,e))!==void 0}function cs(n,e){if(n===e)return 0;let t=Kr(n),r=Kr(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return oS(n.timestampValue,e.timestampValue);case 4:return oS(uc(n),uc(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(o,s){let a=rr(o),u=rr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(Ne(o.latitude),Ne(s.latitude));return a!==0?a:me(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,k=me(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:sS(_,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Pd.mapValue&&s===Pd.mapValue)return 0;if(o===Pd.mapValue)return 1;if(s===Pd.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=me(u[p],h[p]);if(m!==0)return m;let _=cs(a[u[p]],l[h[p]]);if(_!==0)return _}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function oS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=nr(n),r=nr(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function sS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=cs(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function us(n){return Xy(n)}function Xy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=nr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return rr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Xy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Xy(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function Fd(n){switch(Kr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_h(n);return e?16+Fd(e):16;case 5:return 2*n.stringValue.length;case 6:return rr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Fd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ji(r.fields,(o,s)=>{i+=o.length+Fd(s)}),i}(n.mapValue);default:throw Q()}}function ev(n){return!!n&&"integerValue"in n}function D_(n){return!!n&&"arrayValue"in n}function aS(n){return!!n&&"nullValue"in n}function cS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vd(n){return!!n&&"mapValue"in n}function OS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ic(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var sn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=Pt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ic(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ji(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ic(this.value))}};function VS(n){let e=[];return ji(n.fields,(t,r)=>{let i=new Pt([t]);if(Vd(r)){let o=VS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new En(e)}var an=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),sn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ls=class{constructor(e,t){this.position=e,this.inclusive=t}};function uS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),t.key):r=cs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tn(n.position[t],e.position[t]))return!1;return!0}var ds=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function VU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zd=class{},We=class n extends zd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nv(e,t,r):t==="array-contains"?new ov(e,r):t==="in"?new sv(e,r):t==="not-in"?new av(e,r):t==="array-contains-any"?new cv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rv(e,r):new iv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cs(t,this.value)):t!==null&&Kr(this.value)===Kr(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Sn=class n extends zd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return LS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function LS(n){return n.op==="and"}function US(n){return LU(n)&&LS(n)}function LU(n){for(let e of n.filters)if(e instanceof Sn)return!1;return!0}function tv(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+us(n.value);if(US(n))return n.filters.map(e=>tv(e)).join(",");{let e=n.filters.map(t=>tv(t)).join(",");return`${n.op}(${e})`}}function jS(n,e){return n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)}(n,e):n instanceof Sn?function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jS(s,i.filters[a]),!0):!1}(n,e):void Q()}function BS(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${us(t.value)}`}(n):n instanceof Sn?function(t){return t.op.toString()+" {"+t.getFilters().map(BS).join(" ,")+"}"}(n):"Filter"}var nv=class extends We{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},rv=class extends We{constructor(e,t){super(e,"in",t),this.keys=$S("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iv=class extends We{constructor(e,t){super(e,"not-in",t),this.keys=$S("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $S(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var ov=class extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return D_(t)&&lc(t.arrayValue,this.value)}},sv=class extends We{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&lc(this.value.arrayValue,t)}},av=class extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!lc(this.value.arrayValue,t)}},cv=class extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!D_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lc(this.value.arrayValue,r))}};var uv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function dS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new uv(n,e,t,r,i,o,s)}function b_(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),vh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>us(r)).join(",")),e.ue=t}return e.ue}function C_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lS(n.startAt,e.startAt)&&lS(n.endAt,e.endAt)}function lv(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var hs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UU(n,e,t,r,i,o,s,a){return new hs(n,e,t,r,i,o,s,a)}function T_(n){return new hs(n)}function hS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jU(n){return n.collectionGroup!==null}function oc(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xe(Pt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ds(o,r))}),t.has(Pt.keyField().canonicalString())||e.ce.push(new ds(Pt.keyField(),r))}return e.ce}function bn(n){let e=J(n);return e.le||(e.le=BU(e,oc(n))),e.le}function BU(n,e){if(n.limitType==="F")return dS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ds(i.field,o)});let t=n.endAt?new ls(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ls(n.startAt.position,n.startAt.inclusive):null;return dS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dv(n,e,t){return new hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ih(n,e){return C_(bn(n),bn(e))&&n.limitType===e.limitType}function HS(n){return`${b_(bn(n))}|lt:${n.limitType}`}function es(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>BS(i)).join(", ")}]`),vh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>us(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>us(i)).join(",")),`Target(${r})`}(bn(n))}; limitType=${n.limitType})`}function wh(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of oc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=uS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,oc(r),i)||r.endAt&&!function(s,a,u){let l=uS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,oc(r),i))}(n,e)}function $U(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qS(n){return(e,t)=>{let r=!1;for(let i of oc(n)){let o=HU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HU(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?cs(u,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var ir=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kS(this.inner)}size(){return this.innerSize}};var qU=new Fe(K.comparator);function or(){return qU}var zS=new Fe(K.comparator);function rc(...n){let e=zS;for(let t of n)e=e.insert(t.key,t);return e}function GS(n){let e=zS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ni(){return sc()}function WS(){return sc()}function sc(){return new ir(n=>n.toString(),(n,e)=>n.isEqual(e))}var zU=new Fe(K.comparator),GU=new Xe(K.comparator);function fe(...n){let e=GU;for(let t of n)e=e.add(t);return e}var WU=new Xe(me);function KU(){return WU}function S_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function KS(n){return{integerValue:""+n}}function QU(n,e){return RU(e)?KS(e):S_(n,e)}var fs=class{constructor(){this._=void 0}};function YU(n,e,t){return n instanceof ps?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&E_(o)&&(o=_h(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Fi?YS(n,e):n instanceof Vi?ZS(n,e):function(i,o){let s=QS(i,o),a=fS(s)+fS(i.Pe);return ev(s)&&ev(i.Pe)?KS(a):S_(i.serializer,a)}(n,e)}function ZU(n,e,t){return n instanceof Fi?YS(n,e):n instanceof Vi?ZS(n,e):t}function QS(n,e){return n instanceof gs?function(r){return ev(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ps=class extends fs{},Fi=class extends fs{constructor(e){super(),this.elements=e}};function YS(n,e){let t=JS(e);for(let r of n.elements)t.some(i=>Tn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vi=class extends fs{constructor(e){super(),this.elements=e}};function ZS(n,e){let t=JS(e);for(let r of n.elements)t=t.filter(i=>!Tn(i,r));return{arrayValue:{values:t}}}var gs=class extends fs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function fS(n){return Ne(n.integerValue||n.doubleValue)}function JS(n){return D_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function JU(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fi&&i instanceof Fi||r instanceof Vi&&i instanceof Vi?as(r.elements,i.elements,Tn):r instanceof gs&&i instanceof gs?Tn(r.Pe,i.Pe):r instanceof ps&&i instanceof ps}(n.transform,e.transform)}var hv=class{constructor(e,t){this.version=e,this.transformResults=t}},Pi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ld(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ms=class{};function XS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gd(n.key,Pi.none()):new Li(n.key,n.data,Pi.none());{let t=n.data,r=sn.empty(),i=new Xe(Pt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new sr(n.key,r,new En(i.toArray()),Pi.none())}}function XU(n,e,t){n instanceof Li?function(i,o,s){let a=i.value.clone(),u=gS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof sr?function(i,o,s){if(!Ld(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=gS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(eA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof Li?function(o,s,a,u){if(!Ld(o.precondition,s))return a;let l=o.value.clone(),h=mS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof sr?function(o,s,a,u){if(!Ld(o.precondition,s))return a;let l=mS(o.fieldTransforms,u,s),h=s.data;return h.setAll(eA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ld(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function ej(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=QS(r.transform,i||null);o!=null&&(t===null&&(t=sn.empty()),t.set(r.field,o))}return t||null}function pS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&as(r,i,(o,s)=>JU(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Li=class extends ms{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},sr=class extends ms{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function eA(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function gS(n,e,t){let r=new Map;De(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ZU(s,a,t[i]))}return r}function mS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YU(o,s,e))}return r}var Gd=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fv=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&XU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=XS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&as(this.mutations,e.mutations,(t,r)=>pS(t,r))&&as(this.baseMutations,e.baseMutations,(t,r)=>pS(t,r))}},gv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){De(e.mutations.length===r.length);let i=function(){return zU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var mv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,ve;function tj(n){switch(n){default:return Q();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function tA(n){if(n===void 0)return tr("GRPC error has no .code"),x.UNKNOWN;switch(n){case $e.OK:return x.OK;case $e.CANCELLED:return x.CANCELLED;case $e.UNKNOWN:return x.UNKNOWN;case $e.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case $e.INTERNAL:return x.INTERNAL;case $e.UNAVAILABLE:return x.UNAVAILABLE;case $e.UNAUTHENTICATED:return x.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case $e.NOT_FOUND:return x.NOT_FOUND;case $e.ALREADY_EXISTS:return x.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return x.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case $e.ABORTED:return x.ABORTED;case $e.OUT_OF_RANGE:return x.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return x.UNIMPLEMENTED;case $e.DATA_LOSS:return x.DATA_LOSS;default:return Q()}}(ve=$e||($e={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var yS=null;function nj(){return new TextEncoder}var rj=new Xn([4294967295,4294967295],0);function vS(n){let e=nj().encode(n),t=new Py;return t.update(e),new Uint8Array(t.digest())}function _S(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xn([t,r],0),new Xn([i,o],0)]}var vv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xi(`Invalid padding: ${t}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xi(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Xn.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Xn.fromNumber(r)));return i.compare(rj)===1&&(i=new Xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=vS(e),[r,i]=_S(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=vS(e),[r,i]=_S(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Fe(me),or(),fe())}},dc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var is=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Kd=class{constructor(e,t){this.targetId=e,this.me=t}},Qd=class{constructor(e,t,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yd=class{constructor(){this.fe=0,this.ge=IS(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),t=fe(),r=fe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new dc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=IS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_v=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=or(),this.qe=kd(),this.Qe=kd(),this.Ke=new Fe(me)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(lv(o))if(r===0){let s=new K(o.path);this.We(t,s,an.newNoDocument(s,ne.min()))}else De(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}yS?.tt(function(h,p,m,_,S){var k,M,U,q,G,ae;let _e={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},pe=p.unchangedNames;return pe&&(_e.bloomFilter={applied:S===0,hashCount:(k=pe?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(q=(U=(M=pe?.bits)===null||M===void 0?void 0:M.bitmap)===null||U===void 0?void 0:U.length)!==null&&q!==void 0?q:0,padding:(ae=(G=pe?.bits)===null||G===void 0?void 0:G.padding)!==null&&ae!==void 0?ae:0,mightContain:D=>{var y;return(y=_?.mightContain(D))!==null&&y!==void 0&&y}}),_e}(s,e.me,this.Be.nt(),a,u))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=rr(r).toUint8Array()}catch(u){if(u instanceof Hd)return ss("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vv(s,i,o)}catch(u){return ss(u instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&lv(a.target)){let u=new K(a.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,an.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=fe();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Wd(e,t,this.Ke,this.ke,r);return this.ke=or(),this.qe=kd(),this.Qe=kd(),this.Ke=new Fe(me),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Yd,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Xe(me),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(me),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Yd),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function kd(){return new Fe(K.comparator)}function IS(){return new Fe(K.comparator)}var ij={asc:"ASCENDING",desc:"DESCENDING"},oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sj={and:"AND",or:"OR"},Iv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wv(n,e){return n.useProto3Json||vh(e)?e:{value:e}}function Zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aj(n,e){return Zd(n,e.toTimestamp())}function Cn(n){return De(!!n),ne.fromTimestamp(function(t){let r=nr(t);return new Oe(r.seconds,r.nanos)}(n))}function A_(n,e){return Ev(n,e).canonicalString()}function Ev(n,e){let t=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rA(n){let e=ke.fromString(n);return De(cA(e)),e}function Dv(n,e){return A_(n.databaseId,e.path)}function Uy(n,e){let t=rA(e);if(t.get(1)!==n.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(oA(t))}function iA(n,e){return A_(n.databaseId,e)}function cj(n){let e=rA(n);return e.length===4?ke.emptyPath():oA(e)}function bv(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oA(n){return De(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function wS(n,e,t){return{name:Dv(n,e),fields:t.value.mapValue.fields}}function uj(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(De(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:tA(l.code);return new B(h,l.message||"")}(s);t=new Qd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Uy(n,r.document.name),o=Cn(r.document.updateTime),s=r.document.createTime?Cn(r.document.createTime):ne.min(),a=new sn({mapValue:{fields:r.document.fields}}),u=an.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new is(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Uy(n,r.document),o=r.readTime?Cn(r.readTime):ne.min(),s=an.newNoDocument(i,o),a=r.removedTargetIds||[];t=new is([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Uy(n,r.document),o=r.removedTargetIds||[];t=new is([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yv(i,o),a=r.targetId;t=new Kd(a,s)}}return t}function lj(n,e){let t;if(e instanceof Li)t={update:wS(n,e.key,e.value)};else if(e instanceof Gd)t={delete:Dv(n,e.key)};else if(e instanceof sr)t={update:wS(n,e.key,e.data),updateMask:_j(e.fieldMask)};else{if(!(e instanceof fv))return Q();t={verify:Dv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ps)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function dj(n,e){return n&&n.length>0?(De(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Cn(i.updateTime):Cn(o);return s.isEqual(ne.min())&&(s=Cn(o)),new hv(s,i.transformResults||[])}(t,e))):[]}function hj(n,e){return{documents:[iA(n,e.path)]}}function fj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iA(n,i);let o=function(l){if(l.length!==0)return aA(Sn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ts(m.field),direction:mj(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=wv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i}}function pj(n){let e=cj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){De(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=sA(p);return m instanceof Sn&&US(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(S){return new ds(ns(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,vh(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new ls(_,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new ls(_,m)}(t.endAt)),UU(e,i,s,o,a,"F",u,l)}function gj(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ns(t.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ns(t.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ns(t.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ns(t.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return We.create(ns(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Sn.create(t.compositeFilter.filters.map(r=>sA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function mj(n){return ij[n]}function yj(n){return oj[n]}function vj(n){return sj[n]}function ts(n){return{fieldPath:n.canonicalString()}}function ns(n){return Pt.fromServerFormat(n.fieldPath)}function aA(n){return n instanceof We?function(t){if(t.op==="=="){if(cS(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NAN"}};if(aS(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cS(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NAN"}};if(aS(t.value))return{unaryFilter:{field:ts(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(t.field),op:yj(t.op),value:t.value}}}(n):n instanceof Sn?function(t){let r=t.getFilters().map(i=>aA(i));return r.length===1?r[0]:{compositeFilter:{op:vj(t.op),filters:r}}}(n):Q()}function _j(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var hc=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Cv=class{constructor(e){this.ht=e}};function Ij(n){let e=pj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dv(e,e.limit,"L"):e}var Jd=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),cc(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=nr(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(rr(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?FS(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):OS(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):Q()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(Ne(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),K.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Jd.Ft=new Jd;var Tv=class{constructor(){this.ln=new Sv}addToCollectionParentIndex(e,t){return this.ln.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Oi.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Sv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(ke.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(ke.comparator)).toArray()}};var KW=new Uint8Array(0);var ES={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(41943040,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);var fc=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function DS([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var Av=class{constructor(e){this.Gn=e,this.buffer=new Xe(DS),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();DS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Rv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ws(t)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Is(t)}yield this.Yn(3e5)}))}},Mv=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(w_.oe);let r=new Av(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(ES)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ES):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Xo()<=ue.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function wj(n,e){return new Mv(n,e)}var Nv=class{constructor(){this.changes=new ir(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Pv=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,En.empty(),Oe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=Ni();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=rc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ni();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=or(),s=sc(),a=function(){return sc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof sr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ac(h.mutation,l,h.mutation.getFieldMask(),Oe.now())):s.set(l.key,En.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new xv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new Fe((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||En.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=WS();h.forEach(m=>{if(!o.has(m)){let _=XS(t.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(Ni()),a=-1,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:GS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=rc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,m){return new hs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,an.newInvalidDocument(h)))});let a=rc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ac(h.mutation,l,En.empty(),Oe.now()),wh(t,l)&&(a=a.insert(u,l))}),a})}};var kv=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return P.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:Ij(i.bundledQuery),readTime:Cn(i.readTime)}}(t)),P.resolve()}};var Ov=class{constructor(){this.overlays=new Fe(K.comparator),this.dr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ni();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Ni(),o=t.length+1,s=new K(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ni(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ni(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new mv(t,r));let o=this.dr.get(t);o===void 0&&(o=fe(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var Fv=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var pc=class{constructor(){this.Er=new Xe(He.Ar),this.Rr=new Xe(He.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new He(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new He(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new K(new ke([])),r=new He(t,e),i=new He(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new K(new ke([])),r=new He(t,e),i=new He(t,e+1),o=fe();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new He(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},He=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return K.comparator(e.key,t.key)||me(e.br,t.br)}static Vr(e,t){return me(e.br,t.br)||K.comparator(e.key,t.key)}};var Vv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Xe(He.Ar)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new pv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new He(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new He(t,0),i=new He(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(me);return t.forEach(i=>{let o=new He(i,0),s=new He(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),P.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new He(new K(o),0),a=new Xe(me);return this.vr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},s),P.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){De(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return P.forEach(t.mutations,i=>{let o=new He(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new He(t,0),i=this.vr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Lv=class{constructor(e){this.Nr=e,this.docs=function(){return new Fe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=or();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():an.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=or(),s=t.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||TU(CU(h),r)<=0||(i.has(h.key)||wh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Br(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Uv(this)}getSize(e){return P.resolve(this.size)}},Uv=class extends Nv{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var jv=class{constructor(e){this.persistence=e,this.Lr=new ir(t=>b_(t),C_),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.kr=0,this.qr=new pc,this.targetCount=0,this.Qr=fc.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),P.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Un(t),P.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.qr.containsKey(t))}};var Xd=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new w_(0),this.Ur=!1,this.Ur=!0,this.Wr=new Fv,this.referenceDelegate=e(this),this.Gr=new jv(this),this.indexManager=new Tv,this.remoteDocumentCache=function(i){return new Lv(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Cv(t),this.jr=new kv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ov,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new Vv(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Bv(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return P.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},Bv=class extends Zy{constructor(e){super(),this.currentSequenceNumber=e}},$v=class n{constructor(e){this.persistence=e,this.Zr=new pc,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw Q()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),P.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.ti,r=>{let i=K.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return P.or([()=>P.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},eh=class n{constructor(e,t){this.persistence=e,this.ri=new ir(r=>MU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wj(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return P.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),P.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fd(e.data.value)),t}ir(e,t,r){return P.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Hv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=fe(),i=fe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var qv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zv=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return OC()?8:AU(Ze())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qv;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Xo()<=ue.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),P.resolve()):(Xo()<=ue.DEBUG&&j("QueryEngine","Query:",es(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Xo()<=ue.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(t))):P.resolve())}Xi(e,t){if(hS(t))return P.resolve(null);let r=bn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=dv(t,null,"F"),r=bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=fe(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.rs(t,a);return this.ss(t,l,s,u.readTime)?this.Xi(e,dv(t,null,"F")):this.os(e,l,t,u)}))})))}es(e,t,r,i){return hS(t)||i.isEqual(ne.min())?P.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?P.resolve(null):(Xo()<=ue.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(t)),this.os(e,s,t,bU(i,-1)).next(a=>a))})}rs(e,t){let r=new Xe(qS(e));return t.forEach((i,o)=>{wh(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Xo()<=ue.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",es(t)),this.Zi.getDocumentsMatchingQuery(e,t,Oi.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Gv=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Fe(me),this.cs=new ir(o=>b_(o),C_),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pv(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Ej(n,e,t,r){return new Gv(n,e,t,r)}function uA(n,e){return v(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=fe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Dj(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),_=P.resolve();return m.forEach(S=>{_=_.next(()=>h.getEntry(u,S)).next(k=>{let M=l.docVersions.get(S);De(M!==null),k.version.compareTo(M)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lA(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function bj(n,e){let t=J(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Gr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Gr.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(lt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(k,M,U){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(m,_,h)&&a.push(t.Gr.updateTargetData(o,_))});let u=or(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Cj(o,s,e.documentUpdates).next(h=>{u=h.Is,l=h.ds})),!r.isEqual(ne.min())){let h=t.Gr.getLastRemoteSnapshotVersion(o).next(p=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.us=i,o))}function Cj(n,e,t){let r=fe(),i=fe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=or();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:s,ds:i}})}function Tj(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sj(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new hc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function Wv(n,e,t){return v(this,null,function*(){let r=J(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ws(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function bS(n,e,t){let r=J(n),i=ne.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=J(u),m=p.cs.get(h);return m!==void 0?P.resolve(p.us.get(m)):p.Gr.getTargetData(l,h)}(r,s,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:fe())).next(a=>(Aj(r,$U(e),a),{documents:a,Es:o})))}function Aj(n,e,t){let r=n.ls.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var th=class{constructor(){this.activeTargetIds=KU()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Kv=class{constructor(){this._o=new th,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new th,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qv=class{uo(e){}shutdown(){}};var nh=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Od=null;function jy(){return Od===null?Od=function(){return 268435456+Math.round(2147483648*Math.random())}():Od++,"0x"+Od.toString(16)}var Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Yv=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var ut="WebChannelConnection",Zv=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=jy(),u=this.No(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,o,s),this.Lo(t,u,l,i).then(h=>(j("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ss("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_s}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=Rj[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=jy();return new Promise((s,a)=>{let u=new ky;u.setWithCredentials(!0),u.listenOnce(Oy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:let h=u.getResponseJson();j(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nc.TIMEOUT:j(ut,`RPC '${e}' ${o} timed out`),a(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:let p=u.getStatus();if(j(ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let S=function(M){let U=M.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(U)>=0?U:x.UNKNOWN}(_.status);a(new B(S,_.message))}else a(new B(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(x.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{j(ut,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);j(ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}qo(e,t,r){let i=jy(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ly(),a=Vy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,_=!1,S=new Yv({Eo:M=>{_?j(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(j(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(ut,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Ao:()=>p.close()}),k=(M,U,q)=>{M.listen(U,G=>{try{q(G)}catch(ae){setTimeout(()=>{throw ae},0)}})};return k(p,Jo.EventType.OPEN,()=>{_||(j(ut,`RPC '${e}' stream ${i} transport opened.`),S.So())}),k(p,Jo.EventType.CLOSE,()=>{_||(_=!0,j(ut,`RPC '${e}' stream ${i} transport closed`),S.Do())}),k(p,Jo.EventType.ERROR,M=>{_||(_=!0,ss(ut,`RPC '${e}' stream ${i} transport errored:`,M),S.Do(new B(x.UNAVAILABLE,"The operation could not be completed")))}),k(p,Jo.EventType.MESSAGE,M=>{var U;if(!_){let q=M.data[0];De(!!q);let G=q,ae=G?.error||((U=G[0])===null||U===void 0?void 0:U.error);if(ae){j(ut,`RPC '${e}' stream ${i} received error:`,ae);let _e=ae.status,pe=function(w){let E=$e[w];if(E!==void 0)return tA(E)}(_e),D=ae.message;pe===void 0&&(pe=x.INTERNAL,D="Unknown error status: "+_e+" with message "+ae.message),_=!0,S.Do(new B(pe,D)),p.close()}else j(ut,`RPC '${e}' stream ${i} received:`,q),S.vo(q)}}),k(a,Fy.STAT_EVENT,M=>{M.stat===xd.PROXY?j(ut,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===xd.NOPROXY&&j(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}};function By(){return typeof document<"u"?document:null}function Eh(n){return new Iv(n,!0)}var rh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var ih=class{constructor(e,t,r,i,o,s,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new rh(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return v(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return v(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return v(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>v(this,null,function*(){this.state=0,this.start()}))}d_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Jv=class extends ih{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=uj(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?Cn(s.readTime):ne.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=bv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=lv(u)?{documents:hj(o,u)}:{query:fj(o,u).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nA(o,s.resumeToken);let l=wv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=Zd(o,s.snapshotVersion.toTimestamp());let l=wv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=gj(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=bv(this.serializer),t.removeTarget=e,this.c_(t)}},Xv=class extends ih{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=dj(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=bv(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lj(this.serializer,r))};this.c_(t)}};var e_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,Ev(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,Ev(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},t_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(tr(t),this.C_=!1):j("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var n_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Bi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=J(u);l.k_.add(4),yield wc(l),l.K_.set("Unknown"),l.k_.delete(4),yield Dh(l)})}(this))}))}),this.K_=new t_(r,i)}};function Dh(n){return v(this,null,function*(){if(Bi(n))for(let e of n.q_)yield e(!0)})}function wc(n){return v(this,null,function*(){for(let e of n.q_)yield e(!1)})}function dA(n,e){let t=J(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),x_(t)?N_(t):Es(t).s_()&&M_(t,e))}function R_(n,e){let t=J(n),r=Es(t);t.L_.delete(e),r.s_()&&hA(t,e),t.L_.size===0&&(r.s_()?r.a_():Bi(t)&&t.K_.set("Unknown"))}function M_(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Es(n).V_(e)}function hA(n,e){n.U_.xe(e),Es(n).m_(e)}function N_(n){n.U_=new _v({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Es(n).start(),n.K_.F_()}function x_(n){return Bi(n)&&!Es(n).i_()&&n.L_.size>0}function Bi(n){return J(n).k_.size===0}function fA(n){n.U_=void 0}function Mj(n){return v(this,null,function*(){n.K_.set("Online")})}function Nj(n){return v(this,null,function*(){n.L_.forEach((e,t)=>{M_(n,e)})})}function xj(n,e){return v(this,null,function*(){fA(n),x_(n)?(n.K_.O_(e),N_(n)):n.K_.set("Unknown")})}function Pj(n,e,t){return v(this,null,function*(){if(n.K_.set("Online"),e instanceof Qd&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oh(n,r)}else if(e instanceof is?n.U_.$e(e):e instanceof Kd?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(ne.min()))try{let r=yield lA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.L_.get(l);h&&o.L_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.L_.get(u);if(!h)return;o.L_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),hA(o,u);let p=new hc(h.target,u,l,h.sequenceNumber);M_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield oh(n,r)}})}function oh(n,e,t){return v(this,null,function*(){if(!ws(e))throw e;n.k_.add(1),yield wc(n),n.K_.set("Offline"),t||(t=()=>lA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Dh(n)}))})}function pA(n,e){return e().catch(t=>oh(n,t,e))}function bh(n){return v(this,null,function*(){let e=J(n),t=Qr(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;kj(e);)try{let i=yield Tj(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,Oj(e,i)}catch(i){yield oh(e,i)}gA(e)&&mA(e)})}function kj(n){return Bi(n)&&n.B_.length<10}function Oj(n,e){n.B_.push(e);let t=Qr(n);t.s_()&&t.f_&&t.g_(e.mutations)}function gA(n){return Bi(n)&&!Qr(n).i_()&&n.B_.length>0}function mA(n){Qr(n).start()}function Fj(n){return v(this,null,function*(){Qr(n).w_()})}function Vj(n){return v(this,null,function*(){let e=Qr(n);for(let t of n.B_)e.g_(t.mutations)})}function Lj(n,e,t){return v(this,null,function*(){let r=n.B_.shift(),i=gv.from(r,e,t);yield pA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bh(n)})}function Uj(n,e){return v(this,null,function*(){e&&Qr(n).f_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return tj(s)&&s!==x.ABORTED}(i.code)){let o=r.B_.shift();Qr(r).__(),yield pA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield bh(r)}})}(n,e)),gA(n)&&mA(n)})}function CS(n,e){return v(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Bi(t);t.k_.add(3),yield wc(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Dh(t)})}function jj(n,e){return v(this,null,function*(){let t=J(n);e?(t.k_.delete(2),yield Dh(t)):e||(t.k_.add(2),yield wc(t),t.K_.set("Unknown"))})}function Es(n){return n.W_||(n.W_=function(t,r,i){let o=J(t);return o.b_(),new Jv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:Mj.bind(null,n),mo:Nj.bind(null,n),po:xj.bind(null,n),R_:Pj.bind(null,n)}),n.q_.push(e=>v(this,null,function*(){e?(n.W_.__(),x_(n)?N_(n):n.K_.set("Unknown")):(yield n.W_.stop(),fA(n))}))),n.W_}function Qr(n){return n.G_||(n.G_=function(t,r,i){let o=J(t);return o.b_(),new Xv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Fj.bind(null,n),po:Uj.bind(null,n),p_:Vj.bind(null,n),y_:Lj.bind(null,n)}),n.q_.push(e=>v(this,null,function*(){e?(n.G_.__(),yield bh(n)):(yield n.G_.stop(),n.B_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var r_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ch(n,e){if(tr("AsyncQueue",`${e}: ${n}`),ws(n))return new B(x.UNAVAILABLE,`${e}: ${n}`);throw n}var sh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=rc(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ah=class{constructor(){this.z_=new Fe(K.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Q():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},ys=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,sh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var i_=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},o_=class{constructor(){this.queries=TS(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=J(t),o=i.queries;i.queries=TS(),o.forEach((s,a)=>{for(let u of a.J_)u.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function TS(){return new ir(n=>HS(n),Ih)}function yA(n,e){return v(this,null,function*(){let t=J(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new i_,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ch(s,`Initialization of query '${es(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&P_(t)})}function vA(n,e){return v(this,null,function*(){let t=J(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Bj(n,e){let t=J(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&P_(t)}function $j(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function P_(n){n.X_.forEach(e=>{e.next()})}var s_,SS;(SS=s_||(s_={})).na="default",SS.Cache="cache";var ch=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==s_.Cache}};var uh=class{constructor(e){this.key=e}},lh=class{constructor(e){this.key=e}},a_=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=fe(),this.mutatedKeys=fe(),this.Va=qS(e),this.ma=new sh(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new ah,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=wh(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),M=!1;m&&_?m.data.isEqual(_.data)?S!==k&&(r.track({type:3,doc:_}),M=!0):this.ya(m,_)||(r.track({type:2,doc:_}),M=!0,(u&&this.Va(_,u)>0||l&&this.Va(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),M=!0):m&&!_&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(_?(s=s.add(_),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((h,p)=>function(_,S){let k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return k(_)-k(S)}(h.type,p.type)||this.Va(h.doc,p.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,s.length!==0||l?{snapshot:new ys(this.query,e.ma,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ah,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=fe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new lh(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new uh(r))}),t}va(e){this.Ea=e.Es,this.Ra=fe();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ys.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},c_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},u_=class{constructor(e){this.key=e,this.Fa=!1}},l_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new ir(a=>HS(a),Ih),this.Oa=new Map,this.Na=new Set,this.Ba=new Fe(K.comparator),this.La=new Map,this.ka=new pc,this.qa={},this.Qa=new Map,this.Ka=fc.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function Hj(n,e,t=!0){return v(this,null,function*(){let r=bA(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield _A(r,e,t,!0),i})}function qj(n,e){return v(this,null,function*(){let t=bA(n);yield _A(t,e,!0,!1)})}function _A(n,e,t,r){return v(this,null,function*(){let i=yield Sj(n.localStore,bn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield zj(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&dA(n.remoteStore,i),a})}function zj(n,e,t,r,i){return v(this,null,function*(){n.Ua=(p,m,_)=>function(k,M,U,q){return v(this,null,function*(){let G=M.view.ga(U);G.ss&&(G=yield bS(k.localStore,M.query,!1).then(({documents:D})=>M.view.ga(D,G)));let ae=q&&q.targetChanges.get(M.targetId),_e=q&&q.targetMismatches.get(M.targetId)!=null,pe=M.view.applyChanges(G,k.isPrimaryClient,ae,_e);return RS(k,M.targetId,pe.ba),pe.snapshot})}(n,p,m,_);let o=yield bS(n.localStore,e,!0),s=new a_(e,o.Es),a=s.ga(o.documents),u=dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);RS(n,t,l.ba);let h=new c_(e,t,s);return n.xa.set(e,h),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot})}function Gj(n,e,t){return v(this,null,function*(){let r=J(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!Ih(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Wv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&R_(r.remoteStore,i.targetId),d_(r,i.targetId)}).catch(Is))):(d_(r,i.targetId),yield Wv(r.localStore,i.targetId,!0))})}function Wj(n,e){return v(this,null,function*(){let t=J(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),R_(t.remoteStore,r.targetId))})}function Kj(n,e,t){return v(this,null,function*(){let r=tB(n);try{let i=yield function(s,a){let u=J(s),l=Oe.now(),h=a.reduce((_,S)=>_.add(S.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=or(),k=fe();return u.hs.getEntries(_,h).next(M=>{S=M,S.forEach((U,q)=>{q.isValidDocument()||(k=k.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(M=>{p=M;let U=[];for(let q of a){let G=ej(q,p.get(q.key).overlayedDocument);G!=null&&U.push(new sr(q.key,G,VS(G.value.mapValue),Pi.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,U,a)}).next(M=>{m=M;let U=M.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(_,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:GS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.qa[s.currentUser.toKey()];l||(l=new Fe(me)),l=l.insert(a,u),s.qa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ec(r,i.changes),yield bh(r.remoteStore)}catch(i){let o=Ch(i,"Failed to persist write");t.reject(o)}})}function IA(n,e){return v(this,null,function*(){let t=J(n);try{let r=yield bj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?De(s.Fa):i.removedDocuments.size>0&&(De(s.Fa),s.Fa=!1))}),yield Ec(t,r,e)}catch(r){yield Is(r)}})}function AS(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.J_)m.ea(a)&&(l=!0)}),l&&P_(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qj(n,e,t){return v(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new Fe(K.comparator);s=s.insert(o,an.newNoDocument(o,ne.min()));let a=fe().add(o),u=new Wd(ne.min(),new Map,new Fe(me),s,a);yield IA(r,u),r.Ba=r.Ba.remove(o),r.La.delete(e),k_(r)}else yield Wv(r.localStore,e,!1).then(()=>d_(r,e,t)).catch(Is)})}function Yj(n,e){return v(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield Dj(t.localStore,e);EA(t,r,null),wA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ec(t,i)}catch(i){yield Is(i)}})}function Zj(n,e,t){return v(this,null,function*(){let r=J(n);try{let i=yield function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(De(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);EA(r,e,t),wA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ec(r,i)}catch(i){yield Is(i)}})}function wA(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function EA(n,e,t){let r=J(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function d_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||DA(n,r)})}function DA(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(R_(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),k_(n))}function RS(n,e,t){for(let r of t)r instanceof uh?(n.ka.addReference(r.key,e),Jj(n,r)):r instanceof lh?(j("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||DA(n,r.key)):Q()}function Jj(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(j("SyncEngine","New document in limbo: "+t),n.Na.add(r),k_(n))}function k_(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new K(ke.fromString(e)),r=n.Ka.next();n.La.set(r,new u_(t)),n.Ba=n.Ba.insert(t,r),dA(n.remoteStore,new hc(bn(T_(t.path)),r,"TargetPurposeLimboResolution",w_.oe))}}function Ec(n,e,t){return v(this,null,function*(){let r=J(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{s.push(r.Ua(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Hv.zi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(u,l){return v(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Wi,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>P.forEach(m.Gi,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!ws(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.us.get(m),S=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(S);h.us=h.us.insert(m,k)}}})}(r.localStore,o))})}function Xj(n,e){return v(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield uA(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(u=>{u.reject(new B(x.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ec(t,r.Ts)}})}function eB(n,e){let t=J(n),r=t.La.get(e);if(r&&r.Fa)return fe().add(r.key);{let i=fe(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function bA(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qj.bind(null,e),e.Ma.R_=Bj.bind(null,e.eventManager),e.Ma.Wa=$j.bind(null,e.eventManager),e}function tB(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}var CA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Eh(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Ej(this.persistence,new zv,t.initialUser,this.serializer)}ja(t){return new Xd($v.ei,this.serializer)}za(t){return new Kv}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),h_=class extends CA{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){De(this.persistence.referenceDelegate instanceof eh);let r=this.persistence.referenceDelegate.garbageCollector;return new Rv(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Xd(r=>eh.ei(r,t),this.serializer)}};var nB=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,this.syncEngine),yield jj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new o_}()}createDatastore(t){let r=Eh(t.databaseInfo.databaseId),i=function(s){return new Zv(s)}(t.databaseInfo);return function(s,a,u,l){return new e_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new n_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>AS(this.syncEngine,r,0),function(){return nh.p()?new nh:new Qv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new l_(o,s,a,u,l,h);return p&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=J(o);j("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield wc(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var dh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var f_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ch(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $y(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield uA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function MS(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield TA(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>CS(e.remoteStore,i)),n._onlineComponents=e})}function TA(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $y(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ss("Error using user provided cache. Falling back to memory cache: "+t),yield $y(n,new CA)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield $y(n,new h_(void 0));return n._offlineComponents})}function SA(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield MS(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield MS(n,new nB))),n._onlineComponents})}function rB(n){return TA(n).then(e=>e.localStore)}function iB(n){return SA(n).then(e=>e.syncEngine)}function AA(n){return v(this,null,function*(){let e=yield SA(n),t=e.eventManager;return t.onListen=Hj.bind(null,e.syncEngine),t.onUnlisten=Gj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wj.bind(null,e.syncEngine),t})}function oB(n,e){let t=new Wt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield function(l,h){let p=J(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ch(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield rB(n),e,t)})),t.promise}function sB(n,e,t={}){let r=new Wt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new dh({next:m=>{h.eu(),s.enqueueAndForget(()=>vA(o,p));let _=m.docs.has(a);!_&&m.fromCache?l.reject(new B(x.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?l.reject(new B(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ch(T_(a.path),h,{includeMetadataChanges:!0,ua:!0});return yA(o,p)}(yield AA(n),n.asyncQueue,e,t,r)})),r.promise}function aB(n,e,t={}){let r=new Wt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new dh({next:m=>{h.eu(),s.enqueueAndForget(()=>vA(o,p)),m.fromCache&&u.source==="server"?l.reject(new B(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ch(a,h,{includeMetadataChanges:!0,ua:!0});return yA(o,p)}(yield AA(n),n.asyncQueue,e,t,r)})),r.promise}function RA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NS=new Map;function MA(n,e,t){if(!t)throw new B(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cB(n,e,t,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xS(n){if(!K.isDocumentKey(n))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PS(n){if(K.isDocumentKey(n))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function O_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=O_(n);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var hh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hy;switch(r.type){case"firstParty":return new Wy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=NS.get(t);r&&(j("ComponentProvider","Removing Datastore"),NS.delete(t),r.terminate())}(this),Promise.resolve()}};function uB(n,e,t,r={}){var i;let o=(n=Yr(n,vs))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Je.MOCK_USER;else{a=RC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(l)}n._authCredentials=new qy(new Ud(a,u))}}var fh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Wr=class n extends fh{constructor(e,t,r){super(e,t,T_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Th(n,e,...t){if(n=wt(n),MA("collection","path",e),n instanceof vs){let r=ke.fromString(e,...t);return PS(r),new Wr(n,null,r)}{if(!(n instanceof kt||n instanceof Wr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return PS(r),new Wr(n.firestore,null,r)}}function F_(n,e,...t){if(n=wt(n),arguments.length===1&&(e=jd.newId()),MA("doc","path",e),n instanceof vs){let r=ke.fromString(e,...t);return xS(r),new kt(n,null,new K(r))}{if(!(n instanceof kt||n instanceof Wr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return xS(r),new kt(n.firestore,n instanceof Wr?n.converter:null,new K(r))}}var ph=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new rh(this,"async_queue_retry"),this.fu=()=>{let r=By();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=By();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=By();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new Wt;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return v(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!ws(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=r_.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&Q()}verifyOperationInProgress(){}bu(){return v(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};var Ui=class extends vs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ph,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ph(e),this._firestoreClient=void 0,yield e}})}};function Ds(n,e){let t=typeof n=="object"?n:ld(),r=typeof n=="string"?n:e||"(default)",i=Ga(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=AC("firestore");o&&uB(i,...o)}return i}function Sh(n){if(n._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lB(n),n._firestoreClient}function lB(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Jy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new f_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var gc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(lt.fromBase64String(e))}catch(t){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var mc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gh=class{constructor(e){this._methodName=e}};var yc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var vc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var dB=/^__.*__$/,p_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Li(e,this.data,t,this.fieldTransforms)}};function NA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var g_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return mh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(NA(this.Mu)&&dB.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},m_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Eh(e)}$u(e,t,r,i=!1){return new g_({Mu:e,methodName:t,Ku:r,path:Pt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hB(n){let e=n._freezeSettings(),t=Eh(n._databaseId);return new m_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fB(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);OA("Data must be an object, but it was:",s,r);let a=PA(r,s),u,l;if(o.merge)u=new En(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=pB(e,p,t);if(!s.contains(m))throw new B(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mB(h,m)||h.push(m)}u=new En(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new p_(new sn(a),u,l)}function xA(n,e){if(kA(n=wt(n)))return OA("Unsupported field value:",e,n),PA(n,e);if(n instanceof gh)return function(r,i){if(!NA(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=xA(a,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Zd(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zd(i.serializer,o)}}if(r instanceof yc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gc)return{bytesValue:nA(i.serializer,r._byteString)};if(r instanceof kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:A_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return S_(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${O_(r)}`)}(n,e)}function PA(n,e){let t={};return kS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(n,(r,i)=>{let o=xA(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function kA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof yc||n instanceof gc||n instanceof kt||n instanceof gh||n instanceof vc)}function OA(n,e,t){if(!kA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=O_(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function pB(n,e,t){if((e=wt(e))instanceof mc)return e._internalPath;if(typeof e=="string")return FA(n,e);throw mh("Field path arguments must be of type string or ",n,!1,void 0,t)}var gB=new RegExp("[~\\*/\\[\\]]");function FA(n,e,t){if(e.search(gB)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mc(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(x.INVALID_ARGUMENT,a+n+u)}function mB(n,e){return n.some(t=>t.isEqual(e))}var yh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new y_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(VA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},y_=class extends yh{data(){return super.data()}};function VA(n,e){return typeof e=="string"?FA(n,e):e instanceof mc?e._internalPath:e._delegate._internalPath}function yB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var v_=class{convertValue(e,t="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ji(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new vc(o)}convertGeoPoint(e){return new yc(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_h(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){let t=nr(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ke.fromString(e);De(cA(r));let i=new qd(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(t)||tr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function vB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Gr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_c=class extends yh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(VA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},os=class extends _c{data(e={}){return super.data(e)}},__=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new os(this._firestore,this._userDataWriter,r.key,r,new Gr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:_B(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _B(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function LA(n){n=Yr(n,kt);let e=Yr(n.firestore,Ui);return sB(Sh(e),n._key).then(t=>wB(e,n,t))}var Ic=class extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}};function UA(n){n=Yr(n,kt);let e=Yr(n.firestore,Ui),t=Sh(e),r=new Ic(e);return oB(t,n._key).then(i=>new _c(e,r,n._key,i,new Gr(i!==null&&i.hasLocalMutations,!0),n.converter))}function jA(n){n=Yr(n,fh);let e=Yr(n.firestore,Ui),t=Sh(e),r=new Ic(e);return yB(n._query),aB(t,n._query).then(i=>new __(e,r,n,i))}function BA(n,e){let t=Yr(n.firestore,Ui),r=F_(n),i=vB(n.converter,e);return IB(t,[fB(hB(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Pi.exists(!1))]).then(()=>r)}function IB(n,e){return function(r,i){let o=new Wt;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Kj(yield iB(r),i,o)})),o.promise}(Sh(n),e)}function wB(n,e,t){let r=t.docs.get(e._key),i=new Ic(n);return new _c(n,i,e._key,r,new Gr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){_s=i})(Ur),Lr(new zt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ui(new zy(r.getProvider("auth-internal")),new Qy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),on(nS,"4.7.6",e),on(nS,"4.7.6","esm2017")})();var EB=n=>["/dashboard/user/",n];function DB(n,e){if(n&1&&(N(0,"tr")(1,"td"),O(2),R(),N(3,"td"),O(4),R(),N(5,"td"),O(6),R(),N(7,"td"),O(8),R(),N(9,"td"),O(10),R(),N(11,"td"),O(12),R(),N(13,"button",11),O(14," D\xE9tails "),R()()),n&2){let t,r=e.$implicit,i=Bn();W(2),Rt(" ",r.id," "),W(2),Ig(" ",r.get("nom")," ",r.get("prenom")," "),W(2),Rt(" ",r.get("age")," "),W(2),Rt(" ",r.get("email")," "),W(2),Rt(" ",(t=i.findLastWeight(r.data()))==null?null:t.unPoid," "),W(2),Rt(" ",i.dateToStringFormat(r.data().createdAt.toDate())," "),W(),be("routerLink",S0(8,EB,r.id))}}var bB=Yn(qr),CB=Ds(bB),Ah=class n{constructor(e){this.router=e;this.data=null}data;formattedDate=Date.toLocaleString();ngOnInit(){this.getData()}getData(){return v(this,null,function*(){let e=yield jA(Th(CB,"user"));this.data=e.docs,this.data.forEach(t=>{let r})})}logWeightMeasurements(e){e&&e.poids&&Array.isArray(e.poids)?e.poids.forEach(t=>{console.log(`Poids : ${t.unPoid} kg, Mesur\xE9 le : ${t.createdAt}`)}):console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`)}sortByDate(e,t="asc"){if(e&&e.poids&&Array.isArray(e.poids)){let r=e.poids.sort((o,s)=>{console.log("a=",o),console.log("b=",s);let a=o.createdAt.toDate().getTime();return s.createdAt.toDate().getTime()-a});console.log("Mesures de poids tri\xE9es par date :",r);let i=r[0];return r}else return console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`),[]}findLastWeight(e){if(console.log(e),console.log(typeof e),e&&e.poids&&Array.isArray(e.poids)){let r=e.poids.sort((i,o)=>{let s=i.createdAt.toDate().getTime();return o.createdAt.toDate().getTime()-s})[0];return{unPoid:r.unPoid,createdAt:r.createdAt.toDate()}}else return console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`),null}dateToStringFormat(e){let t,r={year:"numeric",month:"long",day:"numeric"},i=e.toLocaleDateString(void 0,r);return i===null?"":i}testFct(e){}static \u0275fac=function(t){return new(t||n)(ce(qt))};static \u0275cmp=Be({type:n,selectors:[["app-dashboard"]],decls:30,vars:1,consts:[[1,"p-6","bg-gray-100","min-h-screen"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"w-full","text-lef","overflow-auto","block"],[1,"w-full"],[1,"border-b","w-full"],[1,"py-2"],[4,"ngFor","ngForOf"],[1,"bg-blue-600","text-white","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300",3,"routerLink"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"header",1)(2,"h1",2),O(3,"Tableau de bord"),R()(),N(4,"div",1)(5,"h2",3),O(6,"Acc\xE8s rapide"),R(),Se(7,"div",4),R(),N(8,"div",5)(9,"h2",3),O(10,"Mes \xE9l\xE8ves"),R(),N(11,"table",6)(12,"thead",7)(13,"tr",8)(14,"th",9),O(15,"Identifiant"),R(),N(16,"th",9),O(17,"Client"),R(),N(18,"th",9),O(19,"\xC2ge"),R(),N(20,"th",9),O(21,"Adresse e-mail"),R(),N(22,"th",9),O(23,"Poids"),R(),N(24,"th",9),O(25,"Date d'inscription"),R(),N(26,"th",9),O(27,"Boutton"),R()()(),N(28,"tbody"),Me(29,DB,15,10,"tr",10),R()()()()),t&2&&(W(29),be("ngForOf",r.data))},dependencies:[it,Rr,yn,Pr],encapsulation:2})};function TB(n,e){n&1&&(N(0,"div",13),O(1," Veuillez entrer un email valide. "),R())}function SB(n,e){n&1&&(N(0,"div",13),O(1," Le mot de passe doit contenir au moins 6 caract\xE8res. "),R())}function AB(n,e){if(n&1){let t=_g();N(0,"div")(1,"form",4)(2,"div",5)(3,"label",6),O(4,"Email"),R(),Se(5,"input",7),Me(6,TB,2,0,"div",8),R(),N(7,"div",9)(8,"label",10),O(9,"Mot de passe"),R(),Se(10,"input",11),Me(11,SB,2,0,"div",8),R(),N(12,"button",12),mt("click",function(){$p(t);let i=Bn();return Hp(i.suivant())}),O(13," Suivant "),R()()()}if(n&2){let t,r,i,o=Bn();W(),be("formGroup",o.inscriptionForm),W(5),be("ngIf",((t=o.inscriptionForm.get("email"))==null?null:t.invalid)&&((t=o.inscriptionForm.get("email"))==null?null:t.touched)),W(5),be("ngIf",((r=o.inscriptionForm.get("password"))==null?null:r.invalid)&&((r=o.inscriptionForm.get("password"))==null?null:r.touched)),W(),be("disabled",((i=o.inscriptionForm.get("email"))==null?null:i.invalid)||((i=o.inscriptionForm.get("password"))==null?null:i.invalid))}}function RB(n,e){n&1&&(N(0,"div",13),O(1," Veuillez entrer votre nom. "),R())}function MB(n,e){n&1&&(N(0,"div",13),O(1," Veuillez entrer votre pr\xE9nom. "),R())}function NB(n,e){n&1&&(N(0,"div",13),O(1," Vous devez avoir au moins 18 ans. "),R())}function xB(n,e){n&1&&(N(0,"div",13),O(1," Veuillez entrer un poids valide (minimum 30 kg). "),R())}function PB(n,e){n&1&&(N(0,"div",13),O(1," Veuillez entrer un pseudo. "),R())}function kB(n,e){if(n&1){let t=_g();N(0,"div")(1,"form",4)(2,"div",5)(3,"label",14),O(4,"Nom"),R(),Se(5,"input",15),Me(6,RB,2,0,"div",8),R(),N(7,"div",5)(8,"label",16),O(9,"Pr\xE9nom"),R(),Se(10,"input",17),Me(11,MB,2,0,"div",8),R(),N(12,"div",5)(13,"label",18),O(14,"\xC2ge"),R(),Se(15,"input",19),Me(16,NB,2,0,"div",8),R(),N(17,"div",5)(18,"label",20),O(19,"Poids (kg)"),R(),Se(20,"input",21),Me(21,xB,2,0,"div",8),R(),N(22,"div",9)(23,"label",22),O(24,"Pseudo"),R(),Se(25,"input",23),Me(26,PB,2,0,"div",8),R(),N(27,"button",12),mt("click",function(){$p(t);let i=Bn();return Hp(i.soumettre())}),O(28," S'inscrire "),R()()()}if(n&2){let t,r,i,o,s,a=Bn();W(),be("formGroup",a.inscriptionForm),W(5),be("ngIf",((t=a.inscriptionForm.get("nom"))==null?null:t.invalid)&&((t=a.inscriptionForm.get("nom"))==null?null:t.touched)),W(5),be("ngIf",((r=a.inscriptionForm.get("prenom"))==null?null:r.invalid)&&((r=a.inscriptionForm.get("prenom"))==null?null:r.touched)),W(5),be("ngIf",((i=a.inscriptionForm.get("age"))==null?null:i.invalid)&&((i=a.inscriptionForm.get("age"))==null?null:i.touched)),W(5),be("ngIf",((o=a.inscriptionForm.get("poids"))==null?null:o.invalid)&&((o=a.inscriptionForm.get("poids"))==null?null:o.touched)),W(5),be("ngIf",((s=a.inscriptionForm.get("pseudo"))==null?null:s.invalid)&&((s=a.inscriptionForm.get("pseudo"))==null?null:s.touched)),W(),be("disabled",a.inscriptionForm.invalid)}}var OB=Yn(qr),FB=Ds(OB),Rh=class n{constructor(e){this.fb=e;this.inscriptionForm=this.fb.group({email:["",[Ge.required,Ge.email]],password:["",[Ge.required,Ge.minLength(6)]],nom:["",Ge.required],prenom:["",Ge.required],age:[18,[Ge.required,Ge.min(18)]],poids:[30,[Ge.required,Ge.min(30)]],pseudo:["",Ge.required]})}inscriptionForm;etape=1;suivant(){this.etape===1&&this.inscriptionForm.get("email")?.valid&&this.inscriptionForm?.get("password")?.valid&&(this.etape=2)}soumettre(){return v(this,null,function*(){if(this.inscriptionForm.valid){let e=Date.now().toString(),t=yield BA(Th(FB,"user"),{email:this.inscriptionForm.value.email,nom:this.inscriptionForm.value.nom,prenom:this.inscriptionForm.value.prenom,age:this.inscriptionForm.value.age,poids:[{unPoid:this.inscriptionForm.value.poids,createdAt:Oe.now()}],pseudo:this.inscriptionForm.value.pseudo,createdAt:Oe.now(),role:"client"}).then(r=>{console.log("Document \xE9crit avec ID :",r.id," ts :",e)}).catch(r=>{console.error("Erreur lors de l'ajout du document :",r)});console.log("Apr\xE8s \xE9criture du Document")}else console.error("Formulaire invalide")})}static \u0275fac=function(t){return new(t||n)(ce(rd))};static \u0275cmp=Be({type:n,selectors:[["app-sign-up"]],decls:6,vars:2,consts:[[1,"bg-gray-100","flex","items-center","justify-center","h-screen"],[1,"container","mx-auto","p-4","max-w-md","bg-white","rounded-lg","shadow-md"],[1,"text-2xl","font-bold","text-center","mb-6","text-gray-800"],[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email","type","email","placeholder","Votre email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password","placeholder","Votre mot de passe",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","button",1,"w-full","bg-indigo-600","text-white","py-2","px-4","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-red-500","text-sm","mt-1"],["for","nom",1,"block","text-sm","font-medium","text-gray-700"],["id","nom","formControlName","nom","type","text","placeholder","Votre nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","prenom",1,"block","text-sm","font-medium","text-gray-700"],["id","prenom","formControlName","prenom","type","text","placeholder","Votre pr\xE9nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","age",1,"block","text-sm","font-medium","text-gray-700"],["id","age","formControlName","age","type","number","placeholder","Votre \xE2ge",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","poids",1,"block","text-sm","font-medium","text-gray-700"],["id","poids","formControlName","poids","type","number","placeholder","Votre poids",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","pseudo",1,"block","text-sm","font-medium","text-gray-700"],["id","pseudo","formControlName","pseudo","type","text","placeholder","Votre pseudo",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"h2",2),O(3,"Inscription"),R(),Me(4,AB,14,4,"div",3)(5,kB,29,7,"div",3),R()()),t&2&&(W(4),be("ngIf",r.etape===1),W(),be("ngIf",r.etape===2))},dependencies:[id,nd,Wo,Pm,Xl,ed,Ba,$a,it,_l],encapsulation:2})};function VB(n,e){n&1&&(N(0,"div",15)(1,"div",16)(2,"a",17),O(3,"Accueil"),R(),N(4,"a",18),O(5,"Services"),R(),N(6,"a",19),O(7,"Contact"),R(),N(8,"button",20),O(9," Se connecter "),R()()())}var Zr=class n{isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-nav-bar"]],decls:20,vars:1,consts:[[1,"bg-white","shadow-md"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","h-16"],[1,"flex-shrink-0","flex","items-center"],["routerLink","/",1,"text-xl","font-bold","text-gray-800","logo"],[1,"hidden","md:flex","space-x-4","items-center"],["routerLink","/",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/service",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/contact",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/auth",1,"bg-blue-600","text-white","font-semibold","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300"],[1,"flex","items-center","md:hidden"],["type","button",1,"inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-800","hover:text-indigo-600","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],["class","md:hidden",4,"ngIf"],[1,"md:hidden"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3"],["routerLink","/",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/services",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/contact",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/auth",1,"bg-blue-600","text-white","font-semibold","py-2","px-6","rounded-lg","shadow-md","hover:bg-blue-700","transition","duration-300","ease-in-out","transform","hover:scale-105"]],template:function(t,r){t&1&&(N(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),O(5,"MKS"),R()(),N(6,"div",5)(7,"a",6),O(8,"Accueil"),R(),N(9,"a",7),O(10,"Services"),R(),N(11,"a",8),O(12,"Contact"),R(),N(13,"button",9),O(14," Se connecter "),R()(),N(15,"div",10)(16,"button",11),mt("click",function(){return r.toggleMenu()}),sD(),N(17,"svg",12),Se(18,"path",13),R()()()()(),Me(19,VB,10,0,"div",14),R()),t&2&&(W(19),be("ngIf",r.isMenuOpen))},dependencies:[it,_l,yn,Pr],encapsulation:2})};var Mh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-home"]],decls:12,vars:0,consts:[[1,"bg-gray-900","text-white","py-20"],[1,"container","mx-auto","px-6","text-center"],[1,"text-5xl","font-bold","mb-6"],[1,"text-xl","mb-8"],[1,"flex","justify-center","space-x-4"],["routerLink","/programs",1,"bg-blue-600","text-white","font-semibold","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300"],["routerLink","/contact",1,"bg-transparent","border","border-white","text-white","font-semibold","py-3","px-8","rounded-lg","hover:bg-white","hover:text-gray-900","transition","duration-300"]],template:function(t,r){t&1&&(Se(0,"app-nav-bar"),N(1,"section",0)(2,"div",1)(3,"h1",2),O(4,"Transformez votre corps, transformez votre vie"),R(),N(5,"p",3),O(6," Avec un coaching personnalis\xE9, atteignez vos objectifs sportifs et adoptez un mode de vie sain. "),R(),N(7,"div",4)(8,"a",5),O(9," D\xE9couvrir nos programmes "),R(),N(10,"a",6),O(11," Nous contacter "),R()()()())},dependencies:[it,yn,Pr,Zr],encapsulation:2})};var Nh=class n{static app=Yn(qr);static db=Ds(n.app);constructor(){}static getDetails(e){return v(this,null,function*(){console.log("Service getDetails()");let t=F_(n.db,"user",e);try{console.log("is data cached ?");let r=yield UA(t);return r.exists()?(console.log("data is cached !"),console.log("Cached document data:",r.data())):console.log("No such document!"),r.exists()?new Jr(r.id,r.data().nom,r.data().prenom,r.data().email,r.data().age,r.data().createdAt,r.data().poids):Jr.construct()}catch{console.log("errror getting cached document, dw");let i=yield LA(t);return console.log("retrieving Document data from server"),i.exists()?(console.log("found it"),new Jr(i.id,i.data().nom,i.data().prenom,i.data().email,i.data().age,i.data().createdAt,i.data().poids)):(console.log("No such document!"),Jr.construct())}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},Jr=class n{userId;nom;prenom;email;age;createdAt;poids;static construct(){return new n("","","","",0,new Oe(0,0),new Array)}constructor(e,t,r,i,o,s,a){this.userId=e,this.nom=t,this.prenom=r,this.email=i,this.age=o,this.createdAt=s,this.poids=[],a.forEach(u=>{this.poids.push(new V_(u.unPoid,u.createdAt))})}toString(){return`User: ${this.nom} ${this.prenom} (${this.email}), \xC2ge: ${this.age}, Cr\xE9\xE9 le: ${this.createdAt.toDate().toLocaleDateString()}. Mesures : [${this.poids.toString()}]`}},V_=class{poid;createdAt;constructor(e,t){this.poid=e,this.createdAt=t}toString(){let e="{";return e+=`poid: ${this.poid},`,e+=`createdAt: ${this.createdAt.toString()}`,e+"}"}};function LB(n,e){if(n&1&&(N(0,"tr",13)(1,"td",14),O(2),R(),N(3,"td",14),O(4),R()()),n&2){let t=e.$implicit;W(2),nn(t.createdAt),W(2),nn(t.poid)}}var xh=class n{userId;count=Sr(0);user=Sr(Jr.construct());constructor(){this.userId=""}set id(e){console.log(`UserDetailComponent: recieved ${e} from the route`),this.userId=e,Nh.getDetails(e).then(r=>{console.log("in input",r.toString()),this.user.set(r),console.log(this.user()),this.count.set(3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-user-details"]],inputs:{id:"id"},decls:37,vars:5,consts:[[1,"bg-gray-100","min-h-screen","p-8"],[1,"max-w-4xl","mx-auto","bg-white","rounded-lg","shadow-md","p-6"],[1,"text-3xl","font-bold","text-gray-800","mb-6"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"space-y-4"],[1,"font-medium","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition duration-200",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition","duration-200"],[1,"px-6","py-4","text-sm","text-gray-700"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"h1",2),O(3,"D\xE9tails de l'utilisateur"),R(),N(4,"div",3)(5,"h2",4),O(6,"Informations personnelles"),R(),N(7,"div",5)(8,"p")(9,"span",6),O(10,"Nom :"),R(),O(11),R(),N(12,"p")(13,"span",6),O(14,"Pr\xE9nom :"),R(),O(15),R(),N(16,"p")(17,"span",6),O(18,"Email :"),R(),O(19),R(),N(20,"p")(21,"span",6),O(22,"\xC2ge :"),R(),O(23),R()()(),N(24,"div")(25,"h2",4),O(26,"Historique des mesures de poids"),R(),N(27,"div",7)(28,"table",8)(29,"thead")(30,"tr",9)(31,"th",10),O(32,"Date"),R(),N(33,"th",10),O(34,"Poids (kg)"),R()()(),N(35,"tbody",11),Me(36,LB,5,2,"tr",12),R()()()()()()),t&2&&(W(11),Rt(" ",r.user().nom,""),W(4),Rt(" ",r.user().prenom,""),W(4),Rt(" ",r.user().email,""),W(4),Rt(" ",r.user().age,""),W(13),be("ngForOf",r.user().poids))},dependencies:[it,Rr,yn],encapsulation:2})};function UB(n,e){if(n&1&&(N(0,"li",6)(1,"span",7),O(2),R(),N(3,"span"),O(4),R()()),n&2){let t=e.$implicit;W(2),nn(t.day),W(2),nn(t.hours)}}var Ph=class n{coachingHours=[{day:"Lundi",hours:"8h00 - 12h00 / 14h00 - 18h00"},{day:"Mardi",hours:"8h00 - 12h00 / 14h00 - 18h00"},{day:"Mercredi",hours:"8h00 - 12h00"},{day:"Jeudi",hours:"8h00 - 12h00 / 14h00 - 18h00"},{day:"Vendredi",hours:"8h00 - 12h00 / 14h00 - 17h00"},{day:"Samedi",hours:"9h00 - 13h00"},{day:"Dimanche",hours:"Ferm\xE9"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-contact"]],decls:9,vars:1,consts:[[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","text-center","text-gray-800","mb-6"],[1,"bg-gray-100","p-6","rounded-lg","shadow-md","mb-6"],[1,"text-xl","font-semibold","mb-4"],[1,"space-y-2"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"font-medium"]],template:function(t,r){t&1&&(Se(0,"app-nav-bar"),N(1,"div",0)(2,"h2",1),O(3," Contact & Horaires "),R(),N(4,"div",2)(5,"h3",3),O(6,"Horaires de coaching"),R(),N(7,"ul",4),Me(8,UB,5,2,"li",5),R()()()),t&2&&(W(8),be("ngForOf",r.coachingHours))},dependencies:[it,Rr,Zr],encapsulation:2})};function jB(n,e){if(n&1&&(N(0,"div",4)(1,"span",5),O(2),R(),N(3,"h3",6),O(4),R(),N(5,"p",7),O(6),R()()),n&2){let t=e.$implicit;W(2),nn(t.icon),W(2),nn(t.title),W(2),nn(t.description)}}var kh=class n{services=[{title:"Coaching en salle",description:"Des s\xE9ances personnalis\xE9es en salle de sport avec un suivi adapt\xE9 \xE0 vos objectifs.",icon:"\u{1F3CB}\uFE0F"},{title:"Coaching \xE0 domicile",description:"Un entra\xEEnement adapt\xE9 chez vous, avec ou sans mat\xE9riel.",icon:"\u{1F3E0}"},{title:"Conseils en nutrition",description:"Un accompagnement sur votre alimentation pour maximiser vos r\xE9sultats.",icon:"\u{1F957}"},{title:"Coaching en ligne",description:"Un suivi \xE0 distance avec des programmes et conseils personnalis\xE9s.",icon:"\u{1F4BB}"},{title:"Pr\xE9paration physique",description:"Optimisez vos performances sportives gr\xE2ce \xE0 un entra\xEEnement structur\xE9.",icon:"\u{1F3C3}"}];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-service"]],decls:6,vars:1,consts:[[1,"container","mx-auto","p-6"],[1,"text-3xl","font-bold","text-center","text-gray-800","mb-6"],[1,"grid","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white p-6 rounded-lg shadow-md flex flex-col items-center text-center",4,"ngFor","ngForOf"],[1,"bg-white","p-6","rounded-lg","shadow-md","flex","flex-col","items-center","text-center"],[1,"text-5xl","mb-4"],[1,"text-xl","font-semibold","mb-2"],[1,"text-gray-600"]],template:function(t,r){t&1&&(Se(0,"app-nav-bar"),N(1,"div",0)(2,"h2",1),O(3," Nos Services "),R(),N(4,"div",2),Me(5,jB,7,3,"div",3),R()()),t&2&&(W(5),be("ngForOf",r.services))},dependencies:[it,Rr,Zr],encapsulation:2})};var $A=[{path:"auth",title:"Authentification",component:Md},{path:"dashboard",title:"Tableau de bord",component:Ah},{path:"signup",title:"Inscription",component:Rh},{path:"",title:"Accueil",component:Mh},{path:"dashboard/user/:id",title:"Detail d'un utilisateur",component:xh},{path:"contact",title:"Contact : Horaires",component:Ph},{path:"service",title:"Services propos\xE9s",component:kh}];var HA={providers:[R0({eventCoalescing:!0}),qb($A,wm())]};var Oh=class n{title="mks-coaching";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Be({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Se(0,"router-outlet")},dependencies:[gm],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient(180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100%);--red-to-pink-to-purple-horizontal-gradient: linear-gradient(90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100%);--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--gray-900);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}}']})};eb(Oh,HA).catch(n=>console.error(n));
