import{a as G}from"./chunk-2IRSJ543.js";import{a as A,b as f,c as y,d as F,e as M,g as I,h as R,i as T,j as k,k as N}from"./chunk-ZZW3FWVS.js";import{c as b,d as S,g as E}from"./chunk-RZVHLPUG.js";import{J as D}from"./chunk-UFMPGLG5.js";import{Da as _,Ia as p,Pa as w,R as c,Ra as a,Sa as i,Ta as n,Ua as h,Wa as g,Xa as x,_a as o,ta as r,ua as v,yb as C}from"./chunk-BYRLRRJK.js";import"./chunk-ECBXVGWK.js";function V(t,l){t&1&&(i(0,"p"),o(1,"Email invalide"),n())}function q(t,l){t&1&&(i(0,"p"),o(1,"Mot de passe invalide"),n())}function z(t,l){t&1&&(i(0,"li"),o(1,"Mot de passe doit contenir au moins une lettre majuscule."),n())}function P(t,l){t&1&&(i(0,"li"),o(1,"Mot de passe doit contenir au moins une lettre minuscule."),n())}function j(t,l){t&1&&(i(0,"li"),o(1,"Au moins un chiffre."),n())}function B(t,l){t&1&&(i(0,"li"),o(1,"Au moins un charact\xE8re sp\xE9cial."),n())}function Z(t,l){t&1&&(i(0,"li"),o(1,"Au moins 8 charact\xE8res."),n())}function $(t,l){if(t&1&&(p(0,V,2,0,"p")(1,q,2,0,"p"),i(2,"ul"),p(3,z,2,0,"li")(4,P,2,0,"li")(5,j,2,0,"li")(6,B,2,0,"li")(7,Z,2,0,"li"),n()),t&2){let e=x();a(e.email!=null&&e.email.invalid?0:-1),r(),a(e.password!=null&&e.password.invalid?1:-1),r(2),a(!(e.password==null||e.password.value==null)&&e.password.value.match("(?=.*[A-Z])")?-1:3),r(),a(!(e.password==null||e.password.value==null)&&e.password.value.match("(?=.*[a-z])")?-1:4),r(),a(!(e.password==null||e.password.value==null)&&e.password.value.match("(?=.*[0-9])")?-1:5),r(),a(!(e.password==null||e.password.value==null)&&e.password.value.match("(?=.*[!@#$%^&*])")?-1:6),r(),a(!(e.password==null||e.password.value==null)&&e.password.value.match(".{8,}")?-1:7)}}var re=/^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\D*\d).{8,}$/,d="AuthentificationComponent:",U=class t{constructor(l){this.router=l}formBuilder=c(k);authService=c(G);userService=c(D);profileForm=this.formBuilder.group({password:["",[f.required]],email:["",[f.required,f.email]]});get password(){return this.profileForm.get("password")}get email(){return this.profileForm.get("email")}onSubmit(){console.log("Click")}handleSubmit(){this.connect(this.profileForm.value.email,this.profileForm.value.password)}connect(l,e){console.log(d,"connecting"),this.authService.signIn(l,e).then(u=>{console.log(d,"connected successfully"),console.log(d,"FirebaseUser=",u),this.userService.getUserDocIdFromUID(u.uid).then(s=>{if(console.log(d,`idDocument=${s.docId}`),s.role==="admin")console.log(d,"redirecting to /dashboard"),this.router.navigate(["/dashboard"]);else if(s.role==="client")console.log(d,"redirecting to /user"),this.router.navigate(["/dashboard/user/",s.docId]);else throw new Error("role is supposed to be either admin or client")},s=>{console.error(s)})},u=>{console.log("failed to sign in")})}static \u0275fac=function(e){return new(e||t)(v(b))};static \u0275cmp=_({type:t,selectors:[["app-authentification"]],decls:25,vars:2,consts:[[1,"flex","items-center","justify-center","h-screen"],[1,"p-8","rounded-lg","shadow-lg","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Votre email","formControlName","email","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Votre mot de passe","required","","formControlName","password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","submit",1,"btn","btn-primary","w-full",3,"click"],[1,"mt-4","text-center","text-sm","text-gray-600"],["routerLink","/signup",1,"text-indigo-600","hover:text-indigo-500"],["disabled","",1,"text-indigo-600","hover:text-indigo-500"]],template:function(e,m){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Connexion"),n(),i(4,"form",3),g("ngSubmit",function(){return m.handleSubmit()}),i(5,"div",4)(6,"label",5),o(7,"Email"),n(),h(8,"input",6),n(),i(9,"div",7)(10,"label",8),o(11,"Mot de passe"),n(),h(12,"input",9),n(),i(13,"button",10),g("click",function(){return m.onSubmit()}),o(14," Se connecter "),n()(),i(15,"p",11),o(16," Pas encore de compte ? "),i(17,"a",12),o(18,"Inscrivez-vous"),n()(),i(19,"p",11),o(20," Mot de passe oubli\xE9 ? "),i(21,"a",13),o(22,"R\xE9initialisation"),n()(),i(23,"div"),p(24,$,8,7),n()()()),e&2&&(r(4),w("formGroup",m.profileForm),r(20),a(m.password!=null&&m.password.dirty&&(m.email!=null&&m.email.dirty)?24:-1))},dependencies:[N,M,A,y,F,T,I,R,C,E,S],encapsulation:2})};export{U as AuthentificationComponent,re as StrongPasswordRegx};
