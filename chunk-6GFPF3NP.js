import{a as A,c as C,d as U,e as F,f as $}from"./chunk-TJ3UZ2WI.js";import{g as w}from"./chunk-M3X7BIYS.js";import{C as I,F as N}from"./chunk-RUN7J5RS.js";import{$a as u,Fa as y,Ka as v,O as b,Ra as D,Ua as a,Va as o,_a as r,ab as c,d as x,ma as p,wa as m,xb as S,zb as E}from"./chunk-WWVZWKI3.js";var l=class n{static app=I(N);static db=U(n.app);constructor(){}static getDetails(t){return x(this,null,function*(){console.log("Service getDetails()");let i=C(n.db,"user",t);try{console.log("is data cached ?");let e=yield $(i);return e.exists()?(console.log("data is cached !"),console.log("Cached document data:",e.data())):console.log("No such document!"),e.exists()?new d(e.id,e.data().nom,e.data().prenom,e.data().email,e.data().age,e.data().createdAt,e.data().poids):d.construct()}catch{console.log("errror getting cached document, dw");let s=yield F(i);return console.log("retrieving Document data from server"),s.exists()?(console.log("found it"),new d(s.id,s.data().nom,s.data().prenom,s.data().email,s.data().age,s.data().createdAt,s.data().poids)):(console.log("No such document!"),d.construct())}})}static \u0275fac=function(i){return new(i||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})},d=class n{userId;nom;prenom;email;age;createdAt;poids;static construct(){return new n("","","","",0,new A(0,0),new Array)}constructor(t,i,e,s,f,P,M){this.userId=t,this.nom=i,this.prenom=e,this.email=s,this.age=f,this.createdAt=P,this.poids=[],M.forEach(h=>{this.poids.push(new g(h.unPoid,h.createdAt))})}toString(){return`User: ${this.nom} ${this.prenom} (${this.email}), \xC2ge: ${this.age}, Cr\xE9\xE9 le: ${this.createdAt.toDate().toLocaleDateString()}. Mesures : [${this.poids.toString()}]`}},g=class{poid;createdAt;constructor(t,i){this.poid=t,this.createdAt=i}toString(){let t="{";return t+=`poid: ${this.poid},`,t+=`createdAt: ${this.createdAt.toString()}`,t+"}"}};function R(n,t){if(n&1&&(a(0,"tr",13)(1,"td",14),r(2),o(),a(3,"td",14),r(4),o()()),n&2){let i=t.$implicit;m(2),u(i.createdAt),m(2),u(i.poid)}}var T=class n{userId;count=p(0);user=p(d.construct());constructor(){this.userId=""}set id(t){console.log(`UserDetailComponent: recieved ${t} from the route`),this.userId=t,l.getDetails(t).then(e=>{console.log("in input",e.toString()),this.user.set(e),console.log(this.user()),this.count.set(3)})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=y({type:n,selectors:[["app-user-details"]],inputs:{id:"id"},decls:37,vars:5,consts:[[1,"bg-gray-100","min-h-screen","p-8"],[1,"max-w-4xl","mx-auto","bg-white","rounded-lg","shadow-md","p-6"],[1,"text-3xl","font-bold","text-gray-800","mb-6"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"space-y-4"],[1,"font-medium","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition duration-200",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition","duration-200"],[1,"px-6","py-4","text-sm","text-gray-700"]],template:function(i,e){i&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"D\xE9tails de l'utilisateur"),o(),a(4,"div",3)(5,"h2",4),r(6,"Informations personnelles"),o(),a(7,"div",5)(8,"p")(9,"span",6),r(10,"Nom :"),o(),r(11),o(),a(12,"p")(13,"span",6),r(14,"Pr\xE9nom :"),o(),r(15),o(),a(16,"p")(17,"span",6),r(18,"Email :"),o(),r(19),o(),a(20,"p")(21,"span",6),r(22,"\xC2ge :"),o(),r(23),o()()(),a(24,"div")(25,"h2",4),r(26,"Historique des mesures de poids"),o(),a(27,"div",7)(28,"table",8)(29,"thead")(30,"tr",9)(31,"th",10),r(32,"Date"),o(),a(33,"th",10),r(34,"Poids (kg)"),o()()(),a(35,"tbody",11),v(36,R,5,2,"tr",12),o()()()()()()),i&2&&(m(11),c(" ",e.user().nom,""),m(4),c(" ",e.user().prenom,""),m(4),c(" ",e.user().email,""),m(4),c(" ",e.user().age,""),m(13),D("ngForOf",e.user().poids))},dependencies:[E,S,w],encapsulation:2})};export{T as UserDetailComponent};
