import{a as _,c as Q,d as B,e as W,f as q}from"./chunk-FE5AA5NU.js";import{g as z}from"./chunk-B4JK5RXM.js";import{C as Y,F as G}from"./chunk-Q2Q2F6FM.js";import{$a as D,Aa as P,Bb as j,Da as x,Ea as F,Ia as S,L as w,M as E,Pa as v,R as b,Ra as R,Sa as c,Ta as a,Ua as A,W as k,Xa as N,Ya as T,Za as L,_a as o,ab as p,ea as U,g as I,ga as Z,ha as s,ja as f,na as M,ta as d,xb as X,zb as $}from"./chunk-QCSRHSYY.js";import{d as g}from"./chunk-ECBXVGWK.js";var y=class i{static app=Y(G);static db=B(i.app);constructor(){}static getDetails(r){return g(this,null,function*(){console.log("Service getDetails()");let t=Q(i.db,"user",r);try{console.log("is data cached ?");let e=yield q(t);return e.exists()?(console.log("data is cached !"),console.log("Cached document data:",e.data())):console.log("No such document!"),e.exists()?new h(e.id,e.data().nom,e.data().prenom,e.data().email,e.data().age,e.data().createdAt,e.data().poids):h.construct()}catch{console.log("errror getting cached document, dw");let n=yield W(t);return console.log("retrieving Document data from server"),n.exists()?(console.log("found it"),new h(n.id,n.data().nom,n.data().prenom,n.data().email,n.data().age,n.data().createdAt,n.data().poids)):(console.log("No such document!"),h.construct())}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})},h=class i{userId;nom;prenom;email;age;createdAt;poids;static construct(){return new i("","","","",0,new _(0,0),new Array)}constructor(r,t,e,n,l,u,m){this.userId=r,this.nom=t,this.prenom=e,this.email=n,this.age=l,this.createdAt=u,this.poids=[],m.forEach(O=>{this.poids.push(new C(O.unPoid,O.createdAt))})}toString(){return`User: ${this.nom} ${this.prenom} (${this.email}), \xC2ge: ${this.age}, Cr\xE9\xE9 le: ${this.createdAt.toDate().toLocaleDateString()}. Mesures : [${this.poids.toString()}]`}},C=class{poid;createdAt;constructor(r,t){this.poid=r,this.createdAt=t}toString(){let r="{";return r+=`poid: ${this.poid},`,r+=`createdAt: ${this.createdAt.toString()}`,r+"}"}};var tt=["chart"],J=(()=>{class i{constructor(){this.chart=s(),this.annotations=s(),this.colors=s(),this.dataLabels=s(),this.series=s(),this.stroke=s(),this.labels=s(),this.legend=s(),this.markers=s(),this.noData=s(),this.fill=s(),this.tooltip=s(),this.plotOptions=s(),this.responsive=s(),this.xaxis=s(),this.yaxis=s(),this.forecastDataPoints=s(),this.grid=s(),this.states=s(),this.title=s(),this.subtitle=s(),this.theme=s(),this.autoUpdateSeries=s(!0),this.chartReady=Z(),this.chartInstance=f(null),this.chartElement=P.required("chart"),this.ngZone=b(U),this.isBrowser=j(b(M))}ngOnChanges(t){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{I.schedule(()=>this.hydrate(t))})}ngOnDestroy(){this.destroy()}hydrate(t){if(this.autoUpdateSeries()&&Object.keys(t).filter(n=>n!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return g(this,null,function*(){let{default:t}=yield import("./chunk-E4PNRQZ5.js");window.ApexCharts||=t;let e={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(u=>{let m=this[u]();m&&(e[u]=m)}),this.destroy();let l=this.ngZone.runOutsideAngular(()=>new t(this.chartElement().nativeElement,e));this.chartInstance.set(l),this.render(),this.chartReady.emit({chartObj:l})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(t,e,n,l){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(t,e,n,l))}updateSeries(t,e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(t,e))}appendSeries(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(t,e))}appendData(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(t))}highlightSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(t))}toggleSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(t))}showSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(t))}hideSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(t))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(t,e))}toggleDataPointSelection(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(t,e))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(t))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(t,e,n))}addYaxisAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(t,e,n))}addPointAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(t,e,n))}removeAnnotation(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(t,e))}clearAnnotations(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(t))}dataURI(t){return this.chartInstance()?.dataURI(t)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=x({type:i,selectors:[["apx-chart"]],viewQuery:function(e,n){e&1&&T(n.chartElement,tt,5),e&2&&L()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[k],decls:2,vars:0,consts:[["chart",""]],template:function(e,n){e&1&&A(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})();var K=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=E({})}}return i})();function it(i,r){if(i&1&&(c(0,"tr",14)(1,"td",15),o(2),a(),c(3,"td",15),o(4),a()()),i&2){let t=r.$implicit;d(2),D(t.createdAt.toMillis()),d(2),D(t.poid)}}function nt(i,r){if(i&1&&A(0,"apx-chart",13),i&2){let t=N();v("series",t.chartOptions.series)("chart",t.chartOptions.chart)("title",t.chartOptions.title)("xaxis",t.chartOptions.xaxis)("markers",t.chartOptions.markers)("annotations",t.chartOptions.annotations)}}var V=class i{userId;user=f(h.construct());chartOptions;constructor(){this.userId="",this.chartOptions=null}set id(r){console.log(`UserDetailComponent: recieved ${r} from the route`),this.userId=r,y.getDetails(r).then(e=>{console.log("in input",e.toString()),this.user.set(e),console.log(this.user());let n;n=Array.from(this.user().poids,(l,u)=>[l.createdAt.toMillis(),l.poid]),this.makeChart(n)})}makeChart(r){console.log("dataUser=",r),this.chartOptions={annotations:{yaxis:[{y:75,strokeDashArray:16,borderColor:"#ff0000",offsetX:0,offsetY:-6,width:"100%",label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:"Goal",textAnchor:"end",position:"right",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:"#777",fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:"apexcharts-yaxis-annotation-label",padding:{left:6,right:6,top:2,bottom:2}}}},{y:30,strokeDashArray:16,borderColor:"#ff0000",offsetX:0,offsetY:-6,width:"100%",label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:"Record personel",textAnchor:"end",position:"right",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:"#777",fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:"apexcharts-yaxis-annotation-label",padding:{left:6,right:6,top:2,bottom:2}}}}]},markers:{size:3,colors:["red"],strokeColors:"#fff",shape:"circle"},series:[{name:"Poids moyen au cours de ce mois",data:r}],chart:{height:350,type:"line"},title:{text:"Mon poids"},xaxis:{type:"datetime",min:new Date("31 Jan 2025").getTime(),tickAmount:6}}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=x({type:i,selectors:[["app-user-details"]],inputs:{id:"id"},decls:38,vars:6,consts:[[1,"bg-gray-100","min-h-screen","p-8"],[1,"max-w-4xl","mx-auto","bg-white","rounded-lg","shadow-md","p-6"],[1,"text-3xl","font-bold","text-gray-800","mb-6"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"space-y-4"],[1,"font-medium","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition duration-200",4,"ngFor","ngForOf"],[3,"series","chart","title","xaxis","markers","annotations"],[1,"hover:bg-gray-50","transition","duration-200"],[1,"px-6","py-4","text-sm","text-gray-700"]],template:function(t,e){t&1&&(c(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"D\xE9tails de l'utilisateur"),a(),c(4,"div",3)(5,"h2",4),o(6,"Informations personnelles"),a(),c(7,"div",5)(8,"p")(9,"span",6),o(10,"Nom :"),a(),o(11),a(),c(12,"p")(13,"span",6),o(14,"Pr\xE9nom :"),a(),o(15),a(),c(16,"p")(17,"span",6),o(18,"Email :"),a(),o(19),a(),c(20,"p")(21,"span",6),o(22,"\xC2ge :"),a(),o(23),a()()(),c(24,"div")(25,"h2",4),o(26,"Historique des mesures de poids"),a(),c(27,"div",7)(28,"table",8)(29,"thead")(30,"tr",9)(31,"th",10),o(32,"Date"),a(),c(33,"th",10),o(34,"Poids (kg)"),a()()(),c(35,"tbody",11),S(36,it,5,2,"tr",12),a()()()(),S(37,nt,1,6,"apx-chart",13),a()()),t&2&&(d(11),p(" ",e.user().nom,""),d(4),p(" ",e.user().prenom,""),d(4),p(" ",e.user().email,""),d(4),p(" ",e.user().age,""),d(13),v("ngForOf",e.user().poids),d(),R(e.chartOptions!==null?37:-1))},dependencies:[$,X,z,K,J],encapsulation:2})};export{V as UserDetailComponent};
