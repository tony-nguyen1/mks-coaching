import{a as G}from"./chunk-2IRSJ543.js";import{a as U,b as u,c as V,d as k,e as I,f as N,g as T,h as D,j as A,k as z}from"./chunk-ZZW3FWVS.js";import{C as S,H as M,J as q}from"./chunk-UFMPGLG5.js";import{Da as F,Ia as c,Pa as d,Sa as n,Ta as e,Ua as f,Va as h,Wa as w,X as b,Xa as g,Y as y,_a as o,ta as m,ua as x,xb as C,yb as E}from"./chunk-BYRLRRJK.js";import{d as _}from"./chunk-ECBXVGWK.js";function P(t,r){t&1&&(n(0,"div",13),o(1," Veuillez entrer un email valide. "),e())}function R(t,r){t&1&&(n(0,"div",13),o(1," Le mot de passe doit contenir au moins 8 caract\xE8res dont une majuscules, une minuscules, un chiffre. "),e())}function B(t,r){if(t&1){let i=h();n(0,"div")(1,"form",4)(2,"div",5)(3,"label",6),o(4,"Email"),e(),f(5,"input",7),c(6,P,2,0,"div",8),e(),n(7,"div",9)(8,"label",10),o(9,"Mot de passe"),e(),f(10,"input",11),c(11,R,2,0,"div",8),e(),n(12,"button",12),w("click",function(){b(i);let a=g();return y(a.suivant())}),o(13," Suivant "),e()()()}if(t&2){let i,l,a,p=g();m(),d("formGroup",p.inscriptionForm),m(5),d("ngIf",((i=p.inscriptionForm.get("email"))==null?null:i.invalid)&&((i=p.inscriptionForm.get("email"))==null?null:i.touched)),m(5),d("ngIf",((l=p.inscriptionForm.get("password"))==null?null:l.invalid)&&((l=p.inscriptionForm.get("password"))==null?null:l.touched)),m(),d("disabled",((a=p.inscriptionForm.get("email"))==null?null:a.invalid)||((a=p.inscriptionForm.get("password"))==null?null:a.invalid))}}function Z(t,r){t&1&&(n(0,"div",13),o(1," Veuillez entrer votre nom. "),e())}function L(t,r){t&1&&(n(0,"div",13),o(1," Veuillez entrer votre pr\xE9nom. "),e())}function $(t,r){t&1&&(n(0,"div",13),o(1," Vous devez avoir au moins 18 ans. "),e())}function H(t,r){t&1&&(n(0,"div",13),o(1," Veuillez entrer un poids valide (minimum 30 kg). "),e())}function J(t,r){t&1&&(n(0,"div",13),o(1," Veuillez entrer un pseudo. "),e())}function K(t,r){if(t&1){let i=h();n(0,"div")(1,"form",4)(2,"div",5)(3,"label",14),o(4,"Nom"),e(),f(5,"input",15),c(6,Z,2,0,"div",8),e(),n(7,"div",5)(8,"label",16),o(9,"Pr\xE9nom"),e(),f(10,"input",17),c(11,L,2,0,"div",8),e(),n(12,"div",5)(13,"label",18),o(14,"\xC2ge"),e(),f(15,"input",19),c(16,$,2,0,"div",8),e(),n(17,"div",5)(18,"label",20),o(19,"Poids (kg)"),e(),f(20,"input",21),c(21,H,2,0,"div",8),e(),n(22,"div",9)(23,"label",22),o(24,"Pseudo"),e(),f(25,"input",23),c(26,J,2,0,"div",8),e(),n(27,"button",24),w("click",function(){b(i);let a=g();return y(a.soumettre())}),o(28," S'inscrire "),e()()()}if(t&2){let i,l,a,p,v,s=g();m(),d("formGroup",s.inscriptionForm),m(5),d("ngIf",((i=s.inscriptionForm.get("nom"))==null?null:i.invalid)&&((i=s.inscriptionForm.get("nom"))==null?null:i.touched)),m(5),d("ngIf",((l=s.inscriptionForm.get("prenom"))==null?null:l.invalid)&&((l=s.inscriptionForm.get("prenom"))==null?null:l.touched)),m(5),d("ngIf",((a=s.inscriptionForm.get("age"))==null?null:a.invalid)&&((a=s.inscriptionForm.get("age"))==null?null:a.touched)),m(5),d("ngIf",((p=s.inscriptionForm.get("poids"))==null?null:p.invalid)&&((p=s.inscriptionForm.get("poids"))==null?null:p.touched)),m(5),d("ngIf",((v=s.inscriptionForm.get("pseudo"))==null?null:v.invalid)&&((v=s.inscriptionForm.get("pseudo"))==null?null:v.touched)),m(),d("disabled",s.inscriptionForm.invalid)}}var O=/^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\D*\d).{8,}$/,j=class t{constructor(r,i,l){this.fb=r;this.userService=i;this.authService=l;this.inscriptionForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.pattern(O)]],nom:["",u.required],prenom:["",u.required],age:[18,[u.required,u.min(18)]],poids:[30,[u.required,u.min(30)]],pseudo:["",u.required]})}inscriptionForm;etape=1;suivant(){this.etape===1&&this.inscriptionForm.get("email")?.valid&&this.inscriptionForm?.get("password")?.valid&&(this.etape=2)}soumettre(){return _(this,null,function*(){if(this.inscriptionForm.valid){let r=new M("",this.inscriptionForm.value.nom,this.inscriptionForm.value.prenom,this.inscriptionForm.value.email,this.inscriptionForm.value.age,S.now(),[{unPoid:this.inscriptionForm.value.poids,createdAt:S.now()}],"client");yield this.authService.signUp(this.inscriptionForm.value.email,this.inscriptionForm.value.password).then(i=>_(this,null,function*(){yield this.foo(r)}),i=>{throw new Error("Something went wrong while signing up a new user.")})}else console.error("Formulaire invalide")})}foo(r){return _(this,null,function*(){yield this.userService.createUser(r).then(i=>{console.log("Document \xE9crit avec ID :",i.id," ts :",r.createdAt.toDate().toString())}).catch(i=>{console.error("Erreur lors de l'ajout du document :",i)}),console.log("Apr\xE8s \xE9criture du Document")})}static \u0275fac=function(i){return new(i||t)(x(A),x(q),x(G))};static \u0275cmp=F({type:t,selectors:[["app-sign-up"]],decls:6,vars:2,consts:[[1,"flex","items-center","justify-center","h-screen"],[1,"container","mx-auto","p-4","max-w-md","bg-white","rounded-lg","shadow-md"],[1,"text-2xl","font-bold","text-center","mb-6"],[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email","type","email","placeholder","Votre email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password","placeholder","Votre mot de passe",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","button",1,"w-full","btn","btn-primary",3,"click","disabled"],[1,"text-red-500","text-sm","mt-1"],["for","nom",1,"block","text-sm","font-medium","text-gray-700"],["id","nom","formControlName","nom","type","text","placeholder","Votre nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","prenom",1,"block","text-sm","font-medium","text-gray-700"],["id","prenom","formControlName","prenom","type","text","placeholder","Votre pr\xE9nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","age",1,"block","text-sm","font-medium","text-gray-700"],["id","age","formControlName","age","type","number","placeholder","Votre \xE2ge",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","poids",1,"block","text-sm","font-medium","text-gray-700"],["id","poids","formControlName","poids","type","number","placeholder","Votre poids",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","pseudo",1,"block","text-sm","font-medium","text-gray-700"],["id","pseudo","formControlName","pseudo","type","text","placeholder","Votre pseudo",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","button",1,"w-full","btn","btn-primary","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"click","disabled"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Inscription"),e(),c(4,B,14,4,"div",3)(5,K,29,7,"div",3),e()()),i&2&&(m(4),d("ngIf",l.etape===1),m(),d("ngIf",l.etape===2))},dependencies:[z,I,U,N,V,k,T,D,E,C],encapsulation:2})};export{j as SignUpComponent,O as StrongPasswordRegx};
