var DR=Object.defineProperty,bR=Object.defineProperties;var CR=Object.getOwnPropertyDescriptors;var $I=Object.getOwnPropertySymbols,TR=Object.getPrototypeOf,SR=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable,RR=Reflect.get;var HI=(n,e,t)=>e in n?DR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})SR.call(e,t)&&HI(n,t,e[t]);if($I)for(var t of $I(e))AR.call(e,t)&&HI(n,t,e[t]);return n},ae=(n,e)=>bR(n,CR(e));var cr=(n,e,t)=>RR(TR(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function uf(n,e){return Object.is(n,e)}var He=null,Fc=!1,lf=1,kt=Symbol("SIGNAL");function he(n){let e=He;return He=n,e}function qI(){return He}var Bs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lc(n){if(Fc)throw new Error("");if(He===null)return;He.consumerOnSignalRead(n);let e=He.nextProducerIndex++;if(Bc(He),e<He.producerNode.length&&He.producerNode[e]!==n&&js(He)){let t=He.producerNode[e];jc(t,He.producerIndexOfThis[e])}He.producerNode[e]!==n&&(He.producerNode[e]=n,He.producerIndexOfThis[e]=js(He)?WI(n,He,e):0),He.producerLastReadVersion[e]=n.version}function MR(){lf++}function df(n){if(!(js(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lf)){if(!n.producerMustRecompute(n)&&!ff(n)){cf(n);return}n.producerRecomputeValue(n),cf(n)}}function zI(n){if(n.liveConsumerNode===void 0)return;let e=Fc;Fc=!0;try{for(let t of n.liveConsumerNode)t.dirty||NR(t)}finally{Fc=e}}function GI(){return He?.consumerAllowSignalWrites!==!1}function NR(n){n.dirty=!0,zI(n),n.consumerMarkedDirty?.(n)}function cf(n){n.dirty=!1,n.lastCleanEpoch=lf}function Uc(n){return n&&(n.nextProducerIndex=0),he(n)}function hf(n,e){if(he(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(js(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)jc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ff(n){Bc(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(df(t),r!==t.version))return!0}return!1}function pf(n){if(Bc(n),js(n))for(let e=0;e<n.producerNode.length;e++)jc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function WI(n,e,t){if(KI(n),n.liveConsumerNode.length===0&&QI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=WI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function jc(n,e){if(KI(n),n.liveConsumerNode.length===1&&QI(n))for(let r=0;r<n.producerNode.length;r++)jc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bc(i),i.producerIndexOfThis[r]=e}}function js(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QI(n){return n.producerNode!==void 0}function YI(n){let e=Object.create(xR);e.computation=n;let t=()=>{if(df(e),Lc(e),e.value===Vc)throw e.error;return e.value};return t[kt]=e,t}var sf=Symbol("UNSET"),af=Symbol("COMPUTING"),Vc=Symbol("ERRORED"),xR=ae(L({},Bs),{value:sf,dirty:!0,error:null,equal:uf,kind:"computed",producerMustRecompute(n){return n.value===sf||n.value===af},producerRecomputeValue(n){if(n.value===af)throw new Error("Detected cycle in computations.");let e=n.value;n.value=af;let t=Uc(n),r,i=!1;try{r=n.computation(),he(null),i=e!==sf&&e!==Vc&&r!==Vc&&n.equal(e,r)}catch(o){r=Vc,n.error=o}finally{hf(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function PR(){throw new Error}var ZI=PR;function JI(){ZI()}function XI(n){ZI=n}var kR=null;function ew(n){let e=Object.create(gf);e.value=n;let t=()=>(Lc(e),e.value);return t[kt]=e,t}function $c(n,e){GI()||JI(),n.equal(n.value,e)||(n.value=e,OR(n))}function tw(n,e){GI()||JI(),$c(n,e(n.value))}var gf=ae(L({},Bs),{equal:uf,value:void 0,kind:"signal"});function OR(n){n.version++,MR(),zI(n),kR?.()}function X(n){return typeof n=="function"}function Bi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hc=Bi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function $s(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Hc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nw(o)}catch(s){e=e??[],s instanceof Hc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$s(t,e)}remove(e){let{_finalizers:t}=this;t&&$s(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var mf=Ve.EMPTY;function qc(n){return n instanceof Ve||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function nw(n){X(n)?n():n.unsubscribe()}var Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $i={setTimeout(n,e,...t){let{delegate:r}=$i;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$i;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zc(n){$i.setTimeout(()=>{let{onUnhandledError:e}=Yt;if(e)e(n);else throw n})}function Hs(){}var rw=yf("C",void 0,void 0);function iw(n){return yf("E",void 0,n)}function ow(n){return yf("N",n,void 0)}function yf(n,e,t){return{kind:n,value:e,error:t}}var Xr=null;function Hi(n){if(Yt.useDeprecatedSynchronousErrorHandling){let e=!Xr;if(e&&(Xr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Xr;if(Xr=null,t)throw r}}else n()}function sw(n){Yt.useDeprecatedSynchronousErrorHandling&&Xr&&(Xr.errorThrown=!0,Xr.error=n)}var ei=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qc(e)&&e.add(this)):this.destination=LR}static create(e,t,r){return new qi(e,t,r)}next(e){this.isStopped?_f(ow(e),this):this._next(e)}error(e){this.isStopped?_f(iw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_f(rw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FR=Function.prototype.bind;function vf(n,e){return FR.call(n,e)}var If=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gc(r)}else Gc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gc(t)}}},qi=class extends ei{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Yt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vf(e.next,o),error:e.error&&vf(e.error,o),complete:e.complete&&vf(e.complete,o)}):i=e}this.destination=new If(i)}};function Gc(n){Yt.useDeprecatedSynchronousErrorHandling?sw(n):zc(n)}function VR(n){throw n}function _f(n,e){let{onStoppedNotification:t}=Yt;t&&$i.setTimeout(()=>t(n,e))}var LR={closed:!0,next:Hs,error:VR,complete:Hs};var zi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(n){return n}function wf(...n){return Ef(n)}function Ef(n){return n.length===0?wt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=jR(t)?t:new qi(t,r,i);return Hi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=aw(r),new r((i,o)=>{let s=new qi({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zi](){return this}pipe(...t){return Ef(t)(this)}toPromise(t){return t=aw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function aw(n){var e;return(e=n??Yt.Promise)!==null&&e!==void 0?e:Promise}function UR(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function jR(n){return n&&n instanceof ei||UR(n)&&qc(n)}function Df(n){return X(n?.lift)}function ye(n){return e=>{if(Df(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new bf(n,e,t,r,i)}var bf=class extends ei{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gi(){return ye((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Wi=class extends Ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Df(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return Gi()(this)}};var cw=Bi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new cw}next(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?mf:(this.currentObservers=null,o.push(t),new Ve(()=>{this.currentObservers=null,$s(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Wc(e,t),n})(),Wc=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:mf}};var et=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Et=new Ie(n=>n.complete());function uw(n){return n&&X(n.schedule)}function lw(n){return n[n.length-1]}function Kc(n){return X(lw(n))?n.pop():void 0}function ur(n){return uw(lw(n))?n.pop():void 0}function Cf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function dw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ti(n){return this instanceof ti?(this.v=n,this):new ti(n)}function fw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(S){return Promise.resolve(S).then(_,p)}}function a(_,S){r[_]&&(i[_]=function(P){return new Promise(function(R,U){o.push([_,P,R,U])>1||u(_,P)})},S&&(i[_]=S(i[_])))}function u(_,S){try{l(r[_](S))}catch(P){y(o[0][3],P)}}function l(_){_.value instanceof ti?Promise.resolve(_.value.v).then(h,p):y(o[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function y(_,S){_(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dw=="function"?dw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Qc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yc(n){return X(n?.then)}function Zc(n){return X(n[zi])}function Jc(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function Xc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eu=BR();function tu(n){return X(n?.[eu])}function nu(n){return fw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ti(t.read());if(i)return yield ti(void 0);yield yield ti(r)}}finally{t.releaseLock()}})}function ru(n){return X(n?.getReader)}function Le(n){if(n instanceof Ie)return n;if(n!=null){if(Zc(n))return $R(n);if(Qc(n))return HR(n);if(Yc(n))return qR(n);if(Jc(n))return gw(n);if(tu(n))return zR(n);if(ru(n))return GR(n)}throw Xc(n)}function $R(n){return new Ie(e=>{let t=n[zi]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function HR(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function qR(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zc)})}function zR(n){return new Ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gw(n){return new Ie(e=>{WR(n,e).catch(t=>e.error(t))})}function GR(n){return gw(nu(n))}function WR(n,e){var t,r,i,o;return hw(this,void 0,void 0,function*(){try{for(t=pw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function mt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function iu(n,e=0){return ye((t,r)=>{t.subscribe(fe(r,i=>mt(r,n,()=>r.next(i),e),()=>mt(r,n,()=>r.complete(),e),i=>mt(r,n,()=>r.error(i),e)))})}function ou(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mw(n,e){return Le(n).pipe(ou(e),iu(e))}function yw(n,e){return Le(n).pipe(ou(e),iu(e))}function vw(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function _w(n,e){return new Ie(t=>{let r;return mt(t,e,()=>{r=n[eu](),mt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function su(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{mt(t,e,()=>{let r=n[Symbol.asyncIterator]();mt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Iw(n,e){return su(nu(n),e)}function ww(n,e){if(n!=null){if(Zc(n))return mw(n,e);if(Qc(n))return vw(n,e);if(Yc(n))return yw(n,e);if(Jc(n))return su(n,e);if(tu(n))return _w(n,e);if(ru(n))return Iw(n,e)}throw Xc(n)}function Re(n,e){return e?ww(n,e):Le(n)}function Y(...n){let e=ur(n);return Re(n,e)}function Ki(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}function Tf(n){return!!n&&(n instanceof Ie||X(n.lift)&&X(n.subscribe))}var Rn=Bi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:KR}=Array;function QR(n,e){return KR(e)?n(...e):n(e)}function au(n){return pe(e=>QR(n,e))}var{isArray:YR}=Array,{getPrototypeOf:ZR,prototype:JR,keys:XR}=Object;function cu(n){if(n.length===1){let e=n[0];if(YR(e))return{args:e,keys:null};if(eM(e)){let t=XR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function eM(n){return n&&typeof n=="object"&&ZR(n)===JR}function uu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qs(...n){let e=ur(n),t=Kc(n),{args:r,keys:i}=cu(n);if(r.length===0)return Re([],e);let o=new Ie(tM(r,e,i?s=>uu(i,s):wt));return t?o.pipe(au(t)):o}function tM(n,e,t=wt){return r=>{Ew(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Ew(e,()=>{let l=Re(n[u],e),h=!1;l.subscribe(fe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ew(n,e,t){n?mt(t,n,e):e()}function Dw(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},_=P=>l<r?S(P):u.push(P),S=P=>{o&&e.next(P),l++;let R=!1;Le(t(P,h++)).subscribe(fe(e,U=>{i?.(U),o?_(U):e.next(U)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let U=u.shift();s?mt(e,s,()=>S(U)):S(U)}y()}catch(U){e.error(U)}}))};return n.subscribe(fe(e,_,()=>{p=!0,y()})),()=>{a?.()}}function Ue(n,e,t=1/0){return X(e)?Ue((r,i)=>pe((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>Dw(r,i,n,t)))}function Qi(n=1/0){return Ue(wt,n)}function bw(){return Qi(1)}function Yi(...n){return bw()(Re(n,ur(n)))}function lu(n){return new Ie(e=>{Le(n()).subscribe(e)})}function Sf(...n){let e=Kc(n),{args:t,keys:r}=cu(n),i=new Ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Le(t[h]).subscribe(fe(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?uu(r,a):a),o.complete())}))}});return e?i.pipe(au(e)):i}function Ot(n,e){return ye((t,r)=>{let i=0;t.subscribe(fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function lr(n){return ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(fe(t,void 0,void 0,s=>{o=Le(n(s,lr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Cw(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(fe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ni(n,e){return X(e)?Ue(n,e,1):Ue(n,1)}function dr(n){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mn(n){return n<=0?()=>Et:ye((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function du(n=nM){return ye((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nM(){return new Rn}function zs(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Nn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):wt,Mn(1),t?dr(e):du(()=>new Rn))}function Zi(n){return n<=0?()=>Et:ye((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Af(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ot((i,o)=>n(i,o,r)):wt,Zi(1),t?dr(e):du(()=>new Rn))}function Rf(n,e){return ye(Cw(n,e,arguments.length>=2,!0))}function Mf(...n){let e=ur(n);return ye((t,r)=>{(e?Yi(n,t,e):Yi(n,t)).subscribe(r)})}function Ft(n,e){return ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=o++;Le(n(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Nf(n){return ye((e,t)=>{Le(n).subscribe(fe(t,()=>t.complete(),Hs)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(fe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var hE="https://g.co/ng/security#xss",$=class extends Error{code;constructor(e,t){super(Fp(e,t)),this.code=e}};function Fp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var fE=Symbol("InputSignalNode#UNSET"),rM=ae(L({},gf),{transformFn:void 0,applyValueToInputSignal(n,e){$c(n,e)}});function pE(n,e){let t=Object.create(rM);t.value=n,t.transformFn=e?.transform;function r(){if(Lc(t),t.value===fE)throw new $(-950,!1);return t.value}return r[kt]=t,r}function ta(n){return{toString:n}.toString()}var hu="__parameters__";function iM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gE(n,e,t){return ta(()=>{let r=iM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(hu)?u[hu]:Object.defineProperty(u,hu,{value:[]})[hu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var qf=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function oM(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(ft).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Tw(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var sM=be({__forward_ref__:be});function wr(n){return n.__forward_ref__=wr,n.toString=function(){return ft(this())},n}function ht(n){return mE(n)?n():n}function mE(n){return typeof n=="function"&&n.hasOwnProperty(sM)&&n.__forward_ref__===wr}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Er(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gu(n){return Sw(n,vE)||Sw(n,_E)}function yE(n){return Gu(n)!==null}function Sw(n,e){return n.hasOwnProperty(e)?n[e]:null}function aM(n){let e=n&&(n[vE]||n[_E]);return e||null}function Aw(n){return n&&(n.hasOwnProperty(Rw)||n.hasOwnProperty(cM))?n[Rw]:null}var vE=be({\u0275prov:be}),Rw=be({\u0275inj:be}),_E=be({ngInjectableDef:be}),cM=be({ngInjectorDef:be}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function IE(n){return n&&!!n.\u0275providers}var uM=be({\u0275cmp:be}),lM=be({\u0275dir:be}),dM=be({\u0275pipe:be}),hM=be({\u0275mod:be}),wu=be({\u0275fac:be}),Qs=be({__NG_ELEMENT_ID__:be}),Mw=be({__NG_ENV_ID__:be});function io(n){return typeof n=="string"?n:n==null?"":String(n)}function fM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():io(n)}function pM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new $(-200,n)}function Vp(n,e){throw new $(-201,!1)}var oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(oe||{}),zf;function wE(){return zf}function Vt(n){let e=zf;return zf=n,e}function EE(n,e,t){let r=Gu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&oe.Optional)return null;if(e!==void 0)return e;Vp(n,"Injector")}var gM={},Ys=gM,Gf="__NG_DI_FLAG__",Eu="ngTempTokenPath",mM="ngTokenPath",yM=/\n/gm,vM="\u0275",Nw="__source",no;function _M(){return no}function hr(n){let e=no;return no=n,e}function IM(n,e=oe.Default){if(no===void 0)throw new $(-203,!1);return no===null?EE(n,void 0,e):no.get(n,e&oe.Optional?null:void 0,e)}function ee(n,e=oe.Default){return(wE()||IM)(ht(n),e)}function O(n,e=oe.Default){return ee(n,Wu(e))}function Wu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wf(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=wM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function DE(n,e){return n[Gf]=e,n.prototype[Gf]=e,n}function wM(n){return n[Gf]}function EM(n,e,t,r){let i=n[Eu];throw e[Nw]&&i.unshift(e[Nw]),n.message=DM(`
`+n.message,i,t,r),n[mM]=i,n[Eu]=null,n}function DM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==vM?n.slice(2):n;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(yM,`
  `)}`}var bE=DE(gE("Optional"),8);var bM=DE(gE("SkipSelf"),4);function oo(n,e){let t=n.hasOwnProperty(wu);return t?n[wu]:null}function Lp(n,e){n.forEach(t=>Array.isArray(t)?Lp(t,e):e(t))}function CE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Du(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CM(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function TM(n,e,t){let r=na(n,e);return r>=0?n[r|1]=t:(r=~r,CM(n,r,e,t)),r}function xf(n,e){let t=na(n,e);if(t>=0)return n[t|1]}function na(n,e){return SM(n,e,1)}function SM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var so={},Lt=[],ao=new q(""),TE=new q("",-1),SE=new q(""),bu=class{get(e,t=Ys){if(t===Ys){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return t}};function AE(n,e){let t=n[hM]||null;if(!t&&e===!0)throw new Error(`Type ${ft(n)} does not have '\u0275mod' property.`);return t}function gr(n){return n[uM]||null}function RE(n){return n[lM]||null}function ME(n){return n[dM]||null}function NE(n){let e=gr(n)||RE(n)||ME(n);return e!==null&&e.standalone}function Ku(n){return{\u0275providers:n}}function AM(...n){return{\u0275providers:xE(!0,n),\u0275fromNgModule:!0}}function xE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Lp(e,s=>{let a=s;Kf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PE(i,o),t}function PE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Up(i,o=>{e(o,r)})}}function Kf(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=Aw(n),s=!o&&gr(n);if(!o&&!s){let u=n.ngModule;if(o=Aw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Kf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Lp(o.imports,h=>{Kf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&PE(l,e)}if(!a){let l=oo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Lt},i),e({provide:SE,useValue:i,multi:!0},i),e({provide:ao,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Up(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Up(n,e){for(let t of n)IE(t)&&(t=t.\u0275providers),Array.isArray(t)?Up(t,e):e(t)}var RM=be({provide:String,useValue:be});function kE(n){return n!==null&&typeof n=="object"&&RM in n}function MM(n){return!!(n&&n.useExisting)}function NM(n){return!!(n&&n.useFactory)}function co(n){return typeof n=="function"}function xM(n){return!!n.useClass}var Qu=new q(""),mu={},PM={},Pf;function jp(){return Pf===void 0&&(Pf=new bu),Pf}var Ct=class{},Zs=class extends Ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Yf(e,s=>this.processProvider(s)),this.records.set(TE,Ji(void 0,this)),i.has("environment")&&this.records.set(Ct,Ji(void 0,this));let o=this.records.get(Qu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SE,Lt,oe.Self))}destroy(){Ws(this),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return Ws(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ws(this);let t=hr(this),r=Vt(void 0),i;try{return e()}finally{hr(t),Vt(r)}}get(e,t=Ys,r=oe.Default){if(Ws(this),e.hasOwnProperty(Mw))return e[Mw](this);r=Wu(r);let i,o=hr(this),s=Vt(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=LM(e)&&Gu(e);l&&this.injectableDefInScope(l)?u=Ji(Qf(e),mu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&oe.Self?jp():this.parent;return t=r&oe.Optional&&t===Ys?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Eu]=a[Eu]||[]).unshift(ft(e)),o)throw a;return EM(a,e,"R3InjectorError",this.source)}else throw a}finally{Vt(s),hr(o)}}resolveInjectorInitializers(){let e=he(null),t=hr(this),r=Vt(void 0),i;try{let o=this.get(ao,Lt,oe.Self);for(let s of o)s()}finally{hr(t),Vt(r),he(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=co(e)?e:ht(e&&e.provide),r=OM(e);if(!co(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ji(void 0,mu,!0),i.factory=()=>Wf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=he(null);try{return t.value===mu&&(t.value=PM,t.value=t.factory()),typeof t.value=="object"&&t.value&&VM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Qf(n){let e=Gu(n),t=e!==null?e.factory:oo(n);if(t!==null)return t;if(n instanceof q)throw new $(204,!1);if(n instanceof Function)return kM(n);throw new $(204,!1)}function kM(n){if(n.length>0)throw new $(204,!1);let t=aM(n);return t!==null?()=>t.factory(n):()=>new n}function OM(n){if(kE(n))return Ji(void 0,n.useValue);{let e=OE(n);return Ji(e,mu)}}function OE(n,e,t){let r;if(co(n)){let i=ht(n);return oo(i)||Qf(i)}else if(kE(n))r=()=>ht(n.useValue);else if(NM(n))r=()=>n.useFactory(...Wf(n.deps||[]));else if(MM(n))r=()=>ee(ht(n.useExisting));else{let i=ht(n&&(n.useClass||n.provide));if(FM(n))r=()=>new i(...Wf(n.deps));else return oo(i)||Qf(i)}return r}function Ws(n){if(n.destroyed)throw new $(205,!1)}function Ji(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function FM(n){return!!n.deps}function VM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function LM(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Yf(n,e){for(let t of n)Array.isArray(t)?Yf(t,e):t&&IE(t)?Yf(t.\u0275providers,e):e(t)}function Bt(n,e){n instanceof Zs&&Ws(n);let t,r=hr(n),i=Vt(void 0);try{return e()}finally{hr(r),Vt(i)}}function FE(){return wE()!==void 0||_M()!=null}function UM(n){if(!FE())throw new $(-203,!1)}function jM(n){return typeof n=="function"}var On=0,ue=1,J=2,pt=3,Jt=4,en=5,Cu=6,Tu=7,jt=8,uo=9,xn=10,nt=11,Js=12,xw=13,Io=14,cn=15,lo=16,Xi=17,ho=18,Yu=19,VE=20,fr=21,kf=22,Su=23,Dt=24,Xt=25,LE=1;var ii=7,Au=8,Ru=9,bt=10;function pr(n){return Array.isArray(n)&&typeof n[LE]=="object"}function Fn(n){return Array.isArray(n)&&n[LE]===!0}function UE(n){return(n.flags&4)!==0}function Zu(n){return n.componentOffset>-1}function Bp(n){return(n.flags&1)===1}function mr(n){return!!n.template}function Zf(n){return(n[J]&512)!==0}function ra(n){return(n[J]&256)===256}var Jf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function jE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Dr=(()=>{let n=()=>BE;return n.ngInherit=!0,n})();function BE(n){return n.type.prototype.ngOnChanges&&(n.setInput=$M),BM}function BM(){let n=HE(this),e=n?.current;if(e){let t=n.previous;if(t===so)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $M(n,e,t,r,i){let o=this.declaredInputs[r],s=HE(n)||HM(n,{previous:so,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Jf(l&&l.currentValue,t,u===so),jE(n,e,i,t)}var $E="__ngSimpleChanges__";function HE(n){return n[$E]||null}function HM(n,e){return n[$E]=e}var Pw=null;var Ut=function(n,e,t){Pw?.(n,e,t)},qE="svg",qM="math";function un(n){for(;Array.isArray(n);)n=n[On];return n}function zE(n,e){return un(e[n])}function $t(n,e){return un(e[n.index])}function $p(n,e){return n.data[e]}function br(n,e){let t=e[n];return pr(t)?t:t[On]}function Hp(n){return(n[J]&128)===128}function zM(n){return Fn(n[pt])}function Mu(n,e){return e==null?null:n[e]}function GE(n){n[Xi]=0}function qp(n){n[J]&1024||(n[J]|=1024,Hp(n)&&Xu(n))}function GM(n,e){for(;n>0;)e=e[Io],n--;return e}function Ju(n){return!!(n[J]&9216||n[Dt]?.dirty)}function Xf(n){n[xn].changeDetectionScheduler?.notify(9),n[J]&64&&(n[J]|=1024),Ju(n)&&Xu(n)}function Xu(n){n[xn].changeDetectionScheduler?.notify(0);let e=oi(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Hp(e)));)e=oi(e)}function WE(n,e){if(ra(n))throw new $(911,!1);n[fr]===null&&(n[fr]=[]),n[fr].push(e)}function WM(n,e){if(n[fr]===null)return;let t=n[fr].indexOf(e);t!==-1&&n[fr].splice(t,1)}function oi(n){let e=n[pt];return Fn(e)?e[pt]:e}function KM(n){return n[Tu]??=[]}function QM(n){return n.cleanup??=[]}var se={lFrame:nD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ep=!1;function YM(){return se.lFrame.elementDepthCount}function ZM(){se.lFrame.elementDepthCount++}function JM(){se.lFrame.elementDepthCount--}function KE(){return se.bindingsEnabled}function XM(){return se.skipHydrationRootTNode!==null}function eN(n){return se.skipHydrationRootTNode===n}function tN(){se.skipHydrationRootTNode=null}function Ce(){return se.lFrame.lView}function tn(){return se.lFrame.tView}function zp(n){return se.lFrame.contextLView=n,n[jt]}function Gp(n){return se.lFrame.contextLView=null,n}function yt(){let n=QE();for(;n!==null&&n.type===64;)n=n.parent;return n}function QE(){return se.lFrame.currentTNode}function nN(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ia(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function YE(){return se.lFrame.isParent}function rN(){se.lFrame.isParent=!1}function ZE(){return ep}function kw(n){let e=ep;return ep=n,e}function iN(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function oN(){return se.lFrame.bindingIndex}function sN(n){return se.lFrame.bindingIndex=n}function el(){return se.lFrame.bindingIndex++}function JE(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function aN(){return se.lFrame.inI18n}function cN(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,tp(e)}function uN(){return se.lFrame.currentDirectiveIndex}function tp(n){se.lFrame.currentDirectiveIndex=n}function lN(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function XE(n){se.lFrame.currentQueryIndex=n}function dN(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[en]:null}function eD(n,e,t){if(t&oe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&oe.Host);)if(i=dN(o),i===null||(o=o[Io],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=tD();return r.currentTNode=e,r.lView=n,!0}function Wp(n){let e=tD(),t=n[ue];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tD(){let n=se.lFrame,e=n===null?null:n.child;return e===null?nD(n):e}function nD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rD(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var iD=rD;function Kp(){let n=rD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hN(n){return(se.lFrame.contextLView=GM(n,se.lFrame.contextLView))[jt]}function di(){return se.lFrame.selectedIndex}function si(n){se.lFrame.selectedIndex=n}function oD(){let n=se.lFrame;return $p(n.tView,n.selectedIndex)}function sD(){se.lFrame.currentNamespace=qE}function fN(){return se.lFrame.currentNamespace}var aD=!0;function Qp(){return aD}function Yp(n){aD=n}function pN(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=BE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Zp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function yu(n,e,t){cD(n,e,3,t)}function vu(n,e,t,r){(n[J]&3)===t&&cD(n,e,t,r)}function Of(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function cD(n,e,t,r){let i=r!==void 0?n[Xi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Xi]+=65536),(a<o||o==-1)&&(gN(n,t,e,u),n[Xi]=(n[Xi]&4294901760)+u+2),u++}function Ow(n,e){Ut(4,n,e);let t=he(null);try{e.call(n)}finally{he(t),Ut(5,n,e)}}function gN(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[Xi]>>16&&(n[J]&3)===e&&(n[J]+=16384,Ow(a,o)):Ow(a,o)}var ro=-1,ai=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function mN(n){return n instanceof ai}function yN(n){return(n.flags&8)!==0}function vN(n){return(n.flags&16)!==0}function _N(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];IN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function uD(n){return n===3||n===4||n===6}function IN(n){return n.charCodeAt(0)===64}function fo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Fw(n,t,i,null,e[++r]):Fw(n,t,i,null,null))}}return n}function Fw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Ff={},np=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Wu(r);let i=this.injector.get(e,Ff,r);return i!==Ff||t===Ff?i:this.parentInjector.get(e,t,r)}};function lD(n){return n!==ro}function Nu(n){return n&32767}function wN(n){return n>>16}function xu(n,e){let t=wN(n),r=e;for(;t>0;)r=r[Io],t--;return r}var rp=!0;function Vw(n){let e=rp;return rp=n,e}var EN=256,dD=EN-1,hD=5,DN=0,an={};function bN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qs)&&(r=t[Qs]),r==null&&(r=t[Qs]=DN++);let i=r&dD,o=1<<i;e.data[n+(i>>hD)]|=o}function Pu(n,e){let t=fD(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,Vf(r.data,n),Vf(e,null),Vf(r.blueprint,null));let i=Jp(n,e),o=n.injectorIndex;if(lD(i)){let s=Nu(i),a=xu(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Vf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Jp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=vD(i),r===null)return ro;if(t++,i=i[Io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ro}function ip(n,e,t){bN(n,e,t)}function CN(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(uD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function pD(n,e,t){if(t&oe.Optional||n!==void 0)return n;Vp(e,"NodeInjector")}function gD(n,e,t,r){if(t&oe.Optional&&r===void 0&&(r=null),!(t&(oe.Self|oe.Host))){let i=n[uo],o=Vt(void 0);try{return i?i.get(e,r,t&oe.Optional):EE(e,r,t&oe.Optional)}finally{Vt(o)}}return pD(r,e,t)}function mD(n,e,t,r=oe.Default,i){if(n!==null){if(e[J]&2048&&!(r&oe.Self)){let s=MN(n,e,t,r,an);if(s!==an)return s}let o=yD(n,e,t,r,an);if(o!==an)return o}return gD(e,t,r,i)}function yD(n,e,t,r,i){let o=AN(t);if(typeof o=="function"){if(!eD(e,n,r))return r&oe.Host?pD(i,t,r):gD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))Vp(t);else return s}finally{iD()}}else if(typeof o=="number"){let s=null,a=fD(n,e),u=ro,l=r&oe.Host?e[cn][en]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?Jp(n,e):e[a+8],u===ro||!Uw(r,!1)?a=-1:(s=e[ue],a=Nu(u),e=xu(u,e)));a!==-1;){let h=e[ue];if(Lw(o,a,h.data)){let p=TN(a,e,t,s,r,l);if(p!==an)return p}u=e[a+8],u!==ro&&Uw(r,e[ue].data[a+8]===l)&&Lw(o,a,e)?(s=h,a=Nu(u),e=xu(u,e)):a=-1}}return i}function TN(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],u=r==null?Zu(a)&&rp:r!=s&&(a.type&3)!==0,l=i&oe.Host&&o===a,h=SN(a,s,t,u,l);return h!==null?po(e,s,h,a):an}function SN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let _=p;_<y;_++){let S=s[_];if(_<u&&t===S||_>=u&&S.type===t)return _}if(i){let _=s[u];if(_&&mr(_)&&_.type===t)return u}return null}function po(n,e,t,r){let i=n[t],o=e.data;if(mN(i)){let s=i;s.resolving&&pM(fM(o[t]));let a=Vw(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Vt(s.injectImpl):null,h=eD(n,r,oe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&pN(t,o[t],e)}finally{l!==null&&Vt(l),Vw(a),s.resolving=!1,iD()}}return i}function AN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qs)?n[Qs]:void 0;return typeof e=="number"?e>=0?e&dD:RN:e}function Lw(n,e,t){let r=1<<n;return!!(t[e+(n>>hD)]&r)}function Uw(n,e){return!(n&oe.Self)&&!(n&oe.Host&&e)}var ri=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mD(this._tNode,this._lView,e,Wu(r),t)}};function RN(){return new ri(yt(),Ce())}function hi(n){return ta(()=>{let e=n.prototype.constructor,t=e[wu]||op(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[wu]||op(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function op(n){return mE(n)?()=>{let e=op(ht(n));return e&&e()}:oo(n)}function MN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!(s[J]&512);){let a=yD(o,s,t,r|oe.Self,an);if(a!==an)return a;let u=o.parent;if(!u){let l=s[VE];if(l){let h=l.get(t,an,r);if(h!==an)return h}u=vD(s),s=s[Io]}o=u}return i}function vD(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[en]:null}function Xp(n){return CN(yt(),n)}function jw(n,e=null,t=null,r){let i=_D(n,e,t,r);return i.resolveInjectorInitializers(),i}function _D(n,e=null,t=null,r,i=new Set){let o=[t||Lt,AM(n)];return r=r||(typeof n=="object"?void 0:ft(n)),new Zs(o,e||jp(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=Ys;static NULL=new bu;static create(e,t){if(Array.isArray(e))return jw({name:""},t,e,"");{let r=e.name??"";return jw({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>ee(TE)});static __NG_ELEMENT_ID__=-1};var NN=new q("");NN.__NG_ELEMENT_ID__=n=>{let e=yt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(n&oe.Optional)return null;throw new $(204,!1)};var ID=!1,eg=(()=>{class n{static __NG_ELEMENT_ID__=xN;static __NG_ENV_ID__=t=>t}return n})(),sp=class extends eg{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return WE(this._lView,e),()=>WM(this._lView,e)}};function xN(){return new sp(Ce())}var go=class{},tl=new q("",{providedIn:"root",factory:()=>!1});var wD=new q(""),ED=new q(""),wo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new et(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();var ap=class extends qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,FE()&&(this.destroyRef=O(eg,{optional:!0})??void 0,this.pendingTasks=O(wo,{optional:!0})??void 0)}emit(e){let t=he(null);try{super.next(e)}finally{he(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},We=ap;function ku(...n){}function DD(n){let e,t;function r(){n=ku;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Bw(n){return queueMicrotask(()=>n()),()=>{n=ku}}var tg="isAngularZone",Ou=tg+"_ID",PN=0,Oe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ID}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,FN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,kN,ku,ku);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},kN={};function ng(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ON(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){DD(()=>{n.callbackScheduled=!1,cp(n),n.isCheckStableRunning=!0,ng(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),cp(n)}function FN(n){let e=()=>{ON(n)},t=PN++;n._inner=n._inner.fork({name:"angular",properties:{[tg]:!0,[Ou]:t,[Ou+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(VN(u))return r.invokeTask(o,s,a,u);try{return $w(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Hw(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return $w(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!LN(u)&&e(),Hw(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,cp(n),ng(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function cp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $w(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Hw(n){n._nesting--,ng(n)}var up=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function VN(n){return bD(n,"__ignore_ng_zone__")}function LN(n){return bD(n,"__scheduler_tick__")}function bD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Pn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},UN=new q("",{providedIn:"root",factory:()=>{let n=O(Oe),e=O(Pn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function qw(n,e){return pE(n,e)}function jN(n){return pE(fE,n)}var CD=(qw.required=jN,qw);function BN(){return nl(yt(),Ce())}function nl(n,e){return new Cr($t(n,e))}var Cr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=BN}return n})();var zw=new Set;function fi(n){zw.has(n)||(zw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Tr(n,e){fi("NgSignals");let t=ew(n),r=t[kt];return e?.equal&&(r.equal=e.equal),t.set=i=>$c(r,i),t.update=i=>tw(r,i),t.asReadonly=$N.bind(t),t}function $N(){let n=this[kt];if(n.readonlyFn===void 0){let e=()=>this();e[kt]=n,n.readonlyFn=e}return n.readonlyFn}function TD(n){return(n.flags&128)===128}var SD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(SD||{}),AD=new Map,HN=0;function qN(){return HN++}function zN(n){AD.set(n[Yu],n)}function lp(n){AD.delete(n[Yu])}var Gw="__ngContext__";function ci(n,e){pr(e)?(n[Gw]=e[Yu],zN(e)):n[Gw]=e}function RD(n){return ND(n[Js])}function MD(n){return ND(n[Jt])}function ND(n){for(;n!==null&&!Fn(n);)n=n[Jt];return n}var dp;function xD(n){dp=n}function GN(){if(dp!==void 0)return dp;if(typeof document<"u")return document;throw new $(210,!1)}var rg=new q("",{providedIn:"root",factory:()=>WN}),WN="ng",ig=new q(""),Eo=new q("",{providedIn:"platform",factory:()=>"unknown"});var og=new q("",{providedIn:"root",factory:()=>GN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var KN="h",QN="b";var PD=!1,YN=new q("",{providedIn:"root",factory:()=>PD});var sg=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(sg||{}),Do=new q("");var eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(eo||{}),kD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),ZN=[eo.EarlyRead,eo.Write,eo.MixedReadWrite,eo.Read],JN=(()=>{class n{ngZone=O(Oe);scheduler=O(go);errorHandler=O(Pn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(Do,{optional:!0})}execute(){this.executing=!0;for(let t of ZN)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[t]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[t](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(sg.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),hp=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o=null){this.impl=e,this.hooks=t,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function ag(n,e){!e?.injector&&UM(ag);let t=e?.injector??O(Tt);return fi("NgAfterNextRender"),ex(n,t,e,!0)}function XN(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function ex(n,e,t,r){let i=e.get(kD);i.impl??=e.get(JN);let o=e.get(Do,null,{optional:!0}),s=t?.phase??eo.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(eg):null,u=new hp(i.impl,XN(n,s),r,a,o?.snapshot(null));return i.impl.register(u),u}var tx=()=>null;function cg(n,e,t=!1){return tx(n,e,t)}function OD(n,e){let t=n.contentQueries;if(t!==null){let r=he(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];XE(o),a.contentQueries(2,e[s],s)}}}finally{he(r)}}}function fp(n,e,t){XE(0);let r=he(null);try{e(n,t)}finally{he(r)}}function FD(n,e,t){if(UE(e)){let r=he(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{he(r)}}}var ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ln||{});var fu;function nx(){if(fu===void 0&&(fu=null,qf.trustedTypes))try{fu=qf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fu}function Ww(n){return nx()?.createScriptURL(n)||n}var Fu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hE})`}};function oa(n){return n instanceof Fu?n.changingThisBreaksApplicationSecurity:n}function ug(n,e){let t=rx(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hE})`)}return t===e}function rx(n){return n instanceof Fu&&n.getTypeName()||null}var ix=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VD(n){return n=String(n),n.match(ix)?n:"unsafe:"+n}var rl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(rl||{});function ox(n){let e=UD();return e?e.sanitize(rl.URL,n)||"":ug(n,"URL")?oa(n):VD(io(n))}function sx(n){let e=UD();if(e)return Ww(e.sanitize(rl.RESOURCE_URL,n)||"");if(ug(n,"ResourceURL"))return Ww(oa(n));throw new $(904,!1)}function ax(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?sx:ox}function LD(n,e,t){return ax(e,t)(n)}function UD(){let n=Ce();return n&&n[xn].sanitizer}function jD(n){return n instanceof Function?n():n}var yr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(yr||{});function cx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var BD="ng-template";function ux(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(lg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function lg(n){return n.type===4&&n.value!==BD}function lx(n,e,t){let r=n.type===4&&!t?BD:n.value;return e===r}function dx(n,e,t){let r=4,i=n.attrs,o=i!==null?px(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Zt(r)&&!Zt(u))return!1;if(s&&Zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!lx(n,u,t)||u===""&&e.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!ux(n,i,u,t)){if(Zt(r))return!1;s=!0}}else{let l=e[++a],h=hx(u,i,lg(n),t);if(h===-1){if(Zt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(n){return(n&1)===0}function hx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gx(e,n)}function fx(n,e,t=!1){for(let r=0;r<e.length;r++)if(dx(n,e[r],t))return!0;return!1}function px(n){for(let e=0;e<n.length;e++){let t=n[e];if(uD(t))return e}return n.length}function gx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Kw(n,e){return n?":not("+e.trim()+")":e}function mx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(e+=Kw(o,i),i=""),r=s,o=o||!Zt(r);t++}return i!==""&&(e+=Kw(o,i)),e}function yx(n){return n.map(mx).join(",")}function vx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zt(i))break;i=o}r++}return{attrs:e,classes:t}}var dn={};function re(n=1){$D(tn(),Ce(),di()+n,!1)}function $D(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&vu(e,o,0,t)}si(t)}function le(n,e=oe.Default){let t=Ce();if(t===null)return ee(n,e);let r=yt();return mD(r,t,ht(n),e)}function HD(){let n="invalid";throw new Error(n)}function qD(n,e,t,r,i,o){let s=he(null);try{let a=null;i&yr.SignalBased&&(a=e[r][kt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&yr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):jE(e,a,r,o)}finally{he(s)}}function _x(n,e){return n.createText(e)}function Ix(n,e,t){n.setValue(e,t)}function zD(n,e,t){return n.createElement(e,t)}function Vu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GD(n,e,t){n.appendChild(e,t)}function Qw(n,e,t,r,i){r!==null?Vu(n,e,t,r,i):GD(n,e,t)}function wx(n,e,t){n.removeChild(null,e,t)}function Ex(n,e,t){n.setAttribute(e,"style",t)}function Dx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&_N(n,e,r),i!==null&&Dx(n,e,i),o!==null&&Ex(n,e,o)}function il(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[On]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),GE(p),p[pt]=p[Io]=n,p[jt]=t,p[xn]=s||n&&n[xn],p[nt]=a||n&&n[nt],p[uo]=u||n&&n[uo]||null,p[en]=o,p[Yu]=qN(),p[Cu]=h,p[VE]=l,p[cn]=e.type==2?n[cn]:p,p}function KD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function QD(n,e,t,r,i){let o=di(),s=r&2;try{si(-1),s&&e.length>Xt&&$D(n,e,Xt,!1),Ut(s?2:0,i),t(r,i)}finally{si(o),Ut(s?3:1,i)}}function YD(n,e,t){KE()&&(kx(n,e,t,$t(t,e)),(t.flags&64)===64&&t0(n,e,t))}function ZD(n,e,t=$t){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function JD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dg(n,e,t,r,i,o,s,a,u,l,h){let p=Xt+r,y=p+i,_=bx(p,y),S=typeof l=="function"?l():l;return _[ue]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function bx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:dn);return t}function Cx(n,e,t,r){let o=r.get(YN,PD)||t===ln.ShadowDom,s=n.selectRootElement(e,o);return Tx(s),s}function Tx(n){Sx(n)}var Sx=()=>null;function Yw(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=yr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?Zw(r,t,l,a,u):Zw(r,t,l,a)}return r}function Zw(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Ax(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],y=t?t.get(p):null,_=y?y.inputs:null,S=y?y.outputs:null;u=Yw(0,p.inputs,h,u,_),l=Yw(1,p.outputs,h,l,S);let P=u!==null&&s!==null&&!lg(e)?zx(u,h,s):null;a.push(P)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Rx(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Mx(n,e,t,r,i,o,s,a){let u=$t(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(hg(n,t,h,r,i),Zu(e)&&Nx(t,e.index)):e.type&3?(r=Rx(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Nx(n,e){let t=br(e,n);t[J]&16||(t[J]|=64)}function XD(n,e,t,r){if(KE()){let i=r===null?null:{"":-1},o=Fx(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&e0(n,e,t,s,i,a),i&&Vx(t,r,i)}t.mergedAttrs=fo(t.mergedAttrs,t.attrs)}function e0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)ip(Pu(t,e),n,r[l].type);Ux(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=KD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=fo(t.mergedAttrs,h.hostAttrs),jx(n,t,e,u,h),Lx(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}Ax(n,t,o)}function xx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Px(s)!=a&&s.push(a),s.push(t,r,o)}}function Px(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function kx(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Zu(t)&&Bx(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Pu(t,e),ci(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=po(e,n,a,t);if(ci(l,e),s!==null&&qx(e,a-i,l,u,t,s),mr(u)){let h=br(t.index,e);h[jt]=po(e,n,a,t)}}}function t0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=uN();try{si(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];tp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ox(u,l)}}finally{si(-1),tp(s)}}function Ox(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Fx(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(fx(e,s.selectors,!1))if(r||(r=[]),mr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;pp(n,e,u)}else r.unshift(s),pp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Vx(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}}function Lx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mr(e)&&(t[""]=n)}}function Ux(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function jx(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=oo(i.type,!0)),s=new ai(o,mr(i),le);n.blueprint[r]=s,t[r]=s,xx(n,e,r,KD(n,t,i.hostVars,dn),i)}function n0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Bx(n,e,t){let r=$t(e,n),i=JD(t),o=n[xn].rendererFactory,s=ol(n,il(n,i,null,n0(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function $x(n,e,t,r,i,o){let s=$t(n,e);Hx(e[nt],s,o,n.value,t,r,i)}function Hx(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?io(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function qx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];qD(r,t,u,l,h,p)}}function zx(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function r0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ol(n,e){return n[Js]?n[xw][Jt]=e:n[Js]=e,n[xw]=e,e}function i0(n,e){let t=n[uo],r=t?t.get(Pn,null):null;r&&r.handleError(e)}function hg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];qD(h,l,r,a,u,i)}}function Gx(n,e){let t=br(e,n),r=t[ue];Wx(r,t);let i=t[On];i!==null&&t[Cu]===null&&(t[Cu]=cg(i,t[uo])),fg(r,t,t[jt])}function Wx(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function fg(n,e,t){Wp(e);try{let r=n.viewQuery;r!==null&&fp(1,r,t);let i=n.template;i!==null&&QD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ho]?.finishViewCreation(n),n.staticContentQueries&&OD(n,e),n.staticViewQueries&&fp(2,n.viewQuery,t);let o=n.components;o!==null&&Kx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,Kp()}}function Kx(n,e){for(let t=0;t<e.length;t++)Gx(n,e[t])}var kn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(kn||{}),Qx;function pg(n,e){return Qx(n,e)}function to(n,e,t,r,i){if(r!=null){let o,s=!1;Fn(r)?o=r:pr(r)&&(s=!0,r=r[On]);let a=un(r);n===0&&t!==null?i==null?GD(e,t,a):Vu(e,t,a,i||null,!0):n===1&&t!==null?Vu(e,t,a,i||null,!0):n===2?wx(e,a,s):n===3&&e.destroyNode(a),o!=null&&cP(e,n,o,t,i)}}function Yx(n,e){o0(n,e),e[On]=null,e[en]=null}function Zx(n,e,t,r,i,o){r[On]=i,r[en]=e,sl(n,r,t,1,i,o)}function o0(n,e){e[xn].changeDetectionScheduler?.notify(10),sl(n,e,e[nt],2,null,null)}function Jx(n){let e=n[Js];if(!e)return Lf(n[ue],n);for(;e;){let t=null;if(pr(e))t=e[Js];else{let r=e[bt];r&&(t=r)}if(!t){for(;e&&!e[Jt]&&e!==n;)pr(e)&&Lf(e[ue],e),e=e[pt];e===null&&(e=n),pr(e)&&Lf(e[ue],e),t=e&&e[Jt]}e=t}}function Xx(n,e,t,r){let i=bt+r,o=t.length;r>0&&(t[i-1][Jt]=e),r<o-bt?(e[Jt]=t[i],CE(t,bt+r,e)):(t.push(e),e[Jt]=null),e[pt]=t;let s=e[lo];s!==null&&t!==s&&s0(s,e);let a=e[ho];a!==null&&a.insertView(n),Xf(e),e[J]|=128}function s0(n,e){let t=n[Ru],r=e[pt];if(pr(r))n[J]|=2;else{let i=r[pt][cn];e[cn]!==i&&(n[J]|=2)}t===null?n[Ru]=[e]:t.push(e)}function gg(n,e){let t=n[Ru],r=t.indexOf(e);t.splice(r,1)}function Lu(n,e){if(n.length<=bt)return;let t=bt+e,r=n[t];if(r){let i=r[lo];i!==null&&i!==n&&gg(i,r),e>0&&(n[t-1][Jt]=r[Jt]);let o=Du(n,bt+e);Yx(r[ue],r);let s=o[ho];s!==null&&s.detachView(o[ue]),r[pt]=null,r[Jt]=null,r[J]&=-129}return r}function mg(n,e){if(ra(e))return;let t=e[nt];t.destroyNode&&sl(n,e,t,3,null,null),Jx(e)}function Lf(n,e){if(ra(e))return;let t=he(null);try{e[J]&=-129,e[J]|=256,e[Dt]&&pf(e[Dt]),tP(n,e),eP(n,e),e[ue].type===1&&e[nt].destroy();let r=e[lo];if(r!==null&&Fn(e[pt])){r!==e[pt]&&gg(r,e);let i=e[ho];i!==null&&i.detachView(n)}lp(e)}finally{he(t)}}function eP(n,e){let t=n.cleanup,r=e[Tu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Tu]=null);let i=e[fr];if(i!==null){e[fr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Su];if(o!==null){e[Su]=null;for(let s of o)s.destroy()}}function tP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ai)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ut(4,a,u);try{u.call(a)}finally{Ut(5,a,u)}}else{Ut(4,i,o);try{o.call(i)}finally{Ut(5,i,o)}}}}}function nP(n,e,t){return rP(n,e.parent,t)}function rP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[On];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return $t(r,t)}}function iP(n,e,t){return sP(n,e,t)}function oP(n,e,t){return n.type&40?$t(n,t):null}var sP=oP,Jw;function yg(n,e,t,r){let i=nP(n,r,e),o=e[nt],s=r.parent||e[en],a=iP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Qw(o,i,t[u],a,!1);else Qw(o,i,t,a,!1);Jw!==void 0&&Jw(o,r,e,t,i)}function Ks(n,e){if(e!==null){let t=e.type;if(t&3)return $t(e,n);if(t&4)return gp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ks(n,r);{let i=n[e.index];return Fn(i)?gp(-1,i):un(i)}}else{if(t&128)return Ks(n,e.next);if(t&32)return pg(e,n)()||un(n[e.index]);{let r=a0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oi(n[cn]);return Ks(i,r)}else return Ks(n,e.next)}}}return null}function a0(n,e){if(e!==null){let r=n[cn][en],i=e.projection;return r.projection[i]}return null}function gp(n,e){let t=bt+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return Ks(r,i)}return e[ii]}function vg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&ci(un(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)vg(n,e,t.child,r,i,o,!1),to(e,n,i,a,o);else if(u&32){let l=pg(t,r),h;for(;h=l();)to(e,n,i,h,o);to(e,n,i,a,o)}else u&16?aP(n,e,r,t,i,o):to(e,n,i,a,o);t=s?t.projectionNext:t.next}}function sl(n,e,t,r,i,o){vg(t,r,n.firstChild,e,i,o,!1)}function aP(n,e,t,r,i,o){let s=t[cn],u=s[en].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];to(e,n,i,h,o)}else{let l=u,h=s[pt];TD(r)&&(l.flags|=128),vg(n,e,l,h,i,o,!0)}}function cP(n,e,t,r,i){let o=t[ii],s=un(t);o!==s&&to(e,n,r,o,i);for(let a=bt;a<t.length;a++){let u=t[a];sl(u[ue],u,n,e,r,o)}}function uP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:kn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=kn.Important),n.setStyle(t,r,i,o))}}function c0(n,e,t,r){let i=he(null);try{let o=e.tView,a=n[J]&4096?4096:16,u=il(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[lo]=l;let h=n[ho];return h!==null&&(u[ho]=h.createEmbeddedView(o)),fg(o,u,t),u}finally{he(i)}}function lP(n,e){let t=bt+e;if(t<n.length)return n[t]}function mp(n,e){return!e||e.firstChild===null||TD(n)}function u0(n,e,t,r=!0){let i=e[ue];if(Xx(i,e,n,t),r){let s=gp(t,n),a=e[nt],u=a.parentNode(n[ii]);u!==null&&Zx(i,n[en],a,e,u,s)}let o=e[Cu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dP(n,e){let t=Lu(n,e);return t!==void 0&&mg(t[ue],t),t}function Uu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(un(o)),Fn(o)&&hP(o,r);let s=t.type;if(s&8)Uu(n,e,t.child,r);else if(s&32){let a=pg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=a0(e,t);if(Array.isArray(a))r.push(...a);else{let u=oi(e[cn]);Uu(u[ue],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hP(n,e){for(let t=bt;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&Uu(r[ue],r,i,e)}n[ii]!==n[On]&&e.push(n[ii])}var l0=[];function fP(n){return n[Dt]??pP(n)}function pP(n){let e=l0.pop()??Object.create(mP);return e.lView=n,e}function gP(n){n.lView[Dt]!==n&&(n.lView=null,l0.push(n))}var mP=ae(L({},Bs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Xu(n.lView)},consumerOnSignalRead(){this.lView[Dt]=this}});function yP(n){let e=n[Dt]??Object.create(vP);return e.lView=n,e}var vP=ae(L({},Bs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=oi(n.lView);for(;e&&!d0(e[ue]);)e=oi(e);e&&qp(e)},consumerOnSignalRead(){this.lView[Dt]=this}});function d0(n){return n.type!==2}function h0(n){if(n[Su]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Su])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var _P=100;function f0(n,e=!0,t=0){let i=n[xn].rendererFactory,o=!1;o||i.begin?.();try{IP(n,t)}catch(s){throw e&&i0(n,s),s}finally{o||i.end?.()}}function IP(n,e){let t=ZE();try{kw(!0),yp(n,e);let r=0;for(;Ju(n);){if(r===_P)throw new $(103,!1);r++,yp(n,1)}}finally{kw(t)}}function wP(n,e,t,r){if(ra(e))return;let i=e[J],o=!1,s=!1;Wp(e);let a=!0,u=null,l=null;o||(d0(n)?(l=fP(e),u=Uc(l)):qI()===null?(a=!1,l=yP(e),u=Uc(l)):e[Dt]&&(pf(e[Dt]),e[Dt]=null));try{GE(e),sN(n.bindingStartIndex),t!==null&&QD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let _=n.preOrderCheckHooks;_!==null&&yu(e,_,null)}else{let _=n.preOrderHooks;_!==null&&vu(e,_,0,null),Of(e,0)}if(s||EP(e),h0(e),p0(e,0),n.contentQueries!==null&&OD(n,e),!o)if(h){let _=n.contentCheckHooks;_!==null&&yu(e,_)}else{let _=n.contentHooks;_!==null&&vu(e,_,1),Of(e,1)}bP(n,e);let p=n.components;p!==null&&m0(e,p,0);let y=n.viewQuery;if(y!==null&&fp(2,y,r),!o)if(h){let _=n.viewCheckHooks;_!==null&&yu(e,_)}else{let _=n.viewHooks;_!==null&&vu(e,_,2),Of(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[kf]){for(let _ of e[kf])_();e[kf]=null}o||(e[J]&=-73)}catch(h){throw o||Xu(e),h}finally{l!==null&&(hf(l,u),a&&gP(l)),Kp()}}function p0(n,e){for(let t=RD(n);t!==null;t=MD(t))for(let r=bt;r<t.length;r++){let i=t[r];g0(i,e)}}function EP(n){for(let e=RD(n);e!==null;e=MD(e)){if(!(e[J]&2))continue;let t=e[Ru];for(let r=0;r<t.length;r++){let i=t[r];qp(i)}}}function DP(n,e,t){let r=br(e,n);g0(r,t)}function g0(n,e){Hp(n)&&yp(n,e)}function yp(n,e){let r=n[ue],i=n[J],o=n[Dt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ff(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)wP(r,n,r.template,n[jt]);else if(i&8192){h0(n),p0(n,1);let a=r.components;a!==null&&m0(n,a,1)}}function m0(n,e,t){for(let r=0;r<e.length;r++)DP(n,e[r],t)}function bP(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)si(~i);else{let o=i,s=t[++r],a=t[++r];cN(s,o);let u=e[o];Ut(24,u),a(2,u),Ut(25,u)}}}finally{si(-1)}}function _g(n,e){let t=ZE()?64:1088;for(n[xn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=oi(n);if(Zf(n)&&!r)return n;n=r}return null}var ui=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ue];return Uu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[jt]}get dirty(){return!!(this._lView[J]&9280)||!!this._lView[Dt]?.dirty}set context(e){this._lView[jt]=e}get destroyed(){return ra(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(Fn(e)){let t=e[Au],r=t?t.indexOf(this):-1;r>-1&&(Lu(e,r),Du(t,r))}this._attachedToViewContainer=!1}mg(this._lView[ue],this._lView)}onDestroy(e){WE(this._lView,e)}markForCheck(){_g(this._cdRefInjectingView||this._lView,4)}markForRefresh(){qp(this._cdRefInjectingView||this._lView)}detach(){this._lView[J]&=-129}reattach(){Xf(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,f0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zf(this._lView),t=this._lView[lo];t!==null&&!e&&gg(t,this._lView),o0(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=Zf(this._lView),r=this._lView[lo];r!==null&&!t&&s0(r,this._lView),Xf(this._lView)}},al=(()=>{class n{static __NG_ELEMENT_ID__=SP}return n})(),CP=al,TP=class extends CP{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=c0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ui(i)}};function SP(){return AP(yt(),Ce())}function AP(n,e){return n.type&4?new TP(e,n,nl(n,e)):null}function cl(n,e,t,r,i){let o=n.data[e];if(o===null)o=RP(n,e,t,r,i),aN()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=nN();o.injectorIndex=s===null?-1:s.injectorIndex}return ia(o,!0),o}function RP(n,e,t,r,i){let o=QE(),s=YE(),a=s?o:o&&o.parent,u=n.data[e]=NP(n,a,t,e,r,i);return MP(n,u,o,s),u}function MP(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function NP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return XM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var TG=new RegExp(`^(\\d+)*(${QN}|${KN})*(.*)`);var xP=()=>null;function vp(n,e){return xP(n,e)}var _p=class{},ju=class{},Ip=class{resolveComponentFactory(e){throw Error(`No component factory found for ${ft(e)}.`)}},mo=class{static NULL=new Ip},yo=class{},pi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>PP()}return n})();function PP(){let n=Ce(),e=yt(),t=br(e.index,n);return(pr(t)?t:n)[nt]}var kP=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();function wp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Tw(i,a);else if(o==2){let u=a,l=e[++s];r=Tw(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Bu=class extends mo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gr(e);return new vo(t,this.ngModule)}};function Xw(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:yr.None;e?t.push({propName:s,templateName:r,isSignal:(a&yr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function OP(n){let e=n.toLowerCase();return e==="svg"?qE:e==="math"?qM:null}function FP(n){let{attrs:e,classes:t}=vx(n),r=e;return t.length&&r.push(1,...t),r}var vo=class extends ju{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Xw(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Xw(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=he(null);try{i=i||this.ngModule;let s=i instanceof Ct?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new np(e,s):e,u=a.get(yo,null);if(u===null)throw new $(407,!1);let l=a.get(kP,null),h=a.get(go,null),p={rendererFactory:u,sanitizer:l,changeDetectionScheduler:h},y=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",S=r?Cx(y,r,this.componentDef.encapsulation,a):zD(y,_,OP(_)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let R=null;S!==null&&(R=cg(S,a,!0));let U=dg(0,null,null,1,0,null,null,null,null,null,null),z=il(null,U,null,P,null,null,p,y,a,null,R);z[Xt]=S,Wp(z);let G,ce=null;try{let ne=this.componentDef,D,m=null;ne.findHostDirectiveDefs?(D=[],m=new Map,ne.findHostDirectiveDefs(ne,D,m),D.push(ne)):D=[ne];let I=r?["ng-version","19.1.3"]:FP(this.componentDef.selectors[0]),E=cl(U,Xt,2,"#host",I);for(let b of D)E.mergedAttrs=fo(E.mergedAttrs,b.hostAttrs);E.mergedAttrs=fo(E.mergedAttrs,I),wp(E,E.mergedAttrs,!0),S&&WD(y,S,E),ce=VP(E,S,ne,D,z,p),t!==void 0&&UP(E,this.ngContentSelectors,t),G=LP(ce,ne,D,m,z,[jP]),fg(U,z,null)}catch(ne){throw ce!==null&&lp(ce),lp(z),ne}finally{Kp()}let Fe=$p(U,Xt);return new Ep(this.componentType,G,nl(Fe,z),z,Fe)}finally{he(o)}}},Ep=class extends _p{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new ui(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;hg(o[ue],o,i,e,t),this.previousInputValues.set(e,t);let s=br(this._tNode.index,o);_g(s,1)}}get injector(){return new ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function VP(n,e,t,r,i,o){let s=i[ue],a=null;e!==null&&(a=cg(e,i[uo]));let u=o.rendererFactory.createRenderer(e,t),l=il(i,JD(t),null,n0(t),i[n.index],n,o,u,null,null,a);return s.firstCreatePass&&pp(s,n,r.length-1),ol(i,l),i[n.index]=l}function LP(n,e,t,r,i,o){let s=yt(),a=i[ue],u=$t(s,i);e0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,y=po(i,a,p,s);ci(y,i)}t0(a,i,s),u&&ci(u,i);let l=po(i,a,s.directiveStart+s.componentOffset,s);if(n[jt]=i[jt]=l,o!==null)for(let h of o)h(l,e);return FD(a,s,i),l}function UP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function jP(){let n=yt();Zp(Ce()[ue],n)}var bo=(()=>{class n{static __NG_ELEMENT_ID__=BP}return n})();function BP(){let n=yt();return HP(n,Ce())}var $P=bo,y0=class extends $P{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nl(this._hostTNode,this._hostLView)}get injector(){return new ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jp(this._hostTNode,this._hostLView);if(lD(e)){let t=xu(e,this._hostLView),r=Nu(e),i=t[ue].data[r+8];return new ri(i,t)}else return new ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=eE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mp(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!jM(e),a;if(s)a=t;else{let S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new vo(gr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let P=(s?l:this.parentInjector).get(Ct,null);P&&(o=P)}let h=gr(u.componentType??{}),p=vp(this._lContainer,h?.id??null),y=p?.firstChild??null,_=u.create(l,i,y,o);return this.insertImpl(_.hostView,a,mp(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(zM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[pt],l=new y0(u,u[en],u[pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return u0(s,i,o,r),e.attachToViewContainerRef(),CE(Uf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=eE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Lu(this._lContainer,t);r&&(Du(Uf(this._lContainer),t),mg(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=Lu(this._lContainer,t);return r&&Du(Uf(this._lContainer),t)!=null?new ui(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eE(n){return n[Au]}function Uf(n){return n[Au]||(n[Au]=[])}function HP(n,e){let t,r=e[n.index];return Fn(r)?t=r:(t=r0(r,e,null,n),e[n.index]=t,ol(e,t)),zP(t,e,n,r),new y0(t,n,e)}function qP(n,e){let t=n[nt],r=t.createComment(""),i=$t(e,n),o=t.parentNode(i);return Vu(t,o,r,t.nextSibling(i),!1),r}var zP=KP,GP=()=>!1;function WP(n,e,t){return GP(n,e,t)}function KP(n,e,t,r){if(n[ii])return;let i;t.type&8?i=un(r):i=qP(e,t),n[ii]=i}var vr=class{},Xs=class{};var Dp=class extends vr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Bu(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=AE(e);this._bootstrapComponents=jD(o.bootstrap),this._r3Injector=_D(e,t,[{provide:vr,useValue:this},{provide:mo,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bp=class extends Xs{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Dp(this.moduleType,e,[])}};var $u=class extends vr{injector;componentFactoryResolver=new Bu(this);instance=null;constructor(e){super();let t=new Zs([...e.providers,{provide:vr,useValue:this},{provide:mo,useValue:this.componentFactoryResolver}],e.parent||jp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ul(n,e,t=null){return new $u({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var QP=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xE(!1,t.type),i=r.length>0?ul([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(ee(Ct))})}return n})();function at(n){return ta(()=>{let e=v0(n),t=ae(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===SD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(QP).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ln.Emulated,styles:n.styles||Lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&fi("NgStandalone"),_0(t);let r=n.dependencies;return t.directiveDefs=nE(r,!1),t.pipeDefs=nE(r,!0),t.id=JP(t),t})}function YP(n){return gr(n)||RE(n)}function ZP(n){return n!==null}function Sr(n){return ta(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tE(n,e){if(n==null)return so;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=yr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==yr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ke(n){return ta(()=>{let e=v0(n);return _0(e),e})}function v0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||so,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tE(n.inputs,e),outputs:tE(n.outputs),debugInfo:null}}function _0(n){n.features?.forEach(e=>e(n))}function nE(n,e){if(!n)return null;let t=e?ME:YP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ZP)}function JP(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function XP(n){return Object.getPrototypeOf(n.prototype).constructor}function hn(n){let e=XP(n.type),t=!0,r=[n];for(;e;){let i;if(mr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=pu(n.inputs),s.inputTransforms=pu(n.inputTransforms),s.declaredInputs=pu(n.declaredInputs),s.outputs=pu(n.outputs);let a=i.hostBindings;a&&ik(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&nk(n,u),l&&rk(n,l),ek(n,i),oM(n.outputs,i.outputs),mr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===hn&&(t=!1)}}e=Object.getPrototypeOf(e)}tk(r)}function ek(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function tk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fo(i.hostAttrs,t=fo(t,i.hostAttrs))}}function pu(n){return n===so?{}:n===Lt?[]:n}function nk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function rk(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function ik(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Ig(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}function I0(n){return sk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function ok(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function sk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ak(n,e,t){return n[e]=t}function _r(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ck(n,e,t,r){let i=_r(n,e,t);return _r(n,e+1,r)||i}function uk(n){return(n.flags&32)===32}function lk(n,e,t,r,i,o,s,a,u){let l=e.consts,h=cl(e,n,4,s||null,a||null);XD(e,t,h,Mu(l,u)),Zp(e,h);let p=h.tView=dg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function dk(n,e,t,r,i,o,s,a,u,l){let h=t+Xt,p=e.firstCreatePass?lk(h,e,n,r,i,o,s,a,u):e.data[h];ia(p,!1);let y=hk(e,n,p,t);Qp()&&yg(e,n,y,p),ci(y,n);let _=r0(y,n,y,p);return n[h]=_,ol(n,_),WP(_,p,n),Bp(p)&&YD(e,n,p),u!=null&&ZD(n,p,l),p}function je(n,e,t,r,i,o,s,a){let u=Ce(),l=tn(),h=Mu(l.consts,o);return dk(u,l,n,e,t,r,i,h,s,a),je}var hk=fk;function fk(n,e,t,r){return Yp(!0),e[nt].createComment("")}var wg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var w0=new q("");function gi(n){return!!n&&typeof n.then=="function"}function E0(n){return!!n&&typeof n.subscribe=="function"}var ll=new q("");var D0=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=O(ll,{optional:!0})??[];injector=O(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Bt(this.injector,i);if(gi(o))t.push(o);else if(E0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pk=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Cp})}return n})(),Cp=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},dl=new q("");function gk(){XI(()=>{throw new $(600,!1)})}function mk(n){return n.isBoundToModule}var yk=10;function vk(n,e,t){try{let r=t();return gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ir=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(UN);afterRenderManager=O(kD);zonelessEnabled=O(tl);rootEffectScheduler=O(pk);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new qe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=O(wo).hasPendingTasks.pipe(pe(t=>!t));constructor(){O(Do,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=O(Ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ju;if(!this._injector.get(D0).done){let y=!i&&NE(t),_=!1;throw new $(405,_)}let s;i?s=t:s=this._injector.get(mo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=mk(s)?void 0:this._injector.get(vr),u=r||s.selector,l=s.create(Tt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(w0,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),_u(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(sg.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new $(101,!1);let t=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(yo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<yk;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)_k(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ju(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;_u(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(dl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>_u(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _u(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _k(n,e,t,r){if(!t&&!Ju(n))return;f0(n,e,t&&!r?0:1)}function sa(n,e,t,r){let i=Ce(),o=el();if(_r(i,o,e)){let s=tn(),a=oD();$x(a,i,n,e,t,r)}return sa}function Ik(n,e,t,r){return _r(n,el(),t)?e+io(t)+r:dn}function wk(n,e,t,r,i,o){let s=oN(),a=ck(n,s,t,i);return JE(2),a?e+io(t)+r+io(i)+o:dn}function gu(n,e){return n<<17|e<<2}function li(n){return n>>17&32767}function Ek(n){return(n&2)==2}function Dk(n,e){return n&131071|e<<17}function Tp(n){return n|2}function _o(n){return(n&131068)>>2}function jf(n,e){return n&-131069|e<<2}function bk(n){return(n&1)===1}function Sp(n){return n|1}function Ck(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=li(s),u=_o(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||na(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=li(n[a+1]);n[r+1]=gu(y,a),y!==0&&(n[y+1]=jf(n[y+1],r)),n[a+1]=Dk(n[a+1],r)}else n[r+1]=gu(a,0),a!==0&&(n[a+1]=jf(n[a+1],r)),a=r;else n[r+1]=gu(u,0),a===0?a=r:n[u+1]=jf(n[u+1],r),u=r;l&&(n[r+1]=Tp(n[r+1])),rE(n,h,r,!0),rE(n,h,r,!1),Tk(e,h,n,r,o),s=gu(a,u),o?e.classBindings=s:e.styleBindings=s}function Tk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&na(o,e)>=0&&(t[r+1]=Sp(t[r+1]))}function rE(n,e,t,r){let i=n[t+1],o=e===null,s=r?li(i):_o(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Sk(u,e)&&(a=!0,n[s+1]=r?Sp(l):Tp(l)),s=r?li(l):_o(l)}a&&(n[t+1]=r?Tp(i):Sp(i))}function Sk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?na(n,e)>=0:!1}function Se(n,e,t){let r=Ce(),i=el();if(_r(r,i,e)){let o=tn(),s=oD();Mx(o,s,r,n,e,r[nt],t,!1)}return Se}function iE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";hg(n,t,o[s],s,r)}function hl(n,e){return Ak(n,e,null,!0),hl}function Ak(n,e,t,r){let i=Ce(),o=tn(),s=JE(2);if(o.firstUpdatePass&&Mk(o,n,s,r),e!==dn&&_r(i,s,e)){let a=o.data[di()];Ok(o,a,i,i[nt],n,i[s+1]=Fk(e,t),r,s)}}function Rk(n,e){return e>=n.expandoStartIndex}function Mk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[di()],s=Rk(n,t);Vk(o,r)&&e===null&&!s&&(e=!1),e=Nk(i,o,e,r),Ck(i,o,e,t,s,r)}}function Nk(n,e,t,r){let i=lN(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bf(null,n,e,t,r),t=ea(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Bf(i,n,e,t,r),o===null){let u=xk(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Bf(null,n,e,u[1],r),u=ea(u,e.attrs,r),Pk(n,e,r,u))}else o=kk(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function xk(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_o(r)!==0)return n[li(r)]}function Pk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[li(i)]=r}function kk(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ea(r,s,t)}return ea(r,e.attrs,t)}function Bf(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ea(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ea(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),TM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Ok(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=bk(l)?oE(u,e,t,i,_o(l),s):void 0;if(!Hu(h)){Hu(o)||Ek(l)&&(o=oE(u,null,t,i,a,s));let p=zE(di(),t);uP(r,s,p,i,o)}}function oE(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===dn&&(y=p?Lt:void 0);let _=p?xf(y,r):h===r?y:void 0;if(l&&!Hu(_)&&(_=xf(u,r)),Hu(_)&&(a=_,s))return a;let S=n[i+1];i=s?li(S):_o(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=xf(u,r))}return a}function Hu(n){return n!==void 0}function Fk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ft(oa(n)))),n}function Vk(n,e){return(n.flags&(e?8:16))!==0}function Vn(n,e){fi("NgControlFlow");let t=Ce(),r=el(),i=t[r]!==dn?t[r]:-1,o=i!==-1?sE(t,Xt+i):void 0,s=0;if(_r(t,r,n)){let a=he(null);try{if(o!==void 0&&dP(o,s),n!==-1){let u=Xt+n,l=sE(t,u),h=Lk(t[ue],u),p=vp(l,h.tView.ssrId),y=c0(t,h,e,{dehydratedView:p});u0(l,y,s,mp(h,p))}}finally{he(a)}}else if(o!==void 0){let a=lP(o,s);a!==void 0&&(a[jt]=e)}}function sE(n,e){return n[e]}function Lk(n,e){return $p(n,e)}function Uk(n,e,t,r,i,o){let s=e.consts,a=Mu(s,i),u=cl(e,n,2,r,a);return XD(e,t,u,Mu(s,o)),u.attrs!==null&&wp(u,u.attrs,!1),u.mergedAttrs!==null&&wp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function k(n,e,t,r){let i=Ce(),o=tn(),s=Xt+n,a=i[nt],u=o.firstCreatePass?Uk(s,o,i,e,t,r):o.data[s],l=jk(o,i,u,a,e,n);i[s]=l;let h=Bp(u);return ia(u,!0),WD(a,l,u),!uk(u)&&Qp()&&yg(o,i,l,u),YM()===0&&ci(l,i),ZM(),h&&(YD(o,i,u),FD(o,u,i)),r!==null&&ZD(i,u),k}function M(){let n=yt();YE()?rN():(n=n.parent,ia(n,!1));let e=n;eN(e)&&tN(),JM();let t=tn();return t.firstCreatePass&&(Zp(t,n),UE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&yN(e)&&iE(t,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&vN(e)&&iE(t,e,Ce(),e.stylesWithoutHost,!1),M}function Ne(n,e,t,r){return k(n,e,t,r),M(),Ne}var jk=(n,e,t,r,i,o)=>(Yp(!0),zD(r,i,fN()));function Eg(){return Ce()}var qu="en-US";var Bk=qu;function $k(n){typeof n=="string"&&(Bk=n.toLowerCase().replace(/_/g,"-"))}var Hk=(n,e,t)=>{};function gt(n,e,t,r){let i=Ce(),o=tn(),s=yt();return zk(o,i,i[nt],s,n,e,r),gt}function qk(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Tu],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function zk(n,e,t,r,i,o,s){let a=Bp(r),l=n.firstCreatePass&&QM(n),h=e[jt],p=KM(e),y=!0;if(r.type&3||s){let P=$t(r,e),R=s?s(P):P,U=p.length,z=s?ce=>s(un(ce[r.index])):r.index,G=null;if(!s&&a&&(G=qk(n,e,i,r.index)),G!==null){let ce=G.__ngLastListenerFn__||G;ce.__ngNextListenerFn__=o,G.__ngLastListenerFn__=o,y=!1}else{o=cE(r,e,h,o),Hk(P,i,o);let ce=t.listen(R,i,o);p.push(o,ce),l&&l.push(i,z,U,U+1)}}else o=cE(r,e,h,o);let _=r.outputs,S;if(y&&_!==null&&(S=_[i])){let P=S.length;if(P)for(let R=0;R<P;R+=2){let U=S[R],z=S[R+1],Fe=e[U][z].subscribe(o),ne=p.length;p.push(o,Fe),l&&l.push(i,r.index,ne,-(ne+1))}}}function aE(n,e,t,r){let i=he(null);try{return Ut(6,e,t),t(r)!==!1}catch(o){return i0(n,o),!1}finally{Ut(7,e,t),he(i)}}function cE(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?br(n.index,e):e;_g(s,5);let a=aE(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=aE(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ln(n=1){return hN(n)}function F(n,e=""){let t=Ce(),r=tn(),i=n+Xt,o=r.firstCreatePass?cl(r,i,1,e,null):r.data[i],s=Gk(r,t,o,e,n);t[i]=s,Qp()&&yg(r,t,s,o),ia(o,!1)}var Gk=(n,e,t,r,i)=>(Yp(!0),_x(e[nt],r));function fl(n){return St("",n,""),fl}function St(n,e,t){let r=Ce(),i=Ik(r,n,e,t);return i!==dn&&b0(r,di(),i),St}function Dg(n,e,t,r,i){let o=Ce(),s=wk(o,n,e,t,r,i);return s!==dn&&b0(o,di(),s),Dg}function b0(n,e,t){let r=zE(e,n);Ix(n[nt],r,t)}function Wk(n,e,t){let r=tn();if(r.firstCreatePass){let i=mr(n);Ap(t,r.data,r.blueprint,i,!0),Ap(e,r.data,r.blueprint,i,!1)}}function Ap(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ap(n[o],e,t,r,i);else{let o=tn(),s=Ce(),a=yt(),u=co(n)?n:ht(n.provide),l=OE(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(co(n)||!n.multi){let _=new ai(l,i,le),S=Hf(u,e,i?h:h+y,p);S===-1?(ip(Pu(a,s),o,u),$f(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[S]=_,s[S]=_)}else{let _=Hf(u,e,h+y,p),S=Hf(u,e,h,h+y),P=_>=0&&t[_],R=S>=0&&t[S];if(i&&!R||!i&&!P){ip(Pu(a,s),o,u);let U=Yk(i?Qk:Kk,t.length,i,r,l);!i&&R&&(t[S].providerFactory=U),$f(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=C0(t[i?S:_],l,!i&&r);$f(o,n,_>-1?_:S,U)}!i&&r&&R&&t[S].componentProviders++}}}function $f(n,e,t,r){let i=co(e),o=xM(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function C0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hf(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Kk(n,e,t,r){return Rp(this.multi,[])}function Qk(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=po(t,t[ue],this.providerFactory.index,r);o=a.slice(0,s),Rp(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Rp(i,o);return o}function Rp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Yk(n,e,t,r,i){let o=new ai(n,t,le);return o.multi=[],o.index=e,o.componentProviders=0,C0(o,i,r&&!t),o}function Co(n,e=[]){return t=>{t.providersResolver=(r,i)=>Wk(r,i?i(n):n,e)}}function T0(n,e,t,r){return Jk(Ce(),iN(),n,e,t,r)}function Zk(n,e){let t=n[e];return t===dn?void 0:t}function Jk(n,e,t,r,i,o){let s=e+t;return _r(n,s,i)?ak(n,s+1,o?r.call(o,i):r(i)):Zk(n,s+1)}var Mp=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},pl=(()=>{class n{compileModuleSync(t){return new bp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=AE(t),o=jD(i.declarations).reduce((s,a)=>{let u=gr(a);return u&&s.push(new vo(u)),s},[]);return new Mp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xk=(()=>{class n{zone=O(Oe);changeDetectionScheduler=O(go);applicationRef=O(Ir);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eO=new q("",{factory:()=>!1});function S0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Oe(ae(L({},R0()),{scheduleInRootZone:t})),[{provide:Oe,useFactory:n},{provide:ao,multi:!0,useFactory:()=>{let r=O(Xk,{optional:!0});return()=>r.initialize()}},{provide:ao,multi:!0,useFactory:()=>{let r=O(tO);return()=>{r.initialize()}}},e===!0?{provide:wD,useValue:!0}:[],{provide:ED,useValue:t??ID}]}function A0(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=S0({ngZoneFactory:()=>{let i=R0(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&fi("NgZone_CoalesceEvent"),new Oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ku([{provide:eO,useValue:!0},{provide:tl,useValue:!1},r])}function R0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tO=(()=>{class n{subscription=new Ve;initialized=!1;zone=O(Oe);pendingTasks=O(wo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nO=(()=>{class n{appRef=O(Ir);taskService=O(wo);ngZone=O(Oe);zonelessEnabled=O(tl);tracing=O(Do,{optional:!0});disableScheduling=O(wD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ou):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(ED,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof up||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Bw:DD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ou+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rO(){return typeof $localize<"u"&&$localize.locale||qu}var bg=new q("",{providedIn:"root",factory:()=>O(bg,oe.Optional|oe.SkipSelf)||rO()});var Np=new q(""),iO=new q("");function Gs(n){return!n.moduleRef}function oO(n){let e=Gs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Oe);return t.run(()=>{Gs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Pn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Gs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Np);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Np);s.add(o),n.moduleRef.onDestroy(()=>{_u(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return vk(r,t,()=>{let o=e.get(D0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(bg,qu);if($k(s||qu),!e.get(iO,!0))return Gs(n)?e.get(Ir):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Gs(n)){let u=e.get(Ir);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return sO(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sO(n,e){let t=n.injector.get(Ir);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new $(-403,!1);e.push(n)}var Iu=null;function aO(n=[],e){return Tt.create({name:e,providers:[{provide:Qu,useValue:"platform"},{provide:Np,useValue:new Set([()=>Iu=null])},...n]})}function cO(n=[]){if(Iu)return Iu;let e=aO(n);return Iu=e,gk(),uO(e),e}function uO(n){let e=n.get(ig,null);Bt(n,()=>{e?.forEach(t=>t())})}var To=(()=>{class n{static __NG_ELEMENT_ID__=lO}return n})();function lO(n){return dO(yt(),Ce(),(n&16)===16)}function dO(n,e,t){if(Zu(n)&&!t){let r=br(n.index,e);return new ui(r,r)}else if(n.type&175){let r=e[cn];return new ui(r,e)}return null}var xp=class{constructor(){}supports(e){return I0(e)}create(e){return new Pp(e)}},hO=(n,e)=>e,Pp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||hO}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<uE(r,i,o)?t:r,a=uE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let _=y<o.length?o[y]:o[y]=0,S=_+y;h<=S&&S<l&&(o[y]=_+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!I0(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,ok(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new kp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new zu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Op=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},zu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Op,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function lE(){return new Cg([new xp])}var Cg=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:lE});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lE()),deps:[[n,new bM,new bE]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function M0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=cO(r),o=[S0({}),{provide:go,useExisting:nO},...t||[]],s=new $u({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return oO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function mi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function aa(n,e){fi("NgSignals");let t=YI(n);return e?.equal&&(t[kt].equal=e.equal),t}function Un(n){let e=he(null);try{return n()}finally{he(e)}}var dE=class{[kt];constructor(e){this[kt]=e}destroy(){this[kt].destroy()}};function N0(n){let e=gr(n);if(!e)return null;let t=new vo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var F0=null;function Bn(){return F0}function V0(n){F0??=n}var gl=class{};var vt=new q(""),Mg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(fO),providedIn:"platform"})}return n})(),L0=new q(""),fO=(()=>{class n extends Mg{_location;_history;_doc=O(vt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(t){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Bn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Ng(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function x0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function jn(n){return n&&n[0]!=="?"?"?"+n:n}var $n=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(xg),providedIn:"root"})}return n})(),U0=new q(""),xg=(()=>{class n extends $n{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ng(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+jn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ee(Mg),ee(U0,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j0=(()=>{class n extends $n{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Ng(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ee(Mg),ee(U0,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),So=(()=>{class n{_subject=new qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=mO(x0(P0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+jn(r))}normalize(t){return n.stripTrailingSlash(gO(this._basePath,P0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=jn;static joinWithSlash=Ng;static stripTrailingSlash=x0;static \u0275fac=function(r){return new(r||n)(ee($n))};static \u0275prov=H({token:n,factory:()=>pO(),providedIn:"root"})}return n})();function pO(){return new So(ee($n))}function gO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function P0(n){return n.replace(/\/index.html$/,"")}function mO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function B0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Tg=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yl=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Tg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),k0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);k0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(bo),le(al),le(Cg))};static \u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function k0(n,e){n.context.$implicit=e.item}var vl=(()=>{class n{_viewContainer;_context=new Sg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){O0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){O0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(le(bo),le(al))};static \u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Sg=class{$implicit=null;ngIf=null};function O0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${ft(e)}'.`)}var At=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Sr({type:n});static \u0275inj=Er({})}return n})(),$0="browser",yO="server";function Pg(n){return n===yO}var H0=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Ag(O(vt),window)})}return n})(),Ag=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=vO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function vO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ml=class{};var Og=class extends gl{supportsDOMEvents=!0},Fg=class n extends Og{static makeCurrent(){V0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_O();return t==null?null:IO(t)}resetBaseElement(){ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return B0(document.cookie,e)}},ua=null;function _O(){return ua=ua||document.querySelector("base"),ua?ua.getAttribute("href"):null}function IO(n){return new URL(n,document.baseURI).pathname}var wO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Vg=new q(""),Q0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ee(Vg),ee(Oe))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Il=class{_doc;constructor(e){this._doc=e}manager},_l="ng-app-id";function q0(n){for(let e of n)e.remove()}function z0(n,e){let t=e.createElement("style");return t.textContent=n,t}function EO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${_l}="${e}"],link[${_l}="${e}"]`);if(i)for(let o of i)o.removeAttribute(_l),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Lg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Y0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Pg(o),EO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,z0);r?.forEach(i=>this.addUsage(i,this.external,Lg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(q0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])q0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,z0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Lg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(_l,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ee(vt),ee(rg),ee(og,8),ee(Eo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jg=/%COMP%/g,Z0="%COMP%",DO=`_nghost-${Z0}`,bO=`_ngcontent-${Z0}`,CO=!0,TO=new q("",{providedIn:"root",factory:()=>CO});function SO(n){return bO.replace(jg,n)}function AO(n){return DO.replace(jg,n)}function J0(n,e){return e.map(t=>t.replace(jg,n))}var G0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Pg(a),this.defaultRenderer=new la(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ln.ShadowDom&&(r=ae(L({},r),{encapsulation:ln.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof wl?i.applyToHost(t):i instanceof da&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case ln.Emulated:o=new wl(u,l,r,this.appId,h,s,a,p,this.tracingService);break;case ln.ShadowDom:return new Ug(u,l,t,r,s,a,this.nonce,p,this.tracingService);default:o=new da(u,l,r,h,s,a,p,this.tracingService);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ee(Q0),ee(Y0),ee(rg),ee(TO),ee(vt),ee(Eo),ee(Oe),ee(og),ee(Do,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),la=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(kg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(W0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(W0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=kg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(kn.DashCase|kn.Important)?e.style.setProperty(t,r,i&kn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&kn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function W0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ug=class extends la{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=J0(i.id,i.styles);for(let y of h){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=y,this.shadowRoot.appendChild(_)}let p=i.getExternalStyles?.();if(p)for(let y of p){let _=Lg(y,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends la{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?J0(l,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wl=class extends da{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=SO(h),this.hostAttr=AO(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},RO=(()=>{class n extends Il{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ee(vt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),K0=["alt","control","meta","shift"],MO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xO=(()=>{class n extends Il{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),K0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=MO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),K0.forEach(s=>{if(s!==i){let a=NO[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ee(vt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function X0(n,e){return M0(L({rootComponent:n},PO(e)))}function PO(n){return{appProviders:[...LO,...n?.providers??[]],platformProviders:VO}}function kO(){Fg.makeCurrent()}function OO(){return new Pn}function FO(){return xD(document),document}var VO=[{provide:Eo,useValue:$0},{provide:ig,useValue:kO,multi:!0},{provide:vt,useFactory:FO,deps:[]}];var LO=[{provide:Qu,useValue:"root"},{provide:Pn,useFactory:OO,deps:[]},{provide:Vg,useClass:RO,multi:!0,deps:[vt,Oe,Eo]},{provide:Vg,useClass:xO,multi:!0,deps:[vt]},G0,Y0,Q0,{provide:yo,useExisting:G0},{provide:ml,useClass:wO,deps:[]},[]];var eb=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ee(vt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ie="primary",Ca=Symbol("RouteTitle"),zg=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Po(n){return new zg(n)}function jO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function BO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fn(n[t],e[t]))return!1;return!0}function fn(n,e){let t=n?Gg(n):void 0,r=e?Gg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!lb(n[i],e[i]))return!1;return!0}function Gg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function lb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function db(n){return n.length>0?n[n.length-1]:null}function Mr(n){return Tf(n)?n:gi(n)?Re(Promise.resolve(n)):Y(n)}var $O={exact:fb,subset:pb},hb={exact:HO,subset:qO,ignored:()=>!0};function tb(n,e,t){return $O[t.paths](n.root,e.root,t.matrixParams)&&hb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function HO(n,e){return fn(n,e)}function fb(n,e,t){if(!vi(n.segments,e.segments)||!bl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!fb(n.children[r],e.children[r],t))return!1;return!0}function qO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lb(n[t],e[t]))}function pb(n,e,t){return gb(n,e,e.segments,t)}function gb(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!vi(i,t)||e.hasChildren()||!bl(i,t,r))}else if(n.segments.length===t.length){if(!vi(n.segments,t)||!bl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!pb(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!vi(n.segments,i)||!bl(n.segments,i,r)||!n.children[ie]?!1:gb(n.children[ie],e,o,r)}}function bl(n,e,t){return e.every((r,i)=>hb[t](n[i].parameters,r.parameters))}var qn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new we([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){return WO.serialize(this)}},we=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cl(this)}},yi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Po(this.parameters),this._parameterMap}toString(){return yb(this)}};function zO(n,e){return vi(n,e)&&n.every((t,r)=>fn(t.parameters,e[r].parameters))}function vi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function GO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var Ta=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new ko,providedIn:"root"})}return n})(),ko=class{parse(e){let t=new Kg(e);return new qn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ha(e.root,!0)}`,r=YO(e.queryParams),i=typeof e.fragment=="string"?`#${KO(e.fragment)}`:"";return`${t}${r}${i}`}},WO=new ko;function Cl(n){return n.segments.map(e=>yb(e)).join("/")}function ha(n,e){if(!n.hasChildren())return Cl(n);if(e){let t=n.children[ie]?ha(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=GO(n,(r,i)=>i===ie?[ha(n.children[ie],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${Cl(n)}/${t[0]}`:`${Cl(n)}/(${t.join("//")})`}}function mb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function El(n){return mb(n).replace(/%3B/gi,";")}function KO(n){return encodeURI(n)}function Wg(n){return mb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(n){return decodeURIComponent(n)}function nb(n){return Tl(n.replace(/\+/g,"%20"))}function yb(n){return`${Wg(n.path)}${QO(n.parameters)}`}function QO(n){return Object.entries(n).map(([e,t])=>`;${Wg(e)}=${Wg(t)}`).join("")}function YO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${El(t)}=${El(i)}`).join("&"):`${El(t)}=${El(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ZO=/^[^\/()?;#]+/;function Bg(n){let e=n.match(ZO);return e?e[0]:""}var JO=/^[^\/()?;=#]+/;function XO(n){let e=n.match(JO);return e?e[0]:""}var e1=/^[^=?&#]+/;function t1(n){let e=n.match(e1);return e?e[0]:""}var n1=/^[^&#]+/;function r1(n){let e=n.match(n1);return e?e[0]:""}var Kg=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new we(e,t)),r}parseSegment(){let e=Bg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new yi(Tl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=XO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Bg(this.remaining);i&&(r=i,this.capture(r))}e[Tl(t)]=Tl(r)}parseQueryParam(e){let t=t1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=r1(this.remaining);s&&(r=s,this.capture(r))}let i=nb(t),o=nb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Bg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ie]:new we([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function vb(n){return n.segments.length>0?new we([],{[ie]:n}):n}function _b(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=_b(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new we(n.segments,e);return i1(t)}function i1(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new we(n.segments.concat(e.segments),e.children)}return n}function _i(n){return n instanceof qn}function o1(n,e,t=null,r=null){let i=Ib(n);return wb(i,e,t,r)}function Ib(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new we(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=vb(r);return e??i}function wb(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return $g(i,i,i,t,r);let o=s1(e);if(o.toRoot())return $g(i,i,new we([],{}),t,r);let s=a1(o,i,n),a=s.processChildren?pa(s.segmentGroup,s.index,o.commands):Db(s.segmentGroup,s.index,o.commands);return $g(i,s.segmentGroup,a,t,r)}function Sl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ya(n){return typeof n=="object"&&n!=null&&n.outlets}function $g(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=Eb(n,e,t);let a=vb(_b(s));return new qn(a,o,i)}function Eb(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Eb(o,e,t)}),new we(n.segments,r)}var Al=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sl(r[0]))throw new $(4003,!1);let i=r.find(ya);if(i&&i!==db(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function s1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Al(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Al(t,e,r)}var Mo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function a1(n,e,t){if(n.isAbsolute)return new Mo(e,!0,0);if(!t)return new Mo(e,!1,NaN);if(t.parent===null)return new Mo(t,!0,0);let r=Sl(n.commands[0])?0:1,i=t.segments.length-1+r;return c1(t,i,n.numberOfDoubleDots)}function c1(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Mo(r,!1,i-o)}function u1(n){return ya(n[0])?n[0].outlets:{[ie]:n}}function Db(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return pa(n,e,t);let r=l1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[ie]=new we(n.segments.slice(r.pathIndex),n.children),pa(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?Qg(n,e,t):r.match?pa(n,0,i):Qg(n,e,t)}function pa(n,e,t){if(t.length===0)return new we(n.segments,{});{let r=u1(t),i={};if(Object.keys(r).some(o=>o!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let o=pa(n.children[ie],e,t);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Db(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function l1(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ya(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ib(u,l,s))return o;r+=2}else{if(!ib(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Qg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ya(o)){let u=d1(o.outlets);return new we(r,u)}if(i===0&&Sl(t[0])){let u=n.segments[e];r.push(new yi(u.path,rb(t[0]))),i++;continue}let s=ya(o)?o.outlets[ie]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Sl(a)?(r.push(new yi(s,rb(a))),i+=2):(r.push(new yi(s,{})),i++)}return new we(r,{})}function d1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Qg(new we([],{}),0,r))}),e}function rb(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ib(n,e,t){return n==t.path&&fn(e,t.parameters)}var ga="imperative",Qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qe||{}),qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Oo=class extends qt{type=Qe.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pn=class extends qt{urlAfterRedirects;type=Qe.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mt||{}),Rl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Rl||{}),Hn=class extends qt{reason;code;type=Qe.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ar=class extends qt{reason;code;type=Qe.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},va=class extends qt{error;target;type=Qe.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ml=class extends qt{urlAfterRedirects;state;type=Qe.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yg=class extends qt{urlAfterRedirects;state;type=Qe.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zg=class extends qt{urlAfterRedirects;state;shouldActivate;type=Qe.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jg=class extends qt{urlAfterRedirects;state;type=Qe.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xg=class extends qt{urlAfterRedirects;state;type=Qe.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class{route;type=Qe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},tm=class{route;type=Qe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},nm=class{snapshot;type=Qe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rm=class{snapshot;type=Qe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},im=class{snapshot;type=Qe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{snapshot;type=Qe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nl=class{routerEvent;position;anchor;type=Qe.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},_a=class{},Fo=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function h1(n,e){return n.providers&&!n._injector&&(n._injector=ul(n.providers,e,`Route: ${n.path}`)),n._injector??e}function nn(n){return n.outlet||ie}function f1(n,e){let t=n.filter(r=>nn(r)===e);return t.push(...n.filter(r=>nn(r)!==e)),t}function Sa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Aa(this.rootInjector)}},Aa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ee(Ct))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=am(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=am(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=cm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cm(e,this._root).map(t=>t.value)}};function am(n,e){if(n===e.value)return e;for(let t of e.children){let r=am(n,t);if(r)return r}return null}function cm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=cm(n,t);if(r.length)return r.unshift(e),r}return[]}var Rt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ro(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Pl=class extends xl{snapshot;constructor(e,t){super(e),this.snapshot=t,ym(this,e)}toString(){return this.snapshot.toString()}};function bb(n){let e=p1(n),t=new et([new yi("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new Rr(t,r,o,s,i,ie,n,e.root);return a.snapshot=e.root,new Pl(new Rt(a,[]),e)}function p1(n){let e={},t={},r={},i="",o=new No([],e,r,i,t,ie,n,null,{});return new Ol("",new Rt(o,[]))}var Rr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(l=>l[Ca]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Tb(i)&&(r.resolve[Ca]=i.title),r}var No=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ca]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ol=class extends xl{url;constructor(e,t){super(t),this.url=e,ym(this,t)}toString(){return Cb(this._root)}};function ym(n,e){e.value._routerState=n,e.children.forEach(t=>ym(n,t))}function Cb(n){let e=n.children.length>0?` { ${n.children.map(Cb).join(", ")} } `:"";return`${n.value}${e}`}function Hg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),fn(e.params,t.params)||n.paramsSubject.next(t.params),BO(e.url,t.url)||n.urlSubject.next(t.url),fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function um(n,e){let t=fn(n.params,e.params)&&zO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||um(n.parent,e.parent))}function Tb(n){return typeof n.title=="string"||n.title===null}var g1=new q(""),vm=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=CD(void 0);parentContexts=O(Aa);location=O(bo);changeDetector=O(To);inputBinder=O(Ul,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new lm(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Dr]})}return n})(),lm=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Rr?this.route:e===Aa?this.childContexts:e===g1?this.outletData:this.parent.get(e,t)}},Ul=new q(""),ob=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=qs([r.queryParams,r.params,r.data]).pipe(Ft(([o,s,a],u)=>(a=L(L(L({},o),s),a),u===0?Y(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=N0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function m1(n,e,t){let r=Ia(n,e._root,t?t._root:void 0);return new Pl(r,e)}function Ia(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=y1(n,e,t);return new Rt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ia(n,a)),s}}let r=v1(e.value),i=e.children.map(o=>Ia(n,o));return new Rt(r,i)}}function y1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ia(n,r,i);return Ia(n,r)})}function v1(n){return new Rr(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var wa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Sb="ngNavigationCancelingError";function Fl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=_i(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ab(!1,Mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Ab(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Sb]=!0,t.cancellationCode=e,t}function _1(n){return Rb(n)&&_i(n.url)}function Rb(n){return!!n&&n[Sb]}var I1=(n,e,t,r)=>pe(i=>(new dm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),dm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ro(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ro(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new om(o.value.snapshot))}),e.children.length&&this.forwardEvent(new rm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Hg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Hg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Vl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function w1(n,e,t){let r=n._root,i=e?e._root:null;return fa(r,i,t,[r.value])}function E1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Lo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!yE(n)?n:e.get(n):r}function fa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ro(e);return n.children.forEach(s=>{D1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ma(a,t.getContext(s),i)),i}function D1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=b1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fa(n,e,a?a.children:null,r,i):fa(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xo(a.outlet.component,s))}else s&&ma(e,a,i),i.canActivateChecks.push(new Vl(r)),o.component?fa(n,null,a?a.children:null,r,i):fa(n,null,t,r,i);return i}function b1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!vi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(n.url,e.url)||!fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!um(n,e)||!fn(n.queryParams,e.queryParams);case"paramsChange":default:return!um(n,e)}}function ma(n,e,t){let r=Ro(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ma(s,e.children.getContext(o),t):ma(s,null,t):ma(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xo(e.outlet.component,i)):t.canDeactivateChecks.push(new xo(null,i)):t.canDeactivateChecks.push(new xo(null,i))}function Ra(n){return typeof n=="function"}function C1(n){return typeof n=="boolean"}function T1(n){return n&&Ra(n.canLoad)}function S1(n){return n&&Ra(n.canActivate)}function A1(n){return n&&Ra(n.canActivateChild)}function R1(n){return n&&Ra(n.canDeactivate)}function M1(n){return n&&Ra(n.canMatch)}function Mb(n){return n instanceof Rn||n?.name==="EmptyError"}var Dl=Symbol("INITIAL_VALUE");function Vo(){return Ft(n=>qs(n.map(e=>e.pipe(Mn(1),Mf(Dl)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===Dl)return Dl;if(t===!1||N1(t))return t}return!0}),Ot(e=>e!==Dl),Mn(1)))}function N1(n){return _i(n)||n instanceof wa}function x1(n,e){return Ue(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(ae(L({},t),{guardsResult:!0})):P1(s,r,i,n).pipe(Ue(a=>a&&C1(a)?k1(r,o,n,e):Y(a)),pe(a=>ae(L({},t),{guardsResult:a})))})}function P1(n,e,t,r){return Re(n).pipe(Ue(i=>U1(i.component,i.route,t,e,r)),Nn(i=>i!==!0,!0))}function k1(n,e,t,r){return Re(e).pipe(ni(i=>Yi(F1(i.route.parent,r),O1(i.route,r),L1(n,i.path,t),V1(n,i.route,t))),Nn(i=>i!==!0,!0))}function O1(n,e){return n!==null&&e&&e(new im(n)),Y(!0)}function F1(n,e){return n!==null&&e&&e(new nm(n)),Y(!0)}function V1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>lu(()=>{let s=Sa(e)??t,a=Lo(o,s),u=S1(a)?a.canActivate(e,n):Bt(s,()=>a(e,n));return Mr(u).pipe(Nn())}));return Y(i).pipe(Vo())}function L1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>E1(s)).filter(s=>s!==null).map(s=>lu(()=>{let a=s.guards.map(u=>{let l=Sa(s.node)??t,h=Lo(u,l),p=A1(h)?h.canActivateChild(r,n):Bt(l,()=>h(r,n));return Mr(p).pipe(Nn())});return Y(a).pipe(Vo())}));return Y(o).pipe(Vo())}function U1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Sa(e)??i,l=Lo(a,u),h=R1(l)?l.canDeactivate(n,e,t,r):Bt(u,()=>l(n,e,t,r));return Mr(h).pipe(Nn())});return Y(s).pipe(Vo())}function j1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=Lo(s,n),u=T1(a)?a.canLoad(e,t):Bt(n,()=>a(e,t));return Mr(u)});return Y(o).pipe(Vo(),Nb(r))}function Nb(n){return wf(tt(e=>{if(typeof e!="boolean")throw Fl(n,e)}),pe(e=>e===!0))}function B1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=Lo(s,n),u=M1(a)?a.canMatch(e,t):Bt(n,()=>a(e,t));return Mr(u)});return Y(o).pipe(Vo(),Nb(r))}var Ea=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Da=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ao(n){return Ki(new Ea(n))}function $1(n){return Ki(new $(4e3,!1))}function H1(n){return Ki(Ab(!1,Mt.GuardRejected))}var hm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ie])return $1(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:_,data:S,title:P}=i,R=Bt(o,()=>a({params:_,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:P}));if(R instanceof qn)throw new Da(R);t=R}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Da(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new qn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new we(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q1(n,e,t,r,i){let o=xb(n,e,t);return o.matched?(r=h1(e,r),B1(r,e,t,i).pipe(pe(s=>s===!0?o:L({},fm)))):Y(o)}function xb(n,e,t){if(e.path==="**")return z1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},fm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||jO)(t,n,e);if(!i)return L({},fm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function z1(n){return{matched:!0,parameters:n.length>0?db(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function sb(n,e,t,r){return t.length>0&&K1(n,t,r)?{segmentGroup:new we(e,W1(r,new we(t,n.children))),slicedSegments:[]}:t.length===0&&Q1(n,t,r)?{segmentGroup:new we(n.segments,G1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function G1(n,e,t,r){let i={};for(let o of t)if(jl(n,e,o)&&!r[nn(o)]){let s=new we([],{});i[nn(o)]=s}return L(L({},r),i)}function W1(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&nn(r)!==ie){let i=new we([],{});t[nn(r)]=i}return t}function K1(n,e,t){return t.some(r=>jl(n,e,r)&&nn(r)!==ie)}function Q1(n,e,t){return t.some(r=>jl(n,e,r))}function jl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Y1(n,e,t){return e.length===0&&!n.children[t]}var pm=class{};function Z1(n,e,t,r,i,o,s="emptyOnly"){return new gm(n,e,t,r,i,s,o).recognize()}var J1=31,gm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new hm(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=sb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:t,rootSnapshot:r})=>{let i=new Rt(r,t),o=new Ol("",i),s=o1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new No([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,t).pipe(pe(r=>({children:r,rootSnapshot:t})),lr(r=>{if(r instanceof Da)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ea?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(pe(s=>s instanceof Rt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(ni(s=>{let a=r.children[s],u=f1(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Rf((s,a)=>(s.push(...a),s)),dr(null),Af(),Ue(s=>{if(s===null)return Ao(r);let a=Pb(s);return X1(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return Re(t).pipe(ni(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(lr(l=>{if(l instanceof Ea)return Y(null);throw l}))),Nn(u=>!!u),lr(u=>{if(Mb(u))return Y1(r,i,o)?Y(new pm):Ao(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return nn(r)!==s&&(s===ie||!jl(i,o,r))?Ao(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ao(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=xb(t,i,o);if(!u)return Ao(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>J1&&(this.allowRedirects=!1));let _=new No(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,ab(i),nn(i),i.component??i._loadedComponent??null,i,cb(i)),S=kl(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data);let P=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(Ue(R=>this.processSegment(e,r,t,R.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=q1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ft(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ft(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:_}=u,S=new No(y,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,ab(r),nn(r),r.component??r._loadedComponent??null,r,cb(r)),P=kl(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(P.params),S.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:U}=sb(t,y,_,l);if(U.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(pe(G=>new Rt(S,G)));if(l.length===0&&U.length===0)return Y(new Rt(S,[]));let z=nn(r)===o;return this.processSegment(h,l,R,U,z?ie:o,!0,S).pipe(pe(G=>new Rt(S,G instanceof Rt?[G]:[])))}))):Ao(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):j1(e,t,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):H1(t))):Y({routes:[],injector:e})}};function X1(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function eF(n){let e=n.value.routeConfig;return e&&e.path===""}function Pb(n){let e=[],t=new Set;for(let r of n){if(!eF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Pb(r.children);e.push(new Rt(r.value,i))}return e.filter(r=>!t.has(r))}function ab(n){return n.data||{}}function cb(n){return n.resolve||{}}function tF(n,e,t,r,i,o){return Ue(s=>Z1(n,e,t,r,s.extractedUrl,i,o).pipe(pe(({state:a,tree:u})=>ae(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function nF(n,e){return Ue(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of kb(u))s.add(l);let a=0;return Re(s).pipe(ni(u=>o.has(u)?rF(u,r,n,e):(u.data=kl(u,u.parent,n).resolve,Y(void 0))),tt(()=>a++),Zi(1),Ue(u=>a===s.size?Y(t):Et))})}function kb(n){let e=n.children.map(t=>kb(t)).flat();return[n,...e]}function rF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!Tb(i)&&(o[Ca]=i.title),iF(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=kl(n,n.parent,t).resolve,null)))}function iF(n,e,t,r){let i=Gg(n);if(i.length===0)return Y({});let o={};return Re(i).pipe(Ue(s=>oF(n[s],e,t,r).pipe(Nn(),tt(a=>{if(a instanceof wa)throw Fl(new ko,a);o[s]=a}))),Zi(1),pe(()=>o),lr(s=>Mb(s)?Et:Ki(s)))}function oF(n,e,t,r){let i=Sa(e)??r,o=Lo(n,i),s=o.resolve?o.resolve(e,t):Bt(i,()=>o(e,t));return Mr(s)}function qg(n){return Ft(e=>{let t=n(e);return t?Re(t).pipe(pe(()=>e)):Y(e)})}var Ob=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[Ca]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(sF),providedIn:"root"})}return n})(),sF=(()=>{class n extends Ob{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ee(eb))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ma=new q("",{providedIn:"root",factory:()=>({})}),aF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=at({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ne(0,"router-outlet")},dependencies:[vm],encapsulation:2})}return n})();function _m(n){let e=n.children&&n.children.map(_m),t=e?ae(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=aF),t}var ba=new q(""),Im=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(pl);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Y(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Mr(t.loadComponent()).pipe(pe(Fb),tt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),zs(()=>{this.componentLoaders.delete(t)})),i=new Wi(r,()=>new qe).pipe(Gi());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=cF(r,this.compiler,t,this.onLoadEndListener).pipe(zs(()=>{this.childrenLoaders.delete(r)})),s=new Wi(o,()=>new qe).pipe(Gi());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cF(n,e,t,r){return Mr(n.loadChildren()).pipe(pe(Fb),Ue(i=>i instanceof Xs||Array.isArray(i)?Y(i):Re(e.compileModuleAsync(i))),pe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ba,[],{optional:!0,self:!0}).flat()),{routes:s.map(_m),injector:o}}))}function uF(n){return n&&typeof n=="object"&&"default"in n}function Fb(n){return uF(n)?n.default:n}var wm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(lF),providedIn:"root"})}return n})(),lF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vb=new q(""),Lb=new q("");function dF(n,e,t){let r=n.get(Lb),i=n.get(vt);return n.get(Oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hF(n))),{onViewTransitionCreated:u}=r;return u&&Bt(n,()=>u({transition:a,from:e,to:t})),s})}function hF(n){return new Promise(e=>{ag({read:()=>setTimeout(e)},{injector:n})})}var Ub=new q(""),Em=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new qe;transitionAbortSubject=new qe;configLoader=O(Im);environmentInjector=O(Ct);urlSerializer=O(Ta);rootContexts=O(Aa);location=O(So);inputBindingEnabled=O(Ul,{optional:!0})!==null;titleStrategy=O(Ob);options=O(Ma,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O(wm);createViewTransition=O(Vb,{optional:!0});navigationErrorHandler=O(Ub,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new em(i)),r=i=>this.events.next(new tm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(L(L({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ga,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(o=>o.id!==0),pe(o=>ae(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ft(o=>{let s=!1,a=!1;return Y(o).pipe(Ft(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ae(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Ar(u.id,this.urlSerializer.serialize(u.rawUrl),p,Rl.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(Ft(p=>{let y=this.transitions?.getValue();return this.events.next(new Oo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?Et:Promise.resolve(p)}),tF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ae(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new Ml(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:y,source:_,restoredState:S,extras:P}=u,R=new Oo(p,this.urlSerializer.serialize(y),_,S);this.events.next(R);let U=bb(this.rootComponentType).snapshot;return this.currentTransition=o=ae(L({},u),{targetSnapshot:U,urlAfterRedirects:y,extras:ae(L({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Y(o)}else{let p="";return this.events.next(new Ar(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Rl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),tt(u=>{let l=new Yg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),pe(u=>(this.currentTransition=o=ae(L({},u),{guards:w1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),x1(this.environmentInjector,u=>this.events.next(u)),tt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Fl(this.urlSerializer,u.guardsResult);let l=new Zg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ot(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Mt.GuardRejected),!1)),qg(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe(tt(l=>{let h=new Jg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ft(l=>{let h=!1;return Y(l).pipe(nF(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Mt.NoDataFromResolver)}}))}),tt(l=>{let h=new Xg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),qg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(tt(y=>{h.component=y}),pe(()=>{})));for(let y of h.children)p.push(...l(y));return p};return qs(l(u.targetSnapshot.root)).pipe(dr(null),Mn(1))}),qg(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Re(h).pipe(pe(()=>o)):Y(o)}),pe(u=>{let l=m1(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ae(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),tt(()=>{this.events.next(new _a)}),I1(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Mn(1),tt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Nf(this.transitionAbortSubject.pipe(tt(u=>{throw u}))),zs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),lr(u=>{if(a=!0,Rb(u))this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),_1(u)?this.events.next(new Fo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new va(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Bt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof wa){let{message:p,cancellationCode:y}=Fl(this.urlSerializer,h);this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,y)),this.events.next(new Fo(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fF(n){return n!==ga}var pF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(gF),providedIn:"root"})}return n})(),mm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gF=(()=>{class n extends mm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>O(mF),providedIn:"root"})}return n})(),mF=(()=>{class n extends jb{location=O(So);urlSerializer=O(Ta);options=O(Ma,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=O(wm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=bb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Oo)this.stateMemento=this.createStateMemento();else if(t instanceof Ar)this.rawUrlTree=r.initialUrl;else if(t instanceof Ml){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof _a?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Hn&&(t.code===Mt.GuardRejected||t.code===Mt.NoDataFromResolver)?this.restoreHistory(r):t instanceof va?this.restoreHistory(r,!0):t instanceof pn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof qn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=L(L({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bb(n,e){n.events.pipe(Ot(t=>t instanceof pn||t instanceof Hn||t instanceof va||t instanceof Ar),pe(t=>t instanceof pn||t instanceof Ar?0:(t instanceof Hn?t.code===Mt.Redirect||t.code===Mt.SupersededByNewNavigation:!1)?2:1),Ot(t=>t!==2),Mn(1)).subscribe(()=>{e()})}var yF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(wg);stateManager=O(jb);options=O(Ma,{optional:!0})||{};pendingTasks=O(wo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Em);urlSerializer=O(Ta);location=O(So);urlHandlingStrategy=O(wm);_events=new qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(pF);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(ba,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(Ul,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hn&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof pn)this.navigated=!0;else if(r instanceof Fo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fF(i.source)},s);this.scheduleNavigation(a,ga,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}IF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_m),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=Ib(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return wb(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=_i(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ga,null,r)}navigate(t,r={skipLocationChange:!1}){return _F(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},yF):r===!1?i=L({},vF):i=r,_i(t))return tb(this.currentUrlTree,t,i);let o=this.parseUrl(t);return tb(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Bb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _F(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}function IF(n){return!(n instanceof _a)&&!(n instanceof Fo)}var Nr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qe;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof pn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_i(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:LD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:_i(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(le(zt),le(Rr),Xp("tabindex"),le(pi),le(Cr),le($n))};static \u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&gt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&sa("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",mi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",mi],replaceUrl:[2,"replaceUrl","replaceUrl",mi],routerLink:"routerLink"},features:[Ig,Dr]})}return n})();var Ll=class{};var wF=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ot(t=>t instanceof pn),ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ul(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Re(i).pipe(Qi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Y(null);let o=i.pipe(Ue(s=>s===null?Y(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Re([o,s]).pipe(Qi())}else return o})}static \u0275fac=function(r){return new(r||n)(ee(zt),ee(pl),ee(Ct),ee(Ll),ee(Im))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$b=new q(""),EF=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Oo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ar&&t.code===Rl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Nl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){HD()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function Hb(n,...e){return Ku([{provide:ba,multi:!0,useValue:n},[],{provide:Rr,useFactory:qb,deps:[zt]},{provide:dl,multi:!0,useFactory:zb},e.map(t=>t.\u0275providers)])}function qb(n){return n.routerState.root}function Na(n,e){return{\u0275kind:n,\u0275providers:e}}function zb(){let n=O(Tt);return e=>{let t=n.get(Ir);if(e!==t.components[0])return;let r=n.get(zt),i=n.get(Gb);n.get(Dm)===1&&r.initialNavigation(),n.get(Wb,null,oe.Optional)?.setUpPreloading(),n.get($b,null,oe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Gb=new q("",{factory:()=>new qe}),Dm=new q("",{providedIn:"root",factory:()=>1});function DF(){return Na(2,[{provide:Dm,useValue:0},{provide:ll,multi:!0,deps:[Tt],useFactory:e=>{let t=e.get(L0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(zt),o=e.get(Gb);Bb(i,()=>{r(!0)}),e.get(Em).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function bF(){return Na(3,[{provide:ll,multi:!0,useFactory:()=>{let e=O(zt);return()=>{e.setUpLocationChangeListener()}}},{provide:Dm,useValue:2}])}var Wb=new q("");function CF(n){return Na(0,[{provide:Wb,useExisting:wF},{provide:Ll,useExisting:n}])}function bm(){return Na(8,[ob,{provide:Ul,useExisting:ob}])}function TF(n){let e=[{provide:Vb,useValue:dF},{provide:Lb,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Na(9,e)}var SF=[So,{provide:Ta,useClass:ko},zt,Aa,{provide:Rr,useFactory:qb,deps:[zt]},Im,[]],gn=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[SF,[],{provide:ba,multi:!0,useValue:t},[],r?.errorHandler?{provide:Ub,useValue:r.errorHandler}:[],{provide:Ma,useValue:r||{}},r?.useHash?RF():MF(),AF(),r?.preloadingStrategy?CF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?NF(r):[],r?.bindToComponentInputs?bm().\u0275providers:[],r?.enableViewTransitions?TF().\u0275providers:[],xF()]}}static forChild(t){return{ngModule:n,providers:[{provide:ba,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Sr({type:n});static \u0275inj=Er({})}return n})();function AF(){return{provide:$b,useFactory:()=>{let n=O(H0),e=O(Oe),t=O(Ma),r=O(Em),i=O(Ta);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EF(i,r,n,e,t)}}}function RF(){return{provide:$n,useClass:j0}}function MF(){return{provide:$n,useClass:xg}}function NF(n){return[n.initialNavigation==="disabled"?bF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?DF().\u0275providers:[]]}var ub=new q("");function xF(){return[{provide:ub,useFactory:zb},{provide:dl,multi:!0,useExisting:ub}]}var nC=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(le(pi),le(Cr))};static \u0275dir=Ke({type:n})}return n})(),rC=(()=>{class n extends nC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})();static \u0275dir=Ke({type:n,features:[hn]})}return n})(),Mm=new q("");var PF={provide:Mm,useExisting:wr(()=>Ho),multi:!0};function kF(){let n=Bn()?Bn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OF=new q(""),Ho=(()=>{class n extends nC{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(le(pi),le(Cr),le(OF,8))};static \u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&gt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Co([PF]),hn]})}return n})();function xr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function iC(n){return n!=null&&typeof n.length=="number"}var Nm=new q(""),oC=new q(""),FF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ze=class{static min(e){return VF(e)}static max(e){return LF(e)}static required(e){return sC(e)}static requiredTrue(e){return UF(e)}static email(e){return jF(e)}static minLength(e){return BF(e)}static maxLength(e){return $F(e)}static pattern(e){return HF(e)}static nullValidator(e){return ql(e)}static compose(e){return hC(e)}static composeAsync(e){return pC(e)}};function VF(n){return e=>{if(xr(e.value)||xr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function LF(n){return e=>{if(xr(e.value)||xr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function sC(n){return xr(n.value)?{required:!0}:null}function UF(n){return n.value===!0?null:{required:!0}}function jF(n){return xr(n.value)||FF.test(n.value)?null:{email:!0}}function BF(n){return e=>xr(e.value)||!iC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function $F(n){return e=>iC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function HF(n){if(!n)return ql;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function ql(n){return null}function aC(n){return n!=null}function cC(n){return gi(n)?Re(n):n}function uC(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function lC(n,e){return e.map(t=>t(n))}function qF(n){return!n.validate}function dC(n){return n.map(e=>qF(e)?e:t=>e.validate(t))}function hC(n){if(!n)return null;let e=n.filter(aC);return e.length==0?null:function(t){return uC(lC(t,e))}}function fC(n){return n!=null?hC(dC(n)):null}function pC(n){if(!n)return null;let e=n.filter(aC);return e.length==0?null:function(t){let r=lC(t,e).map(cC);return Sf(r).pipe(pe(uC))}}function gC(n){return n!=null?pC(dC(n)):null}function Kb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mC(n){return n._rawValidators}function yC(n){return n._rawAsyncValidators}function Cm(n){return n?Array.isArray(n)?n:[n]:[]}function zl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Qb(n,e){let t=Cm(e);return Cm(n).forEach(i=>{zl(t,i)||t.push(i)}),t}function Yb(n,e){return Cm(e).filter(t=>!zl(n,t))}var Gl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Bo=class extends Gl{name;get formDirective(){return null}get path(){return null}},Fa=class extends Gl{_parent=null;name=null;valueAccessor=null},Wl=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},l9=ae(L({},zF),{"[class.ng-submitted]":"isSubmitted"}),Jl=(()=>{class n extends Wl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(le(Fa,2))};static \u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&hl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[hn]})}return n})(),Xl=(()=>{class n extends Wl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(le(Bo,10))};static \u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&hl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[hn]})}return n})();var xa="VALID",$l="INVALID",Uo="PENDING",Pa="DISABLED",Pr=class{},Kl=class extends Pr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ka=class extends Pr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Oa=class extends Pr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},jo=class extends Pr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Tm=class extends Pr{source;constructor(e){super(),this.source=e}},Sm=class extends Pr{source;constructor(e){super(),this.source=e}};function xm(n){return(ed(n)?n.validators:n)||null}function GF(n){return Array.isArray(n)?fC(n):n||null}function Pm(n,e){return(ed(e)?e.asyncValidators:n)||null}function WF(n){return Array.isArray(n)?gC(n):n||null}function ed(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function vC(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function _C(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var $o=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Un(this.statusReactive)}set status(e){Un(()=>this.statusReactive.set(e))}_status=aa(()=>this.statusReactive());statusReactive=Tr(void 0);get valid(){return this.status===xa}get invalid(){return this.status===$l}get pending(){return this.status==Uo}get disabled(){return this.status===Pa}get enabled(){return this.status!==Pa}errors;get pristine(){return Un(this.pristineReactive)}set pristine(e){Un(()=>this.pristineReactive.set(e))}_pristine=aa(()=>this.pristineReactive());pristineReactive=Tr(!0);get dirty(){return!this.pristine}get touched(){return Un(this.touchedReactive)}set touched(e){Un(()=>this.touchedReactive.set(e))}_touched=aa(()=>this.touchedReactive());touchedReactive=Tr(!1);get untouched(){return!this.touched}_events=new qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Qb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Qb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yb(e,this._rawAsyncValidators))}hasValidator(e){return zl(this._rawValidators,e)}hasAsyncValidator(e){return zl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Oa(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Oa(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ka(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ka(!0,r))}markAsPending(e={}){this.status=Uo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pa,this.errors=null,this._forEachChild(i=>{i.disable(ae(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kl(this.value,r)),this._events.next(new jo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(ae(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Uo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kl(this.value,t)),this._events.next(new jo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pa:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Uo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=cC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new jo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Pa:this.errors?$l:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uo)?Uo:this._anyControlsHaveStatus($l)?$l:xa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ka(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Oa(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ed(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=WF(this._rawAsyncValidators)}},Ql=class extends $o{constructor(e,t,r){super(xm(t),Pm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_C(this,!0,e),Object.keys(e).forEach(r=>{vC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Am=class extends Ql{};var IC=new q("",{providedIn:"root",factory:()=>km}),km="always";function KF(n,e){return[...e.path,n]}function Zb(n,e,t=km){Om(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YF(n,e),JF(n,e),ZF(n,e),QF(n,e)}function Jb(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Zl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Yl(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QF(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Om(n,e){let t=mC(n);e.validator!==null?n.setValidators(Kb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=yC(n);e.asyncValidator!==null?n.setAsyncValidators(Kb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Yl(e._rawValidators,i),Yl(e._rawAsyncValidators,i)}function Zl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=mC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=yC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Yl(e._rawValidators,r),Yl(e._rawAsyncValidators,r),t}function YF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wC(n,e)})}function ZF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function JF(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XF(n,e){n==null,Om(n,e)}function eV(n,e){return Zl(n,e)}function tV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function nV(n){return Object.getPrototypeOf(n.constructor)===rC}function rV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ho?t=o:nV(o)?r=o:i=o}),i||r||t||null}function oV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Xb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function eC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Hl=class extends $o{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(xm(t),Pm(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ed(t)&&(t.nonNullable||t.initialValueIsDefault)&&(eC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){eC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var sV=n=>n instanceof Hl;var td=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),aV={provide:Mm,useExisting:wr(()=>Fm),multi:!0},Fm=(()=>{class n extends rC{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&gt("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Co([aV]),hn]})}return n})();var EC=new q("");var cV={provide:Bo,useExisting:wr(()=>Va)},Va=(()=>{class n extends Bo{callSetDisabledState;get submitted(){return Un(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=aa(()=>this._submittedReactive());_submittedReactive=Tr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new We;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Zb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jb(t.control||null,t,!1),oV(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),rV(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Tm(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Sm(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Jb(r||null,t),sV(i)&&(Zb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);XF(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&eV(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Om(this.form,this),this._oldForm&&Zl(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(le(Nm,10),le(oC,10),le(IC,8))};static \u0275dir=Ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&gt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Co([cV]),hn,Dr]})}return n})();var uV={provide:Fa,useExisting:wr(()=>La)},La=(()=>{class n extends Fa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new We;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iV(this,o)}ngOnChanges(t){this._added||this._setUpControl(),tV(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return KF(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(le(Bo,13),le(Nm,10),le(oC,10),le(Mm,10),le(EC,8))};static \u0275dir=Ke({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Co([uV]),hn,Dr]})}return n})();var lV=(()=>{class n{_validator=ql;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ql,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,features:[Dr]})}return n})();var dV={provide:Nm,useExisting:wr(()=>Vm),multi:!0};var Vm=(()=>{class n extends lV{required;inputName="required";normalizeInput=mi;createValidator=t=>sC;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hi(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&sa("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Co([dV]),hn]})}return n})();var hV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Sr({type:n});static \u0275inj=Er({})}return n})(),Rm=class extends $o{constructor(e,t,r){super(xm(t),Pm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){_C(this,!1,e),e.forEach((r,i)=>{vC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function tC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var nd=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return tC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ql(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Am(i,r)}control(t,r,i){let o={};return this.useNonNullable?(tC(r)?o=r:(o.validators=r,o.asyncValidators=i),new Hl(t,ae(L({},o),{nonNullable:!0}))):new Hl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Rm(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Hl)return t;if(t instanceof $o)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:EC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:IC,useValue:t.callSetDisabledState??km}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Sr({type:n});static \u0275inj=Er({imports:[hV]})}return n})();var CC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fV=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},TC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,_=l&63;u||(_=64,s||(y=64)),r.push(t[h],t[p],t[y],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(CC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Um;let y=o<<2|a>>4;if(r.push(y),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Um=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pV=function(n){let e=CC(n);return TC.encodeByteArray(e,!0)},Ua=function(n){return pV(n).replace(/\./g,"")},Bm=function(n){try{return TC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mV=()=>gV().__FIREBASE_DEFAULTS__,yV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bm(n[1]);return e&&JSON.parse(e)},od=()=>{try{return mV()||yV()||vV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$m=n=>{var e,t;return(t=(e=od())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SC=n=>{let e=$m(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Hm=()=>{var n;return(n=od())===null||n===void 0?void 0:n.config},qm=n=>{var e;return(e=od())===null||e===void 0?void 0:e[`_${n}`]};var id=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function AC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ua(JSON.stringify(t)),Ua(JSON.stringify(s)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function _V(){var n;let e=(n=od())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PC(){let n=Ye();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kC(){return!_V()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zm(){try{return typeof indexedDB=="object"}catch{return!1}}function OC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var IV="FirebaseError",Nt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IV,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zn.prototype.create)}},zn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?wV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Nt(i,a,r)}};function wV(n,e){return n.replace(EV,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var EV=/\{\$([^}]+)}/g;function FC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ii(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(bC(o)&&bC(s)){if(!Ii(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function bC(n){return n!==null&&typeof n=="object"}function ja(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qo(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function zo(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function VC(n,e){let t=new jm(n,e);return t.subscribe.bind(t)}var jm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lm),i.error===void 0&&(i.error=Lm),i.complete===void 0&&(i.complete=Lm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function DV(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lm(){}var f9=4*60*60*1e3;function _t(n){return n&&n._delegate?n._delegate:n}var Gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var wi="[DEFAULT]";var Gm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new id;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CV(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function bV(n){return n===wi?void 0:n}function CV(n){return n.instantiationMode==="EAGER"}var sd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Gm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var TV=[],de=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(de||{}),SV={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},AV=de.INFO,RV={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},MV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=RV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},kr=class{constructor(e){this.name=e,this._logLevel=AV,this._logHandler=MV,this._userLogHandler=null,TV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var NV=(n,e)=>e.some(t=>n instanceof t),LC,UC;function xV(){return LC||(LC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PV(){return UC||(UC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jC=new WeakMap,Km=new WeakMap,BC=new WeakMap,Wm=new WeakMap,Ym=new WeakMap;function kV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(mn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&jC.set(t,n)}).catch(()=>{}),Ym.set(e,n),e}function OV(n){if(Km.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Km.set(n,e)}var Qm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Km.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $C(n){Qm=n(Qm)}function FV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ad(this),e,...t);return BC.set(r,e.sort?e.sort():[e]),mn(r)}:PV().includes(n)?function(...e){return n.apply(ad(this),e),mn(jC.get(this))}:function(...e){return mn(n.apply(ad(this),e))}}function VV(n){return typeof n=="function"?FV(n):(n instanceof IDBTransaction&&OV(n),NV(n,xV())?new Proxy(n,Qm):n)}function mn(n){if(n instanceof IDBRequest)return kV(n);if(Wm.has(n))return Wm.get(n);let e=VV(n);return e!==n&&(Wm.set(n,e),Ym.set(e,n)),e}var ad=n=>Ym.get(n);function qC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=mn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(mn(s.result),u.oldVersion,u.newVersion,mn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var LV=["get","getKey","getAll","getAllKeys","count"],UV=["put","add","delete","clear"],Zm=new Map;function HC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=UV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LV.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Zm.set(e,o),o}$C(n=>ae(L({},n),{get:(e,t,r)=>HC(e,t)||n.get(e,t,r),has:(e,t)=>!!HC(e,t)||n.has(e,t)}));var Xm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function jV(n){let e=n.getComponent();return e?.type==="VERSION"}var ey="@firebase/app",zC="0.10.18";var Gn=new kr("@firebase/app"),BV="@firebase/app-compat",$V="@firebase/analytics-compat",HV="@firebase/analytics",qV="@firebase/app-check-compat",zV="@firebase/app-check",GV="@firebase/auth",WV="@firebase/auth-compat",KV="@firebase/database",QV="@firebase/data-connect",YV="@firebase/database-compat",ZV="@firebase/functions",JV="@firebase/functions-compat",XV="@firebase/installations",eL="@firebase/installations-compat",tL="@firebase/messaging",nL="@firebase/messaging-compat",rL="@firebase/performance",iL="@firebase/performance-compat",oL="@firebase/remote-config",sL="@firebase/remote-config-compat",aL="@firebase/storage",cL="@firebase/storage-compat",uL="@firebase/firestore",lL="@firebase/vertexai",dL="@firebase/firestore-compat",hL="firebase",fL="11.2.0";var ty="[DEFAULT]",pL={[ey]:"fire-core",[BV]:"fire-core-compat",[HV]:"fire-analytics",[$V]:"fire-analytics-compat",[zV]:"fire-app-check",[qV]:"fire-app-check-compat",[GV]:"fire-auth",[WV]:"fire-auth-compat",[KV]:"fire-rtdb",[QV]:"fire-data-connect",[YV]:"fire-rtdb-compat",[ZV]:"fire-fn",[JV]:"fire-fn-compat",[XV]:"fire-iid",[eL]:"fire-iid-compat",[tL]:"fire-fcm",[nL]:"fire-fcm-compat",[rL]:"fire-perf",[iL]:"fire-perf-compat",[oL]:"fire-rc",[sL]:"fire-rc-compat",[aL]:"fire-gcs",[cL]:"fire-gcs-compat",[uL]:"fire-fst",[dL]:"fire-fst-compat",[lL]:"fire-vertex","fire-js":"fire-js",[hL]:"fire-js-all"};var cd=new Map,gL=new Map,ny=new Map;function GC(n,e){try{n.container.addComponent(e)}catch(t){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fr(n){let e=n.name;if(ny.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;ny.set(e,n);for(let t of cd.values())GC(t,n);for(let t of gL.values())GC(t,n);return!0}function $a(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yn(n){return n.settings!==void 0}var mL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new zn("app","Firebase",mL);var ry=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}};var Vr=fL;function Wn(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ty,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Or.create("bad-app-name",{appName:String(i)});if(t||(t=Hm()),!t)throw Or.create("no-options");let o=cd.get(i);if(o){if(Ii(t,o.options)&&Ii(r,o.config))return o;throw Or.create("duplicate-app",{appName:i})}let s=new sd(i);for(let u of ny.values())s.addComponent(u);let a=new ry(t,r,s);return cd.set(i,a),a}function ud(n=ty){let e=cd.get(n);if(!e&&n===ty&&Hm())return Wn();if(!e)throw Or.create("no-app",{appName:n});return e}function rn(n,e,t){var r;let i=(r=pL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}Fr(new Gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var yL="firebase-heartbeat-database",vL=1,Ba="firebase-heartbeat-store",Jm=null;function YC(){return Jm||(Jm=qC(yL,vL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ba)}catch(t){console.warn(t)}}}}).catch(n=>{throw Or.create("idb-open",{originalErrorMessage:n.message})})),Jm}function _L(n){return v(this,null,function*(){try{let t=(yield YC()).transaction(Ba),r=yield t.objectStore(Ba).get(ZC(n));return yield t.done,r}catch(e){if(e instanceof Nt)Gn.warn(e.message);else{let t=Or.create("idb-get",{originalErrorMessage:e?.message});Gn.warn(t.message)}}})}function WC(n,e){return v(this,null,function*(){try{let r=(yield YC()).transaction(Ba,"readwrite");yield r.objectStore(Ba).put(e,ZC(n)),yield r.done}catch(t){if(t instanceof Nt)Gn.warn(t.message);else{let r=Or.create("idb-set",{originalErrorMessage:t?.message});Gn.warn(r.message)}}})}function ZC(n){return`${n.name}!${n.options.appId}`}var IL=1024,wL=30*24*60*60*1e3,iy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=wL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=KC(),{heartbeatsToSend:r,unsentEntries:i}=EL(this._heartbeatsCache.heartbeats),o=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gn.warn(t),""}})}};function KC(){return new Date().toISOString().substring(0,10)}function EL(n,e=IL){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),QC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),QC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var oy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return zm()?OC().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _L(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function QC(n){return Ua(JSON.stringify({version:2,heartbeats:n})).length}function DL(n){Fr(new Gt("platform-logger",e=>new Xm(e),"PRIVATE")),Fr(new Gt("heartbeat",e=>new iy(e),"PRIVATE")),rn(ey,zC,n),rn(ey,zC,"esm2017"),rn("fire-js","")}DL("");function pT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var gT=pT,mT=new zn("auth","Firebase",pT());var gd=new kr("@firebase/auth");function bL(n,...e){gd.logLevel<=de.WARN&&gd.warn(`Auth (${Vr}): ${n}`,...e)}function dd(n,...e){gd.logLevel<=de.ERROR&&gd.error(`Auth (${Vr}): ${n}`,...e)}function _n(n,...e){throw Ry(n,...e)}function Ei(n,...e){return Ry(n,...e)}function yT(n,e,t){let r=Object.assign(Object.assign({},gT()),{[e]:t});return new zn("auth","Firebase",r).create(e,{appName:n.name})}function Ur(n){return yT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ry(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return mT.create(n,...e)}function Q(n,e,...t){if(!n)throw Ry(e,...t)}function Kn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function jr(n,e){n||Kn(e)}function uy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CL(){return JC()==="http:"||JC()==="https:"}function JC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function TL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CL()||NC()||"connection"in navigator)?navigator.onLine:!0}function SL(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Di=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,jr(t>e,"Short delay should be less than long delay!"),this.isMobile=RC()||xC()}get(){return TL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function My(n,e){jr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var md=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RL=new Di(3e4,6e4);function Ci(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Br(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return vT(n,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ja(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:y},l);return MC()||(_.referrerPolicy="no-referrer"),md.fetch()(_T(n,n.config.apiHost,t,p),_)}))})}function vT(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AL),e);try{let i=new ly(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ld(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ld(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw ld(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw yT(n,h,l);_n(n,h)}}catch(i){if(i instanceof Nt)throw i;_n(n,"network-request-failed",{message:String(i)})}})}function Td(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Br(n,e,t,r,i);return"mfaPendingCredential"in l&&_n(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function _T(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?My(n.config,i):`${n.config.apiScheme}://${i}`}function ML(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ly=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ei(this.auth,"network-request-failed")),RL.get())})}};function ld(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ei(n,e,r);return i.customData._tokenResponse=t,i}function XC(n){return n!==void 0&&n.enterprise!==void 0}var dy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ML(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function NL(n,e){return v(this,null,function*(){return Br(n,"GET","/v2/recaptchaConfig",Ci(n,e))})}function xL(n,e){return v(this,null,function*(){return Br(n,"POST","/v1/accounts:delete",e)})}function IT(n,e){return v(this,null,function*(){return Br(n,"POST","/v1/accounts:lookup",e)})}function qa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wT(n,e=!1){return v(this,null,function*(){let t=_t(n),r=yield t.getIdToken(e),i=Ny(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qa(sy(i.auth_time)),issuedAtTime:qa(sy(i.iat)),expirationTime:qa(sy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function sy(n){return Number(n)*1e3}function Ny(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bm(t);return i?JSON.parse(i):(dd("Failed to decode base64 JWT payload"),null)}catch(i){return dd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eT(n){let e=Ny(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ga(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Nt&&PL(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function PL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var hy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wa=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yd(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ga(n,IT(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DT(o.providerUserInfo):[],a=kL(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Wa(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function ET(n){return v(this,null,function*(){let e=_t(n);yield yd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function kL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DT(n){return n.map(e=>{var{providerId:t}=e,r=Cf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function OL(n,e){return v(this,null,function*(){let t=yield vT(n,{},()=>v(this,null,function*(){let r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=_T(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",md.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function FL(n,e){return v(this,null,function*(){return Br(n,"POST","/v2/accounts:revokeToken",Ci(n,e))})}var za=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=eT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield OL(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kn("not implemented")}};function Lr(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Go=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Cf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ga(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return wT(this,e)}reload(){return ET(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(yn(this.auth.app))return Promise.reject(Ur(this.auth));let e=yield this.getIdToken();return yield Ga(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,U=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:ce,isAnonymous:Fe,providerData:ne,stsTokenManager:D}=t;Q(G&&D,e,"internal-error");let m=za.fromJSON(this.name,D);Q(typeof G=="string",e,"internal-error"),Lr(p,e.name),Lr(y,e.name),Q(typeof ce=="boolean",e,"internal-error"),Q(typeof Fe=="boolean",e,"internal-error"),Lr(_,e.name),Lr(S,e.name),Lr(P,e.name),Lr(R,e.name),Lr(U,e.name),Lr(z,e.name);let I=new n({uid:G,auth:e,email:y,emailVerified:ce,displayName:p,isAnonymous:Fe,photoURL:S,phoneNumber:_,tenantId:P,stsTokenManager:m,createdAt:U,lastLoginAt:z});return ne&&Array.isArray(ne)&&(I.providerData=ne.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new za;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?DT(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new za;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var tT=new Map;function Qn(n){jr(n instanceof Function,"Expected a class definition");let e=tT.get(n);return e?(jr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tT.set(n,e),e)}var VL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),fy=VL;function hd(n,e,t){return`firebase:${n}:${e}:${t}`}var vd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=hd(this.userKey,i.apiKey,o),this.fullPersistenceKey=hd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Go._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Qn(fy),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Qn(fy),s=hd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p=Go._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function nT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ST(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(MT(e))return"Webos";if(CT(e))return"Safari";if((e.includes("chrome/")||TT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function bT(n=Ye()){return/firefox\//i.test(n)}function CT(n=Ye()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TT(n=Ye()){return/crios\//i.test(n)}function ST(n=Ye()){return/iemobile/i.test(n)}function AT(n=Ye()){return/android/i.test(n)}function RT(n=Ye()){return/blackberry/i.test(n)}function MT(n=Ye()){return/webos/i.test(n)}function xy(n=Ye()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LL(n=Ye()){var e;return xy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UL(){return PC()&&document.documentMode===10}function NT(n=Ye()){return xy(n)||AT(n)||MT(n)||RT(n)||/windows phone/i.test(n)||ST(n)}function xT(n,e=[]){let t;switch(n){case"Browser":t=nT(Ye());break;case"Worker":t=`${nT(Ye())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vr}/${r}`}var py=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jL(t){return v(this,arguments,function*(n,e={}){return Br(n,"GET","/v2/passwordPolicy",Ci(n,e))})}var BL=6,gy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:BL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var my=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _d(this),this.idTokenSubscription=new _d(this),this.beforeStateQueue=new py(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield IT(this,{idToken:e}),r=yield Go._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(yn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield yd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SL()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(yn(this.app))return Promise.reject(Ur(this));let t=e?_t(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return yn(this.app)?Promise.reject(Ur(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yn(this.app)?Promise.reject(Ur(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Qn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield jL(this),t=new gy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield FL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Qn(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=yield vd.create(this,[Qn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&bL(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wo(n){return _t(n)}var _d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sd={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $L(n){Sd=n}function PT(n){return Sd.loadJS(n)}function HL(){return Sd.recaptchaEnterpriseScript}function qL(){return Sd.gapiScript}function kT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var yy=class{constructor(){this.enterprise=new vy}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},vy=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var zL="recaptcha-enterprise",OT="NO_RECAPTCHA",_y=class{constructor(e){this.type=zL,this.auth=Wo(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(this,null,function*(){NL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new dy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;XC(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(OT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yy().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&XC(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HL();u.length!==0&&(u+=a),PT(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Ha(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new _y(n),s;if(i)s=OT;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function rT(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Ha(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Ha(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Ha(n,e,t);return r(n,a).catch(u=>v(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Ha(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield Ha(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function FT(n,e){let t=$a(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ii(o,e??{}))return i;_n(i,"already-initialized")}return t.initialize({options:e})}function GL(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function VT(n,e,t){let r=Wo(n);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=LT(e),{host:s,port:a}=WL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||KL()}function LT(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WL(n){let e=LT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:iT(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:iT(s)}}}function iT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function KL(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ka=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,t){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}};function QL(n,e){return v(this,null,function*(){return Br(n,"POST","/v1/accounts:signUp",e)})}function YL(n,e){return v(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithPassword",Ci(n,e))})}function ZL(n,e){return v(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))})}function JL(n,e){return v(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))})}var Qa=class n extends Ka{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rT(e,t,"signInWithPassword",YL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZL(e,{email:this._email,oobCode:this._password});default:_n(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rT(e,r,"signUpPassword",QL,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JL(e,{idToken:t,email:this._email,oobCode:this._password});default:_n(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ay(n,e){return v(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithIdp",Ci(n,e))})}function XL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e2(n){let e=qo(zo(n)).link,t=e?qo(zo(e)).deep_link_id:null,r=qo(zo(n)).deep_link_id;return(r?qo(zo(r)).link:null)||r||t||e||n}var Id=class n{constructor(e){var t,r,i,o,s,a;let u=qo(zo(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=XL((i=u.mode)!==null&&i!==void 0?i:null);Q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=e2(e);try{return new n(t)}catch{return null}}};var UT=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Qa._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Id.parseLink(r);return Q(i,"argument-error"),Qa._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),wd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Iy=class extends wd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ya=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Go._fromIdTokenResponse(e,r,i),s=oT(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=oT(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function oT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var wy=class n extends Nt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function jT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?wy._fromErrorAndOperation(n,o,e,r):o})}function t2(n,e,t=!1){return v(this,null,function*(){let r=yield Ga(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ya._forOperation(n,"link",r)})}function n2(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(yn(r.app))return Promise.reject(Ur(r));let i="reauthenticate";try{let o=yield Ga(n,jT(r,i,e,n),t);Q(o.idToken,r,"internal-error");let s=Ny(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(n.uid===a,r,"user-mismatch"),Ya._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&_n(r,"user-mismatch"),o}})}function BT(n,e,t=!1){return v(this,null,function*(){if(yn(n.app))return Promise.reject(Ur(n));let r="signIn",i=yield jT(n,r,e),o=yield Ya._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function $T(n,e){return v(this,null,function*(){return BT(Wo(n),e)})}function r2(n){return v(this,null,function*(){let e=Wo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Py(n,e,t){return yn(n.app)?Promise.reject(Ur(n)):$T(_t(n),UT.credential(e,t)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&r2(n),r}))}function HT(n,e,t,r){return _t(n).onIdTokenChanged(e,t,r)}function qT(n,e,t){return _t(n).beforeAuthStateChanged(e,t)}var Ed="__sak";var Dd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var i2=1e3,o2=10,s2=(()=>{class n extends Dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);UL()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,o2):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield cr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield cr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield cr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zT=s2;var a2=(()=>{class n extends Dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ky=a2;function c2(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var u2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield c2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function GT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Ey=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=GT("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function vn(){return window}function l2(n){vn().location.href=n}function WT(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}function d2(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function h2(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function f2(){return WT()?self:null}var KT="firebaseLocalStorageDb",p2=1,bd="firebaseLocalStorage",QT="fbase_key",bi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ad(n,e){return n.transaction([bd],e?"readwrite":"readonly").objectStore(bd)}function g2(){let n=indexedDB.deleteDatabase(KT);return new bi(n).toPromise()}function Dy(){let n=indexedDB.open(KT,p2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(bd,{keyPath:QT})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(bd)?e(r):(r.close(),yield g2(),e(yield Dy()))}))})}function sT(n,e,t){return v(this,null,function*(){let r=Ad(n,!0).put({[QT]:e,value:t});return new bi(r).toPromise()})}function m2(n,e){return v(this,null,function*(){let t=Ad(n,!1).get(e),r=yield new bi(t).toPromise();return r===void 0?null:r.value})}function aT(n,e){let t=Ad(n,!0).delete(e);return new bi(t).toPromise()}var y2=800,v2=3,_2=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Dy(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>v2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return WT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=u2._getInstance(f2()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield d2(),!this.activeServiceWorker)return;this.sender=new Ey(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Dy();return yield sT(t,Ed,"1"),yield aT(t,Ed),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>sT(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>m2(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>aT(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Ad(o,!1).getAll();return new bi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),YT=_2;var j9=kT("rcb"),B9=new Di(3e4,6e4);function I2(n,e){return e?Qn(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Za=class extends Ka{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ay(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ay(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ay(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function w2(n){return BT(n.auth,new Za(n),n.bypassAuthState)}function E2(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),n2(t,new Za(n),n.bypassAuthState)}function D2(n){return v(this,null,function*(){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),t2(t,new Za(n),n.bypassAuthState)})}var by=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return D2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:_n(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $9=new Di(2e3,1e4);var b2="pendingRedirect",fd=new Map,Cy=class n extends by{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=fd.get(this.auth._key());if(!e){try{let r=(yield C2(this.resolver,this.auth))?yield cr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return cr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,cr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function C2(n,e){return v(this,null,function*(){let t=A2(e),r=S2(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function T2(n,e){fd.set(n._key(),e)}function S2(n){return Qn(n._redirectPersistence)}function A2(n){return hd(b2,n.config.apiKey,n.name)}function R2(n,e,t=!1){return v(this,null,function*(){if(yn(n.app))return Promise.reject(Ur(n));let r=Wo(n),i=I2(r,e),s=yield new Cy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var M2=10*60*1e3,Ty=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZT(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M2&&this.cachedEventUids.clear(),this.cachedEventUids.has(cT(e))}saveEventToCache(e){this.cachedEventUids.add(cT(e)),this.lastProcessedEventTime=Date.now()}};function cT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function N2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZT(n);default:return!1}}function x2(t){return v(this,arguments,function*(n,e={}){return Br(n,"GET","/v1/projects",e)})}var P2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k2=/^https?/;function O2(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield x2(n);for(let t of e)try{if(F2(t))return}catch{}_n(n,"unauthorized-domain")})}function F2(n){let e=uy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!k2.test(t))return!1;if(P2.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var V2=new Di(3e4,6e4);function uT(){let n=vn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function L2(n){return new Promise((e,t)=>{var r,i,o;function s(){uT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uT(),t(Ei(n,"network-request-failed"))},timeout:V2.get()})}if(!((i=(r=vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=vn().gapi)===null||o===void 0)&&o.load)s();else{let a=kT("iframefcb");return vn()[a]=()=>{gapi.load?s():t(Ei(n,"network-request-failed"))},PT(`${qL()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw pd=null,e})}var pd=null;function U2(n){return pd=pd||L2(n),pd}var j2=new Di(5e3,15e3),B2="__/auth/iframe",$2="emulator/auth/iframe",H2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z2(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?My(e,$2):`https://${n.config.authDomain}/${B2}`,r={apiKey:e.apiKey,appName:n.name,v:Vr},i=q2.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ja(r).slice(1)}`}function G2(n){return v(this,null,function*(){let e=yield U2(n),t=vn().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:z2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H2,dontclear:!0},r=>new Promise((i,o)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ei(n,"network-request-failed"),a=vn().setTimeout(()=>{o(s)},j2.get());function u(){vn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var W2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},K2=500,Q2=600,Y2="_blank",Z2="http://localhost",Cd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function J2(n,e,t,r=K2,i=Q2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},W2),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ye().toLowerCase();t&&(a=TT(l)?Y2:t),bT(l)&&(e=e||Z2,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[_,S])=>`${y}${_}=${S},`,"");if(LL(l)&&a!=="_self")return X2(e||"",a),new Cd(null);let p=window.open(e||"",a,h);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new Cd(p)}function X2(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var eU="__/auth/handler",tU="emulator/auth/handler",nU=encodeURIComponent("fac");function lT(n,e,t,r,i,o){return v(this,null,function*(){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vr,eventId:i};if(e instanceof wd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",FC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Iy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${nU}=${encodeURIComponent(u)}`:"";return`${rU(n)}?${ja(a).slice(1)}${l}`})}function rU({config:n}){return n.emulator?My(n,tU):`https://${n.authDomain}/${eU}`}var cy="webStorageSupport",Sy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ky,this._completeRedirectFn=R2,this._overrideRedirectResult=T2}_openPopup(e,t,r,i){return v(this,null,function*(){var o;jr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield lT(e,t,r,uy(),i);return J2(e,s,GT())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield lT(e,t,r,uy(),i);return l2(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(jr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield G2(e),r=new Ty(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cy,{type:cy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[cy];s!==void 0&&t(!!s),_n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=O2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NT()||CT()||xy()}},JT=Sy;var dT="@firebase/auth",hT="1.8.2";var Ay=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function iU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oU(n){Fr(new Gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(n)},l=new my(r,i,o,u);return GL(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fr(new Gt("auth-internal",e=>{let t=Wo(e.getProvider("auth").getImmediate());return(r=>new Ay(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rn(dT,hT,iU(n)),rn(dT,hT,"esm2017")}var sU=5*60,aU=qm("authIdTokenMaxAge")||sU,fT=null,cU=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aU)return;let i=t?.token;fT!==i&&(fT=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Oy(n=ud()){let e=$a(n,"auth");if(e.isInitialized())return e.getImmediate();let t=FT(n,{popupRedirectResolver:JT,persistence:[YT,zT,ky]}),r=qm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=cU(o.toString());qT(t,s,()=>s(t.currentUser)),HT(t,a=>s(a))}}let i=$m("auth");return i&&VT(t,`http://${i}`),t}function uU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$L({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ei("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",uU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oU("Browser");var $r={apiKey:"AIzaSyAVJIMz4fZa52bhaEviW9KZDe0T0FyrvoM",authDomain:"mks-coaching.firebaseapp.com",projectId:"mks-coaching",storageBucket:"mks-coaching.firebasestorage.app",messagingSenderId:"473942184193",appId:"1:473942184193:web:3bcabc4621d1c2058a0b00"};var lU="firebase",dU="11.2.0";rn(lU,dU,"app");function hU(n,e){n&1&&(k(0,"p"),F(1,"Email invalide"),M())}function fU(n,e){n&1&&(k(0,"p"),F(1,"Mot de passe invalide"),M())}function pU(n,e){n&1&&(k(0,"li"),F(1,"Mot de passe doit contenir au moins une lettre majuscule."),M())}function gU(n,e){n&1&&(k(0,"li"),F(1,"Mot de passe doit contenir au moins une lettre minuscule."),M())}function mU(n,e){n&1&&(k(0,"li"),F(1,"Au moins un chiffre."),M())}function yU(n,e){n&1&&(k(0,"li"),F(1,"Au moins un charact\xE8re sp\xE9cial."),M())}function vU(n,e){n&1&&(k(0,"li"),F(1,"Au moins 8 charact\xE8res."),M())}function _U(n,e){if(n&1&&(je(0,hU,2,0,"p")(1,fU,2,0,"p"),k(2,"ul"),je(3,pU,2,0,"li")(4,gU,2,0,"li")(5,mU,2,0,"li")(6,yU,2,0,"li")(7,vU,2,0,"li"),M()),n&2){let t=Ln();Vn(t.email!=null&&t.email.invalid?0:-1),re(),Vn(t.password!=null&&t.password.invalid?1:-1),re(2),Vn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[A-Z])")?-1:3),re(),Vn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[a-z])")?-1:4),re(),Vn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[0-9])")?-1:5),re(),Vn(!(t.password==null||t.password.value==null)&&t.password.value.match("(?=.*[!@#$%^&*])")?-1:6),re(),Vn(!(t.password==null||t.password.value==null)&&t.password.value.match(".{8,}")?-1:7)}}var IU=/^(?=[^A-Z]*[A-Z])(?=[^a-z]*[a-z])(?=\D*\d).{8,}$/,SW=Wn($r),Rd=class n{constructor(e){this.router=e}formBuilder=O(nd);profileForm=this.formBuilder.group({password:["",[ze.required,ze.pattern(IU)]],email:["",[ze.required,ze.email]]});get password(){return this.profileForm.get("password")}get email(){return this.profileForm.get("email")}onSubmit(){console.log("Click")}handleSubmit(){this.connect(this.profileForm.value.email,this.profileForm.value.password)}connect(e,t){console.log("Service connect");let r=Oy();Py(r,e,t).then(i=>{let o=i.user;console.log(o.email),console.log(o.displayName),console.log(o.phoneNumber),console.log(o.metadata.creationTime),console.log(o.metadata.lastSignInTime),this.router.navigate(["/dashboard"])}).catch(i=>{let o=i.code,s=i.message;console.log(o),console.log(s)})}static \u0275fac=function(t){return new(t||n)(le(zt))};static \u0275cmp=at({type:n,selectors:[["app-authentification"]],decls:25,vars:2,consts:[[1,"bg-gray-100","flex","items-center","justify-center","h-screen"],[1,"bg-white","p-8","rounded-lg","shadow-lg","w-96"],[1,"text-2xl","font-bold","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","name","email","placeholder","Votre email","formControlName","email","required","",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","name","password","placeholder","Votre mot de passe","required","","formControlName","password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","submit",1,"w-full","bg-indigo-600","text-white","py-2","px-4","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2",3,"click"],[1,"mt-4","text-center","text-sm","text-gray-600"],["routerLink","/signup",1,"text-indigo-600","hover:text-indigo-500"],["disabled","",1,"text-indigo-600","hover:text-indigo-500"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"h2",2),F(3,"Connexion"),M(),k(4,"form",3),gt("ngSubmit",function(){return r.handleSubmit()}),k(5,"div",4)(6,"label",5),F(7,"Email"),M(),Ne(8,"input",6),M(),k(9,"div",7)(10,"label",8),F(11,"Mot de passe"),M(),Ne(12,"input",9),M(),k(13,"button",10),gt("click",function(){return r.onSubmit()}),F(14," Se connecter "),M()(),k(15,"p",11),F(16," Pas encore de compte ? "),k(17,"a",12),F(18,"Inscrivez-vous"),M()(),k(19,"p",11),F(20," Mot de passe oubli\xE9 ? "),k(21,"a",13),F(22,"R\xE9initialisation"),M()(),k(23,"div"),je(24,_U,8,7),M()()()),t&2&&(re(4),Se("formGroup",r.profileForm),re(20),Vn(r.password!=null&&r.password.dirty&&(r.email!=null&&r.email.dirty)?24:-1))},dependencies:[rd,td,Ho,Jl,Xl,Vm,Va,La,At,gn,Nr],encapsulation:2})};var XT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eS={};var Yn,Fy;(function(){var n;function e(D,m){function I(){}I.prototype=m.prototype,D.D=m.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(E,b,T){for(var w=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)w[Tn-2]=arguments[Tn];return m.prototype[b].apply(E,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,m,I){I||(I=0);var E=Array(16);if(typeof m=="string")for(var b=0;16>b;++b)E[b]=m.charCodeAt(I++)|m.charCodeAt(I++)<<8|m.charCodeAt(I++)<<16|m.charCodeAt(I++)<<24;else for(b=0;16>b;++b)E[b]=m[I++]|m[I++]<<8|m[I++]<<16|m[I++]<<24;m=D.g[0],I=D.g[1],b=D.g[2];var T=D.g[3],w=m+(T^I&(b^T))+E[0]+3614090360&4294967295;m=I+(w<<7&4294967295|w>>>25),w=T+(b^m&(I^b))+E[1]+3905402710&4294967295,T=m+(w<<12&4294967295|w>>>20),w=b+(I^T&(m^I))+E[2]+606105819&4294967295,b=T+(w<<17&4294967295|w>>>15),w=I+(m^b&(T^m))+E[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=m+(T^I&(b^T))+E[4]+4118548399&4294967295,m=I+(w<<7&4294967295|w>>>25),w=T+(b^m&(I^b))+E[5]+1200080426&4294967295,T=m+(w<<12&4294967295|w>>>20),w=b+(I^T&(m^I))+E[6]+2821735955&4294967295,b=T+(w<<17&4294967295|w>>>15),w=I+(m^b&(T^m))+E[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=m+(T^I&(b^T))+E[8]+1770035416&4294967295,m=I+(w<<7&4294967295|w>>>25),w=T+(b^m&(I^b))+E[9]+2336552879&4294967295,T=m+(w<<12&4294967295|w>>>20),w=b+(I^T&(m^I))+E[10]+4294925233&4294967295,b=T+(w<<17&4294967295|w>>>15),w=I+(m^b&(T^m))+E[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=m+(T^I&(b^T))+E[12]+1804603682&4294967295,m=I+(w<<7&4294967295|w>>>25),w=T+(b^m&(I^b))+E[13]+4254626195&4294967295,T=m+(w<<12&4294967295|w>>>20),w=b+(I^T&(m^I))+E[14]+2792965006&4294967295,b=T+(w<<17&4294967295|w>>>15),w=I+(m^b&(T^m))+E[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=m+(b^T&(I^b))+E[1]+4129170786&4294967295,m=I+(w<<5&4294967295|w>>>27),w=T+(I^b&(m^I))+E[6]+3225465664&4294967295,T=m+(w<<9&4294967295|w>>>23),w=b+(m^I&(T^m))+E[11]+643717713&4294967295,b=T+(w<<14&4294967295|w>>>18),w=I+(T^m&(b^T))+E[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=m+(b^T&(I^b))+E[5]+3593408605&4294967295,m=I+(w<<5&4294967295|w>>>27),w=T+(I^b&(m^I))+E[10]+38016083&4294967295,T=m+(w<<9&4294967295|w>>>23),w=b+(m^I&(T^m))+E[15]+3634488961&4294967295,b=T+(w<<14&4294967295|w>>>18),w=I+(T^m&(b^T))+E[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=m+(b^T&(I^b))+E[9]+568446438&4294967295,m=I+(w<<5&4294967295|w>>>27),w=T+(I^b&(m^I))+E[14]+3275163606&4294967295,T=m+(w<<9&4294967295|w>>>23),w=b+(m^I&(T^m))+E[3]+4107603335&4294967295,b=T+(w<<14&4294967295|w>>>18),w=I+(T^m&(b^T))+E[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=m+(b^T&(I^b))+E[13]+2850285829&4294967295,m=I+(w<<5&4294967295|w>>>27),w=T+(I^b&(m^I))+E[2]+4243563512&4294967295,T=m+(w<<9&4294967295|w>>>23),w=b+(m^I&(T^m))+E[7]+1735328473&4294967295,b=T+(w<<14&4294967295|w>>>18),w=I+(T^m&(b^T))+E[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=m+(I^b^T)+E[5]+4294588738&4294967295,m=I+(w<<4&4294967295|w>>>28),w=T+(m^I^b)+E[8]+2272392833&4294967295,T=m+(w<<11&4294967295|w>>>21),w=b+(T^m^I)+E[11]+1839030562&4294967295,b=T+(w<<16&4294967295|w>>>16),w=I+(b^T^m)+E[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=m+(I^b^T)+E[1]+2763975236&4294967295,m=I+(w<<4&4294967295|w>>>28),w=T+(m^I^b)+E[4]+1272893353&4294967295,T=m+(w<<11&4294967295|w>>>21),w=b+(T^m^I)+E[7]+4139469664&4294967295,b=T+(w<<16&4294967295|w>>>16),w=I+(b^T^m)+E[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=m+(I^b^T)+E[13]+681279174&4294967295,m=I+(w<<4&4294967295|w>>>28),w=T+(m^I^b)+E[0]+3936430074&4294967295,T=m+(w<<11&4294967295|w>>>21),w=b+(T^m^I)+E[3]+3572445317&4294967295,b=T+(w<<16&4294967295|w>>>16),w=I+(b^T^m)+E[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=m+(I^b^T)+E[9]+3654602809&4294967295,m=I+(w<<4&4294967295|w>>>28),w=T+(m^I^b)+E[12]+3873151461&4294967295,T=m+(w<<11&4294967295|w>>>21),w=b+(T^m^I)+E[15]+530742520&4294967295,b=T+(w<<16&4294967295|w>>>16),w=I+(b^T^m)+E[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=m+(b^(I|~T))+E[0]+4096336452&4294967295,m=I+(w<<6&4294967295|w>>>26),w=T+(I^(m|~b))+E[7]+1126891415&4294967295,T=m+(w<<10&4294967295|w>>>22),w=b+(m^(T|~I))+E[14]+2878612391&4294967295,b=T+(w<<15&4294967295|w>>>17),w=I+(T^(b|~m))+E[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=m+(b^(I|~T))+E[12]+1700485571&4294967295,m=I+(w<<6&4294967295|w>>>26),w=T+(I^(m|~b))+E[3]+2399980690&4294967295,T=m+(w<<10&4294967295|w>>>22),w=b+(m^(T|~I))+E[10]+4293915773&4294967295,b=T+(w<<15&4294967295|w>>>17),w=I+(T^(b|~m))+E[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=m+(b^(I|~T))+E[8]+1873313359&4294967295,m=I+(w<<6&4294967295|w>>>26),w=T+(I^(m|~b))+E[15]+4264355552&4294967295,T=m+(w<<10&4294967295|w>>>22),w=b+(m^(T|~I))+E[6]+2734768916&4294967295,b=T+(w<<15&4294967295|w>>>17),w=I+(T^(b|~m))+E[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=m+(b^(I|~T))+E[4]+4149444226&4294967295,m=I+(w<<6&4294967295|w>>>26),w=T+(I^(m|~b))+E[11]+3174756917&4294967295,T=m+(w<<10&4294967295|w>>>22),w=b+(m^(T|~I))+E[2]+718787259&4294967295,b=T+(w<<15&4294967295|w>>>17),w=I+(T^(b|~m))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+m&4294967295,D.g[1]=D.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,m){m===void 0&&(m=D.length);for(var I=m-this.blockSize,E=this.B,b=this.h,T=0;T<m;){if(b==0)for(;T<=I;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<m;)if(E[b++]=D.charCodeAt(T++),b==this.blockSize){i(this,E),b=0;break}}else for(;T<m;)if(E[b++]=D[T++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=m},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var m=1;m<D.length-8;++m)D[m]=0;var I=8*this.o;for(m=D.length-8;m<D.length;++m)D[m]=I&255,I/=256;for(this.u(D),D=Array(16),m=I=0;4>m;++m)for(var E=0;32>E;E+=8)D[I++]=this.g[m]>>>E&255;return D};function o(D,m){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=m(D)}function s(D,m){this.h=m;for(var I=[],E=!0,b=D.length-1;0<=b;b--){var T=D[b]|0;E&&T==m||(I[b]=T,E=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(m){return new s([m|0],0>m?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var m=[],I=1,E=0;D>=I;E++)m[E]=D/I|0,I*=4294967296;return new s(m,0)}function h(D,m){if(D.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(D.charAt(0)=="-")return R(h(D.substring(1),m));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(m,8)),E=p,b=0;b<D.length;b+=8){var T=Math.min(8,D.length-b),w=parseInt(D.substring(b,b+T),m);8>T?(T=l(Math.pow(m,T)),E=E.j(T).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),y=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var D=0,m=1,I=0;I<this.g.length;I++){var E=this.i(I);D+=(0<=E?E:4294967296+E)*m,m*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(P(this))return"-"+R(this).toString(D);for(var m=l(Math.pow(D,6)),I=this,E="";;){var b=ce(I,m).g;I=U(I,b.j(m));var T=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,S(I))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var m=0;m<D.g.length;m++)if(D.g[m]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=U(this,D),P(D)?-1:S(D)?0:1};function R(D){for(var m=D.g.length,I=[],E=0;E<m;E++)I[E]=~D.g[E];return new s(I,~D.h).add(y)}n.abs=function(){return P(this)?R(this):this},n.add=function(D){for(var m=Math.max(this.g.length,D.g.length),I=[],E=0,b=0;b<=m;b++){var T=E+(this.i(b)&65535)+(D.i(b)&65535),w=(T>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);E=w>>>16,T&=65535,w&=65535,I[b]=w<<16|T}return new s(I,I[I.length-1]&-2147483648?-1:0)};function U(D,m){return D.add(R(m))}n.j=function(D){if(S(this)||S(D))return p;if(P(this))return P(D)?R(this).j(R(D)):R(R(this).j(D));if(P(D))return R(this.j(R(D)));if(0>this.l(_)&&0>D.l(_))return l(this.m()*D.m());for(var m=this.g.length+D.g.length,I=[],E=0;E<2*m;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<D.g.length;b++){var T=this.i(E)>>>16,w=this.i(E)&65535,Tn=D.i(b)>>>16,ws=D.i(b)&65535;I[2*E+2*b]+=w*ws,z(I,2*E+2*b),I[2*E+2*b+1]+=T*ws,z(I,2*E+2*b+1),I[2*E+2*b+1]+=w*Tn,z(I,2*E+2*b+1),I[2*E+2*b+2]+=T*Tn,z(I,2*E+2*b+2)}for(E=0;E<m;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=m;E<2*m;E++)I[E]=0;return new s(I,0)};function z(D,m){for(;(D[m]&65535)!=D[m];)D[m+1]+=D[m]>>>16,D[m]&=65535,m++}function G(D,m){this.g=D,this.h=m}function ce(D,m){if(S(m))throw Error("division by zero");if(S(D))return new G(p,p);if(P(D))return m=ce(R(D),m),new G(R(m.g),R(m.h));if(P(m))return m=ce(D,R(m)),new G(R(m.g),m.h);if(30<D.g.length){if(P(D)||P(m))throw Error("slowDivide_ only works with positive integers.");for(var I=y,E=m;0>=E.l(D);)I=Fe(I),E=Fe(E);var b=ne(I,1),T=ne(E,1);for(E=ne(E,2),I=ne(I,2);!S(E);){var w=T.add(E);0>=w.l(D)&&(b=b.add(I),T=w),E=ne(E,1),I=ne(I,1)}return m=U(D,b.j(m)),new G(b,m)}for(b=p;0<=D.l(m);){for(I=Math.max(1,Math.floor(D.m()/m.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(I),w=T.j(m);P(w)||0<w.l(D);)I-=E,T=l(I),w=T.j(m);S(T)&&(T=y),b=b.add(T),D=U(D,w)}return new G(b,D)}n.A=function(D){return ce(this,D).h},n.and=function(D){for(var m=Math.max(this.g.length,D.g.length),I=[],E=0;E<m;E++)I[E]=this.i(E)&D.i(E);return new s(I,this.h&D.h)},n.or=function(D){for(var m=Math.max(this.g.length,D.g.length),I=[],E=0;E<m;E++)I[E]=this.i(E)|D.i(E);return new s(I,this.h|D.h)},n.xor=function(D){for(var m=Math.max(this.g.length,D.g.length),I=[],E=0;E<m;E++)I[E]=this.i(E)^D.i(E);return new s(I,this.h^D.h)};function Fe(D){for(var m=D.g.length+1,I=[],E=0;E<m;E++)I[E]=D.i(E)<<1|D.i(E-1)>>>31;return new s(I,D.h)}function ne(D,m){var I=m>>5;m%=32;for(var E=D.g.length-I,b=[],T=0;T<E;T++)b[T]=0<m?D.i(T+I)>>>m|D.i(T+I+1)<<32-m:D.i(T+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fy=eS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Yn=eS.Integer=s}).apply(typeof XT<"u"?XT:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zn={};var Vy,wU,Qo,Ly,Ja,Nd,Uy,jy,By;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var V=Array(arguments.length-2),De=2;De<arguments.length;De++)V[De-2]=arguments[De];return d.prototype[C].apply(g,V)}}function P(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let V=0;V<A;V++)c[C+V]=g[V]}else c.push(g)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ce(c){return ce[" "](c),c}ce[" "]=function(){};var Fe=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ne(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function m(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function w(){var c=kh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Tn{constructor(){this.h=this.g=null}add(d,f){let g=ws.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ws=new U(()=>new HA,c=>c.reset());class HA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Es,Ds=!1,kh=new Tn,B_=()=>{let c=a.Promise.resolve(void 0);Es=()=>{c.then(qA)}};var qA=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){T(f)}var d=ws;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ds=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var zA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function bs(c,d){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Fe){e:{try{ce(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:GA[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&bs.aa.h.call(this)}}S(bs,rt);var GA={2:"touch",3:"pen",4:"mouse"};bs.prototype.h=function(){bs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),WA=0;function KA(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++WA,this.da=this.fa=!1}function _c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ic(c){this.src=c,this.g={},this.h=0}Ic.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var V=Fh(c,d,g,C);return-1<V?(d=c[V],f||(d.fa=!1)):(d=new KA(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Oh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(_c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Fh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Vh="closure_lm_"+(1e6*Math.random()|0),Lh={};function $_(c,d,f,g,C){if(g&&g.once)return q_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)$_(c,d[A],f,g,C);return null}return f=$h(f),c&&c[Cs]?c.K(d,f,l(g)?!!g.capture:!!g,C):H_(c,d,f,!1,g,C)}function H_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var V=l(C)?!!C.capture:!!C,De=jh(c);if(De||(c[Vh]=De=new Ic(c)),f=De.add(d,f,g,V,A),f.proxy)return f;if(g=QA(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)zA||(C=V),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(G_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function QA(){function c(f){return d.call(c.src,c.listener,f)}let d=YA;return c}function q_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)q_(c,d[A],f,g,C);return null}return f=$h(f),c&&c[Cs]?c.L(d,f,l(g)?!!g.capture:!!g,C):H_(c,d,f,!0,g,C)}function z_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)z_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=$h(f),c&&c[Cs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Fh(A,f,g,C),-1<f&&(_c(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=jh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Fh(d,f,g,C)),(f=-1<c?d[c]:null)&&Uh(f))}function Uh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Cs])Oh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(G_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=jh(d))?(Oh(f,c),f.h==0&&(f.src=null,d[Vh]=null)):_c(c)}}}function G_(c){return c in Lh?Lh[c]:Lh[c]="on"+c}function YA(c,d){if(c.da)c=!0;else{d=new bs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Uh(c),c=f.call(g,d)}return c}function jh(c){return c=c[Vh],c instanceof Ic?c:null}var Bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function $h(c){return typeof c=="function"?c:(c[Bh]||(c[Bh]=function(d){return c.handleEvent(d)}),c[Bh])}function it(){ir.call(this),this.i=new Ic(this),this.M=this,this.F=null}S(it,ir),it.prototype[Cs]=!0,it.prototype.removeEventListener=function(c,d,f,g){z_(this,c,d,f,g)};function lt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new rt(d,c);else if(d instanceof rt)d.target=d.target||c;else{var C=d;d=new rt(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var V=d.g=f[A];C=wc(V,g,!0,d)&&C}if(V=d.g=c,C=wc(V,g,!0,d)&&C,C=wc(V,g,!1,d)&&C,f)for(A=0;A<f.length;A++)V=d.g=f[A],C=wc(V,g,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)_c(f[g]);delete c.g[d],c.h--}}this.F=null},it.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},it.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function wc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var V=d[A];if(V&&!V.da&&V.capture==f){var De=V.listener,Xe=V.ha||V.src;V.fa&&Oh(c.i,V),C=De.call(Xe,g)!==!1&&C}}return C&&!g.defaultPrevented}function W_(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function K_(c){c.g=W_(()=>{c.g=null,c.i&&(c.i=!1,K_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ZA extends ir{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:K_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(c){ir.call(this),this.h=c,this.g={}}S(Ts,ir);var Q_=[];function Y_(c){ne(c.g,function(d,f){this.g.hasOwnProperty(f)&&Uh(d)},c),c.g={}}Ts.prototype.N=function(){Ts.aa.N.call(this),Y_(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hh=a.JSON.stringify,JA=a.JSON.parse,XA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function qh(){}qh.prototype.h=null;function Z_(c){return c.h||(c.h=c.i())}function J_(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zh(){rt.call(this,"d")}S(zh,rt);function Gh(){rt.call(this,"c")}S(Gh,rt);var Qr={},X_=null;function Ec(){return X_=X_||new it}Qr.La="serverreachability";function eI(c){rt.call(this,Qr.La,c)}S(eI,rt);function As(c){let d=Ec();lt(d,new eI(d))}Qr.STAT_EVENT="statevent";function tI(c,d){rt.call(this,Qr.STAT_EVENT,c),this.stat=d}S(tI,rt);function dt(c){let d=Ec();lt(d,new tI(d,c))}Qr.Ma="timingevent";function nI(c,d){rt.call(this,Qr.Ma,c),this.size=d}S(nI,rt);function Rs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function eR(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var V="",De=A.split("&"),Xe=0;Xe<De.length;Xe++){var _e=De[Xe].split("=");if(1<_e.length){var ot=_e[0];_e=_e[1];var st=ot.split("_");V=2<=st.length&&st[1]=="type"?V+(ot+"="+_e+"&"):V+(ot+"=redacted&")}}else V=null;else V=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+V})}function tR(c,d,f,g,C,A,V){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+V})}function Vi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+rR(c,f)+(g?" "+g:"")})}function nR(c,d){c.info(function(){return"TIMEOUT: "+d})}Ms.prototype.info=function(){};function rR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var V=1;V<C.length;V++)C[V]=""}}}}return Hh(f)}catch{return d}}var Dc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wh;function bc(){}S(bc,qh),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},Wh=new bc;function or(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iI}function iI(){this.i=null,this.g="",this.h=!1}var oI={},Kh={};function Qh(c,d,f){c.L=1,c.v=Ac(Sn(d)),c.m=f,c.P=!0,sI(c,null)}function sI(c,d){c.F=Date.now(),Cc(c),c.A=Sn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),II(f.i,"t",g),c.C=0,f=c.j.J,c.h=new iI,c.g=LI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new ZA(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Q_[0]=C.toString()),C=Q_);for(var A=0;A<C.length;A++){var V=$_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.H?m(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),As(),eR(c.i,c.u,c.A,c.l,c.R,c.m)}or.prototype.ca=function(c){c=c.target;let d=this.M;d&&An(c)==3?d.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{let st=An(this.g);var d=this.g.Ba();let ji=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||SI(this.g)))){this.J||st!=4||d==7||(d==8||0>=ji?As(3):As(2)),Yh(this);var f=this.g.Z();this.X=f;t:if(aI(this)){var g=SI(this.g);c="";var C=g.length,A=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Ns(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,tR(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Xe=this.g;if((De=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(De)){var _e=De;break t}}_e=null}if(f=_e)Vi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,f);else{this.o=!1,this.s=3,dt(12),Yr(this),Ns(this);break e}}if(this.P){f=!0;let Qt;for(;!this.J&&this.C<V.length;)if(Qt=iR(this,V),Qt==Kh){st==4&&(this.s=4,dt(14),f=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==oI){this.s=4,dt(15),Vi(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else Vi(this.i,this.l,Qt,null),Zh(this,Qt);if(aI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||V.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)Vi(this.i,this.l,V,"[Invalid Chunked Response]"),Yr(this),Ns(this);else if(0<V.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),rf(ot),ot.M=!0,dt(11))}}else Vi(this.i,this.l,V,null),Zh(this,V);st==4&&Yr(this),this.o&&!this.J&&(st==4?kI(this.j,this):(this.o=!1,Cc(this)))}else wR(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Yr(this),Ns(this)}}}catch{}finally{}};function aI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function iR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kh:(f=Number(d.substring(f,g)),isNaN(f)?oI:(g+=1,g+f>d.length?Kh:(d=d.slice(g,g+f),c.C=g+f,d)))}or.prototype.cancel=function(){this.J=!0,Yr(this)};function Cc(c){c.S=Date.now()+c.I,cI(c,c.I)}function cI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rs(y(c.ba,c),d)}function Yh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}or.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(nR(this.i,this.A),this.L!=2&&(As(),dt(17)),Yr(this),this.s=2,Ns(this)):cI(this,this.S-c)};function Ns(c){c.j.G==0||c.J||kI(c.j,c)}function Yr(c){Yh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Y_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Zh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Jh(f.h,c))){if(!c.K&&Jh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Pc(f),Nc(f);else break e;nf(f),dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Rs(y(f.Za,f),6e3));if(1>=dI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Jr(f,11)}else if((c.K||f.g==c)&&Pc(f),!z(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let _e=C[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];let ot=_e[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=_e[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let ji=_e[5];ji!=null&&typeof ji=="number"&&0<ji&&(g=1.5*ji,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Qt=c.g;if(Qt){let Oc=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var A=g.h;A.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Xh(A,A.h),A.h=null))}if(g.D){let of=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;of&&(g.ya=of,Te(g.I,g.D,of))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var V=c;if(g.qa=VI(g,g.J?g.ia:null,g.W),V.K){hI(g.h,V);var De=V,Xe=g.L;Xe&&(De.I=Xe),De.B&&(Yh(De),Cc(De)),g.g=V}else xI(g);0<f.i.length&&xc(f)}else _e[0]!="stop"&&_e[0]!="close"||Jr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Jr(f,7):tf(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}As(4)}catch{}}var oR=class{constructor(c,d){this.g=c,this.map=d}};function uI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dI(c){return c.h?1:c.g?c.g.size:0}function Jh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xh(c,d){c.g?c.g.add(d):c.h=d}function hI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}uI.prototype.cancel=function(){if(this.i=fI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function fI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return P(c.i)}function sR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function aR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function pI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=aR(c),g=sR(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var gI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Zr){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,Sc(this,c.s),this.l=c.l;var d=c.i,f=new ks;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),mI(this,f),this.m=c.m}else c&&(d=String(c).match(gI))?(this.h=!1,Tc(this,d[1]||"",!0),this.o=xs(d[2]||""),this.g=xs(d[3]||"",!0),Sc(this,d[4]),this.l=xs(d[5]||"",!0),mI(this,d[6]||"",!0),this.m=xs(d[7]||"")):(this.h=!1,this.i=new ks(null,this.h))}Zr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ps(d,yI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ps(d,yI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ps(f,f.charAt(0)=="/"?dR:lR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ps(f,fR)),c.join("")};function Sn(c){return new Zr(c)}function Tc(c,d,f){c.j=f?xs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Sc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function mI(c,d,f){d instanceof ks?(c.i=d,pR(c.i,c.h)):(f||(d=Ps(d,hR)),c.i=new ks(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Ac(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ps(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,uR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yI=/[#\/\?@]/g,lR=/[#\?:]/g,dR=/[#\?]/g,hR=/[#\?@]/g,fR=/#/g;function ks(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function sr(c){c.g||(c.g=new Map,c.h=0,c.i&&cR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ks.prototype,n.add=function(c,d){sr(this),this.i=null,c=Li(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function vI(c,d){sr(c),d=Li(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _I(c,d){return sr(c),d=Li(c,d),c.g.has(d)}n.forEach=function(c,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){sr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){sr(this);let d=[];if(typeof c=="string")_I(this,c)&&(d=d.concat(this.g.get(Li(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return sr(this),this.i=null,c=Li(this,c),_I(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function II(c,d,f){vI(c,d),0<f.length&&(c.i=null,c.g.set(Li(c,d),P(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),V=this.V(g);for(g=0;g<V.length;g++){var C=A;V[g]!==""&&(C+="="+encodeURIComponent(String(V[g]))),c.push(C)}}return this.i=c.join("&")};function Li(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function pR(c,d){d&&!c.j&&(sr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(vI(this,g),II(this,C,f))},c)),c.j=d}function gR(c,d){let f=new Ms;if(a.Image){let g=new Image;g.onload=_(ar,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(ar,f,"TestLoadImage: error",!1,d,g),g.onabort=_(ar,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(ar,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function mR(c,d){let f=new Ms,g=new AbortController,C=setTimeout(()=>{g.abort(),ar(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?ar(f,"TestPingServer: ok",!0,d):ar(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),ar(f,"TestPingServer: error",!1,d)})}function ar(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function yR(){this.g=new XA}function vR(c,d,f){let g=f||"";try{pI(c,function(C,A){let V=C;l(C)&&(V=Hh(C)),d.push(g+A+"="+encodeURIComponent(V))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Os(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Os,qh),Os.prototype.g=function(){return new Rc(this.l,this.j)},Os.prototype.i=function(c){return function(){return c}}({});function Rc(c,d){it.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Rc,it),n=Rc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Vs(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Fs(this):Vs(this),this.readyState==3&&wI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Fs(this))},n.Qa=function(c){this.g&&(this.response=c,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Vs(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Vs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function EI(c){let d="";return ne(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ef(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=EI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Me(c){it.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Me,it);var _R=/^https?$/i,IR=["POST","PUT"];n=Me.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wh.g(),this.v=this.o?Z_(this.o):Z_(Wh),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){DI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IR,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,V]of f)this.g.setRequestHeader(A,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{TI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){DI(this,A)}};function DI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,bI(c),Mc(c)}function bI(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,lt(this,"complete"),lt(this,"abort"),Mc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mc(this,!0)),Me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?CI(this):this.bb())},n.bb=function(){CI(this)};function CI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||An(c)!=4||c.Z()!=2)){if(c.u&&An(c)==4)W_(c.Ea,0,c);else if(lt(c,"readystatechange"),An(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=V===0){var C=String(c.D).match(gI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!_R.test(C?C.toLowerCase():"")}f=g}if(f)lt(c,"complete"),lt(c,"success");else{c.m=6;try{var A=2<An(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",bI(c)}}finally{Mc(c)}}}}function Mc(c,d){if(c.g){TI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||lt(c,"ready");try{f.onreadystatechange=g}catch{}}}function TI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function An(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),JA(d)}};function SI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wR(c){let d={};c=(c.g&&2<=An(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(z(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function AI(c){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new uI(c&&c.concurrentRequestLimit),this.Da=new yR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=AI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){dt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=VI(this,null,this.W),xc(this)};function tf(c){if(RI(c),c.G==3){var d=c.U++,f=Sn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),Us(c,f),d=new or(c,c.j,d),d.L=2,d.v=Ac(Sn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=LI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cc(d)}FI(c)}function Nc(c){c.g&&(rf(c),c.g.cancel(),c.g=null)}function RI(c){Nc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Pc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xc(c){if(!lI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Es||B_(),Ds||(Es(),Ds=!0),kh.add(d,c),c.B=0}}function ER(c,d){return dI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rs(y(c.Ga,c,d),OI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new or(this,this.j,c),A=this.o;if(this.S&&(A?(A=m(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=NI(this,C,d),f=Sn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),Us(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(EI(A)))+"&"+d:this.m&&ef(f,this.m,A)),Xh(this.h,C),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),C.T=!0,Qh(C,f,null)):Qh(C,f,d),this.G=2}}else this.G==3&&(c?MI(this,c):this.i.length==0||lI(this.h)||MI(this))};function MI(c,d){var f;d?f=d.l:f=c.U++;let g=Sn(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),Us(c,g),c.m&&c.o&&ef(g,c.m,c.o),f=new or(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=NI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xh(c.h,f),Qh(f,g,d)}function Us(c,d){c.H&&ne(c.H,function(f,g){Te(d,g,f)}),c.l&&pI({},function(f,g){Te(d,g,f)})}function NI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let V=["count="+f];A==-1?0<f?(A=C[0].g,V.push("ofs="+A)):A=0:V.push("ofs="+A);let De=!0;for(let Xe=0;Xe<f;Xe++){let _e=C[Xe].g,ot=C[Xe].map;if(_e-=A,0>_e)A=Math.max(0,C[Xe].g-100),De=!1;else try{vR(ot,V,"req"+_e+"_")}catch{g&&g(ot)}}if(De){g=V.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function xI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Es||B_(),Ds||(Es(),Ds=!0),kh.add(d,c),c.v=0}}function nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rs(y(c.Fa,c),OI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,PI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rs(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Nc(this),PI(this))};function rf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function PI(c){c.g=new or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Sn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),Us(c,d),c.m&&c.o&&ef(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ac(Sn(d)),f.m=null,f.P=!0,sI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Nc(this),nf(this),dt(19))};function Pc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function kI(c,d){var f=null;if(c.g==d){Pc(c),rf(c),c.g=null;var g=2}else if(Jh(c.h,d))f=d.D,hI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Ec(),lt(g,new nI(g,f)),xc(c)}else xI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&ER(c,d)||g==2&&nf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Jr(c,5);break;case 4:Jr(c,10);break;case 3:Jr(c,6);break;default:Jr(c,2)}}}function OI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Jr(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let C=!g;g=new Zr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(g,"https"),Ac(g),C?gR(g.toString(),f):mR(g.toString(),f)}else dt(2);c.G=0,c.l&&c.l.sa(d),FI(c),RI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function FI(c){if(c.G=0,c.ka=[],c.l){let d=fI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function VI(c,d,f){var g=f instanceof Zr?Sn(f):new Zr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Sc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Zr(null);g&&Tc(A,g),d&&(A.g=d),C&&Sc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),Us(c,g),g}function LI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Os({eb:f})):new Me(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function UI(){}n=UI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kc(){}kc.prototype.g=function(c,d){return new It(c,d)};function It(c,d){it.call(this),this.g=new AI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ui(this)}S(It,it),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){tf(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Hh(c),c=f);d.i.push(new oR(d.Ya++,c)),d.G==3&&xc(d)},It.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,It.aa.N.call(this)};function jI(c){zh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(jI,zh);function BI(){Gh.call(this),this.status=1}S(BI,Gh);function Ui(c){this.g=c}S(Ui,UI),Ui.prototype.ua=function(){lt(this.g,"a")},Ui.prototype.ta=function(c){lt(this.g,new jI(c))},Ui.prototype.sa=function(c){lt(this.g,new BI)},Ui.prototype.ra=function(){lt(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,By=Zn.createWebChannelTransport=function(){return new kc},jy=Zn.getStatEventTarget=function(){return Ec()},Uy=Zn.Event=Qr,Nd=Zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dc.NO_ERROR=0,Dc.TIMEOUT=8,Dc.HTTP_ERROR=6,Ja=Zn.ErrorCode=Dc,rI.COMPLETE="complete",Ly=Zn.EventType=rI,J_.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",it.prototype.listen=it.prototype.K,Qo=Zn.WebChannel=J_,wU=Zn.FetchXmlHttpFactory=Os,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,Vy=Zn.XhrIo=Me}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});var tS="@firebase/firestore";var Ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");var ms="11.2.0";var Ri=new kr("@firebase/firestore");function Yo(){return Ri.logLevel}function j(n,...e){if(Ri.logLevel<=de.DEBUG){let t=e.map(D_);Ri.debug(`Firestore (${ms}): ${n}`,...t)}}function Jn(n,...e){if(Ri.logLevel<=de.ERROR){let t=e.map(D_);Ri.error(`Firestore (${ms}): ${n}`,...t)}}function rs(n,...e){if(Ri.logLevel<=de.WARN){let t=e.map(D_);Ri.warn(`Firestore (${ms}): ${n}`,...t)}}function D_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: `+n;throw Jn(e),new Error(e)}function Ee(n,e){n||K()}function Z(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Kt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ld=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Gy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ze.UNAUTHENTICATED))}shutdown(){}},Wy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ky=class{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Kt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Kt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new Ld(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Ze(e)}},Qy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Yy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Qy(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Jy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ee(this.o===void 0);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new Zy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function EU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ud=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=EU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function is(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Pe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Pe(0,0))}static max(){return new n(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yn.fromString(e.substring(4,e.length-2))}},xe=class n extends jd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},DU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xt=class n extends jd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return DU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};var Xy=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Xy.UNKNOWN_ID=-1;function bU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Pe(t+1,0):new Pe(t,r));return new Mi(i,W.empty(),e)}function CU(n){return new Mi(n.readTime,n.key,-1)}var Mi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(te.min(),W.empty(),-1)}static max(){return new n(te.max(),W.empty(),-1)}};function TU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var SU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ev=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ys(n){return v(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==SU)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function AU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vs(n){return n.name==="IndexedDbTransactionError"}var b_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function yh(n){return n==null}function ic(n){return n===0&&1/n==-1/0}function RU(n){return typeof n=="number"&&Number.isInteger(n)&&!ic(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function MU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nS(e)),e=NU(n.get(t),e);return nS(e)}function NU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function nS(n){return n+""}var xU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jW=[...xU,"documentOverlays"],PU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kU=PU,OU=[...kU,"indexConfiguration","indexState","indexEntries"];var BW=[...OU,"globals"];function rS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new es(this.root,e,this.comparator,!1)}getReverseIterator(){return new es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new es(this.root,e,this.comparator,!0)}},es=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bd(this.data.getIterator())}getIteratorFrom(e){return new Bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var In=class n{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Je(xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return is(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var $d=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $d("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var FU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(n){if(Ee(!!n),typeof n=="string"){let e=0,t=FU.exec(n);if(Ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function er(n){return typeof n=="string"?ut.fromBase64String(n):ut.fromUint8Array(n)}function C_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vh(n){let e=n.mapValue.fields.__previous_value__;return C_(e)?vh(e):e}function oc(n){let e=Xn(n.mapValue.fields.__local_write_time__.timestampValue);return new Pe(e.seconds,e.nanos)}var tv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Hd=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var xd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?C_(n)?4:OS(n)?9007199254740991:kS(n)?10:11:K()}function bn(n,e){if(n===e)return!0;let t=zr(n);if(t!==zr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oc(n).isEqual(oc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Xn(i.timestampValue),a=Xn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return er(i.bytesValue).isEqual(er(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?ic(s)===ic(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return is(n.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rS(s)!==rS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!bn(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function sc(n,e){return(n.values||[]).find(t=>bn(t,e))!==void 0}function os(n,e){if(n===e)return 0;let t=zr(n),r=zr(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),u=Ae(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return iS(n.timestampValue,e.timestampValue);case 4:return iS(oc(n),oc(e));case 5:return me(n.stringValue,e.stringValue);case 6:return function(o,s){let a=er(o),u=er(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(Ae(o.latitude),Ae(s.latitude));return a!==0?a:me(Ae(o.longitude),Ae(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=y.value)===null||u===void 0?void 0:u.arrayValue,P=me(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:oS(_,S)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===xd.mapValue&&s===xd.mapValue)return 0;if(o===xd.mapValue)return 1;if(s===xd.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=me(u[p],h[p]);if(y!==0)return y;let _=os(a[u[p]],l[h[p]]);if(_!==0)return _}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function iS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=Xn(n),r=Xn(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function oS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=os(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function ss(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Xn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return er(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=nv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${nv(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function Od(n){switch(zr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vh(n);return e?16+Od(e):16;case 5:return 2*n.stringValue.length;case 6:return er(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Od(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Oi(r.fields,(o,s)=>{i+=o.length+Od(s)}),i}(n.mapValue);default:throw K()}}function rv(n){return!!n&&"integerValue"in n}function T_(n){return!!n&&"arrayValue"in n}function sS(n){return!!n&&"nullValue"in n}function aS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fd(n){return!!n&&"mapValue"in n}function kS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ec(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Oi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ec(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ec(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var on=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=xt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ec(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Fd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Fd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ec(this.value))}};function FS(n){let e=[];return Oi(n.fields,(t,r)=>{let i=new xt([t]);if(Fd(r)){let o=FS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new In(e)}var sn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,te.min(),te.min(),te.min(),on.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,te.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,te.min(),te.min(),on.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,te.min(),te.min(),on.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var as=class{constructor(e,t){this.position=e,this.inclusive=t}};function cS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=W.comparator(W.fromName(s.referenceValue),t.key):r=os(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bn(n.position[t],e.position[t]))return!1;return!0}var cs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function VU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var qd=class{},Ge=class n extends qd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ov(e,t,r):t==="array-contains"?new cv(e,r):t==="in"?new uv(e,r):t==="not-in"?new lv(e,r):t==="array-contains-any"?new dv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sv(e,r):new av(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(os(t,this.value)):t!==null&&zr(this.value)===zr(t)&&this.matchesComparison(os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Cn=class n extends qd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return VS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function VS(n){return n.op==="and"}function LS(n){return LU(n)&&VS(n)}function LU(n){for(let e of n.filters)if(e instanceof Cn)return!1;return!0}function iv(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+ss(n.value);if(LS(n))return n.filters.map(e=>iv(e)).join(",");{let e=n.filters.map(t=>iv(t)).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&bn(r.value,i.value)}(n,e):n instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&US(s,i.filters[a]),!0):!1}(n,e):void K()}function jS(n){return n instanceof Ge?function(t){return`${t.field.canonicalString()} ${t.op} ${ss(t.value)}`}(n):n instanceof Cn?function(t){return t.op.toString()+" {"+t.getFilters().map(jS).join(" ,")+"}"}(n):"Filter"}var ov=class extends Ge{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},sv=class extends Ge{constructor(e,t){super(e,"in",t),this.keys=BS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},av=class extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=BS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var cv=class extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return T_(t)&&sc(t.arrayValue,this.value)}},uv=class extends Ge{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&sc(this.value.arrayValue,t)}},lv=class extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!sc(this.value.arrayValue,t)}},dv=class extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!T_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}};var hv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function lS(n,e=null,t=[],r=[],i=null,o=null,s=null){return new hv(n,e,t,r,i,o,s)}function S_(n){let e=Z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>iv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ss(r)).join(",")),e.ue=t}return e.ue}function A_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uS(n.startAt,e.startAt)&&uS(n.endAt,e.endAt)}function fv(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var us=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UU(n,e,t,r,i,o,s,a){return new us(n,e,t,r,i,o,s,a)}function R_(n){return new us(n)}function dS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jU(n){return n.collectionGroup!==null}function tc(n){let e=Z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je(xt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new cs(o,r))}),t.has(xt.keyField().canonicalString())||e.ce.push(new cs(xt.keyField(),r))}return e.ce}function En(n){let e=Z(n);return e.le||(e.le=BU(e,tc(n))),e.le}function BU(n,e){if(n.limitType==="F")return lS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new cs(i.field,o)});let t=n.endAt?new as(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new as(n.startAt.position,n.startAt.inclusive):null;return lS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function pv(n,e,t){return new us(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _h(n,e){return A_(En(n),En(e))&&n.limitType===e.limitType}function $S(n){return`${S_(En(n))}|lt:${n.limitType}`}function Zo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jS(i)).join(", ")}]`),yh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ss(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(En(n))}; limitType=${n.limitType})`}function Ih(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of tc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=cS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,tc(r),i)||r.endAt&&!function(s,a,u){let l=cS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,tc(r),i))}(n,e)}function $U(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HS(n){return(e,t)=>{let r=!1;for(let i of tc(n)){let o=HU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HU(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?os(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var tr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return PS(this.inner)}size(){return this.innerSize}};var qU=new ke(W.comparator);function nr(){return qU}var qS=new ke(W.comparator);function Xa(...n){let e=qS;for(let t of n)e=e.insert(t.key,t);return e}function zS(n){let e=qS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ti(){return nc()}function GS(){return nc()}function nc(){return new tr(n=>n.toString(),(n,e)=>n.isEqual(e))}var zU=new ke(W.comparator),GU=new Je(W.comparator);function ge(...n){let e=GU;for(let t of n)e=e.add(t);return e}var WU=new Je(me);function KU(){return WU}function M_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(e)?"-0":e}}function WS(n){return{integerValue:""+n}}function QU(n,e){return RU(e)?WS(e):M_(n,e)}var ls=class{constructor(){this._=void 0}};function YU(n,e,t){return n instanceof ds?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&C_(o)&&(o=vh(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ni?QS(n,e):n instanceof xi?YS(n,e):function(i,o){let s=KS(i,o),a=hS(s)+hS(i.Pe);return rv(s)&&rv(i.Pe)?WS(a):M_(i.serializer,a)}(n,e)}function ZU(n,e,t){return n instanceof Ni?QS(n,e):n instanceof xi?YS(n,e):t}function KS(n,e){return n instanceof hs?function(r){return rv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ds=class extends ls{},Ni=class extends ls{constructor(e){super(),this.elements=e}};function QS(n,e){let t=ZS(e);for(let r of n.elements)t.some(i=>bn(i,r))||t.push(r);return{arrayValue:{values:t}}}var xi=class extends ls{constructor(e){super(),this.elements=e}};function YS(n,e){let t=ZS(e);for(let r of n.elements)t=t.filter(i=>!bn(i,r));return{arrayValue:{values:t}}}var hs=class extends ls{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function hS(n){return Ae(n.integerValue||n.doubleValue)}function ZS(n){return T_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function JU(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ni&&i instanceof Ni||r instanceof xi&&i instanceof xi?is(r.elements,i.elements,bn):r instanceof hs&&i instanceof hs?bn(r.Pe,i.Pe):r instanceof ds&&i instanceof ds}(n.transform,e.transform)}var gv=class{constructor(e,t){this.version=e,this.transformResults=t}},Ai=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var fs=class{};function JS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zd(n.key,Ai.none()):new Pi(n.key,n.data,Ai.none());{let t=n.data,r=on.empty(),i=new Je(xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rr(n.key,r,new In(i.toArray()),Ai.none())}}function XU(n,e,t){n instanceof Pi?function(i,o,s){let a=i.value.clone(),u=pS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof rr?function(i,o,s){if(!Vd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=pS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(XS(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function rc(n,e,t,r){return n instanceof Pi?function(o,s,a,u){if(!Vd(o.precondition,s))return a;let l=o.value.clone(),h=gS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof rr?function(o,s,a,u){if(!Vd(o.precondition,s))return a;let l=gS(o.fieldTransforms,u,s),h=s.data;return h.setAll(XS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Vd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function ej(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=KS(r.transform,i||null);o!=null&&(t===null&&(t=on.empty()),t.set(r.field,o))}return t||null}function fS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&is(r,i,(o,s)=>JU(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Pi=class extends fs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends fs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function XS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function pS(n,e,t){let r=new Map;Ee(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ZU(s,a,t[i]))}return r}function gS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,YU(o,s,e))}return r}var zd=class extends fs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mv=class extends fs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&XU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=rc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=GS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=JS(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ge())}isEqual(e){return this.batchId===e.batchId&&is(this.mutations,e.mutations,(t,r)=>fS(t,r))&&is(this.baseMutations,e.baseMutations,(t,r)=>fS(t,r))}},vv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ee(e.mutations.length===r.length);let i=function(){return zU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var _v=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Iv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,ve;function tj(n){switch(n){default:return K();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function eA(n){if(n===void 0)return Jn("GRPC error has no .code"),N.UNKNOWN;switch(n){case Be.OK:return N.OK;case Be.CANCELLED:return N.CANCELLED;case Be.UNKNOWN:return N.UNKNOWN;case Be.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Be.INTERNAL:return N.INTERNAL;case Be.UNAVAILABLE:return N.UNAVAILABLE;case Be.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Be.NOT_FOUND:return N.NOT_FOUND;case Be.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Be.ABORTED:return N.ABORTED;case Be.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Be.DATA_LOSS:return N.DATA_LOSS;default:return K()}}(ve=Be||(Be={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var mS=null;function nj(){return new TextEncoder}var rj=new Yn([4294967295,4294967295],0);function yS(n){let e=nj().encode(n),t=new Fy;return t.update(e),new Uint8Array(t.digest())}function vS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yn([t,r],0),new Yn([i,o],0)]}var wv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Si(`Invalid padding: ${t}`);if(r<0)throw new Si(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Si(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Si(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Yn.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Yn.fromNumber(r)));return i.compare(rj)===1&&(i=new Yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=yS(e),[r,i]=vS(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=yS(e),[r,i]=vS(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Si=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gd=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(te.min(),i,new ke(me),nr(),ge())}},ac=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ge(),ge(),ge())}};var ts=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Wd=class{constructor(e,t){this.targetId=e,this.me=t}},Kd=class{constructor(e,t,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qd=class{constructor(){this.fe=0,this.ge=_S(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),t=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new ac(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=_S()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ev=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=nr(),this.qe=Pd(),this.Qe=Pd(),this.Ke=new ke(me)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(fv(o))if(r===0){let s=new W(o.path);this.We(t,s,sn.newNoDocument(s,te.min()))}else Ee(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}mS?.tt(function(h,p,y,_,S){var P,R,U,z,G,ce;let Fe={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},ne=p.unchangedNames;return ne&&(Fe.bloomFilter={applied:S===0,hashCount:(P=ne?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(z=(U=(R=ne?.bits)===null||R===void 0?void 0:R.bitmap)===null||U===void 0?void 0:U.length)!==null&&z!==void 0?z:0,padding:(ce=(G=ne?.bits)===null||G===void 0?void 0:G.padding)!==null&&ce!==void 0?ce:0,mightContain:D=>{var m;return(m=_?.mightContain(D))!==null&&m!==void 0&&m}}),Fe}(s,e.me,this.Be.nt(),a,u))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=er(r).toUint8Array()}catch(u){if(u instanceof $d)return rs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new wv(s,i,o)}catch(u){return rs(u instanceof Si?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&fv(a.target)){let u=new W(a.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,sn.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ge();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Gd(e,t,this.Ke,this.ke,r);return this.ke=nr(),this.qe=Pd(),this.Qe=Pd(),this.Ke=new ke(me),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Qd,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Je(me),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Je(me),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Qd),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function Pd(){return new ke(W.comparator)}function _S(){return new ke(W.comparator)}var ij={asc:"ASCENDING",desc:"DESCENDING"},oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sj={and:"AND",or:"OR"},Dv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function bv(n,e){return n.useProto3Json||yh(e)?e:{value:e}}function Yd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aj(n,e){return Yd(n,e.toTimestamp())}function Dn(n){return Ee(!!n),te.fromTimestamp(function(t){let r=Xn(t);return new Pe(r.seconds,r.nanos)}(n))}function N_(n,e){return Cv(n,e).canonicalString()}function Cv(n,e){let t=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function nA(n){let e=xe.fromString(n);return Ee(aA(e)),e}function Tv(n,e){return N_(n.databaseId,e.path)}function $y(n,e){let t=nA(e);if(t.get(1)!==n.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(iA(t))}function rA(n,e){return N_(n.databaseId,e)}function cj(n){let e=nA(n);return e.length===4?xe.emptyPath():iA(e)}function Sv(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iA(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function IS(n,e,t){return{name:Tv(n,e),fields:t.value.mapValue.fields}}function uj(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string"),ut.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ut.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:eA(l.code);return new B(h,l.message||"")}(s);t=new Kd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=$y(n,r.document.name),o=Dn(r.document.updateTime),s=r.document.createTime?Dn(r.document.createTime):te.min(),a=new on({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ts(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=$y(n,r.document),o=r.readTime?Dn(r.readTime):te.min(),s=sn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ts([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=$y(n,r.document),o=r.removedTargetIds||[];t=new ts([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Iv(i,o),a=r.targetId;t=new Wd(a,s)}}return t}function lj(n,e){let t;if(e instanceof Pi)t={update:IS(n,e.key,e.value)};else if(e instanceof zd)t={delete:Tv(n,e.key)};else if(e instanceof rr)t={update:IS(n,e.key,e.data),updateMask:_j(e.fieldMask)};else{if(!(e instanceof mv))return K();t={verify:Tv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ds)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ni)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hs)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function dj(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Dn(i.updateTime):Dn(o);return s.isEqual(te.min())&&(s=Dn(o)),new gv(s,i.transformResults||[])}(t,e))):[]}function hj(n,e){return{documents:[rA(n,e.path)]}}function fj(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rA(n,i);let o=function(l){if(l.length!==0)return sA(Cn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Jo(y.field),direction:mj(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=bv(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i}}function pj(n){let e=cj(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ee(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=oA(p);return y instanceof Cn&&LS(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(S){return new cs(Xo(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,yh(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,_=p.values||[];return new as(_,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,_=p.values||[];return new as(_,y)}(t.endAt)),UU(e,i,s,o,a,"F",u,l)}function gj(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xo(t.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xo(t.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xo(t.unaryFilter.field);return Ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xo(t.unaryFilter.field);return Ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ge.create(Xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Cn.create(t.compositeFilter.filters.map(r=>oA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function mj(n){return ij[n]}function yj(n){return oj[n]}function vj(n){return sj[n]}function Jo(n){return{fieldPath:n.canonicalString()}}function Xo(n){return xt.fromServerFormat(n.fieldPath)}function sA(n){return n instanceof Ge?function(t){if(t.op==="=="){if(aS(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(sS(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(aS(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(sS(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:yj(t.op),value:t.value}}}(n):n instanceof Cn?function(t){let r=t.getFilters().map(i=>sA(i));return r.length===1?r[0]:{compositeFilter:{op:vj(t.op),filters:r}}}(n):K()}function _j(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function aA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var cc=class n{constructor(e,t,r,i,o=te.min(),s=te.min(),a=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Av=class{constructor(e){this.ht=e}};function Ij(n){let e=pj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pv(e,e.limit,"L"):e}var Zd=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),ic(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Xn(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(er(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?OS(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):kS(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):K()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(Ae(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),W.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Zd.Ft=new Zd;var Rv=class{constructor(){this.ln=new Mv}addToCollectionParentIndex(e,t){return this.ln.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Mi.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Mv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(xe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(xe.comparator)).toArray()}};var HW=new Uint8Array(0);var wS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(41943040,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);var uc=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function ES([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var Nv=class{constructor(e){this.Gn=e,this.buffer=new Je(ES),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ES(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},xv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){vs(t)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ys(t)}yield this.Yn(3e5)}))}},Pv=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(b_.oe);let r=new Nv(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(wS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wS):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Yo()<=de.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function wj(n,e){return new Pv(n,e)}var kv=class{constructor(){this.changes=new tr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ov=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Fv=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&rc(r.mutation,i,In.empty(),Pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ge()){let i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Xa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ge()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=nr(),s=nc(),a=function(){return nc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),rc(h.mutation,l,h.mutation.getFieldMask(),Pe.now())):s.set(l.key,In.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Ov(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=nc(),i=new ke((s,a)=>s-a),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||In.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=GS();h.forEach(y=>{if(!o.has(y)){let _=JS(t.get(y),r.get(y));_!==null&&p.set(y,_),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Ti()),a=-1,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ge())).next(h=>({batchId:a,changes:zS(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=Xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Xa();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,y){return new us(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,sn.newInvalidDocument(h)))});let a=Xa();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&rc(h.mutation,l,In.empty(),Pe.now()),Ih(t,l)&&(a=a.insert(u,l))}),a})}};var Vv=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return x.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Dn(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:Ij(i.bundledQuery),readTime:Dn(i.readTime)}}(t)),x.resolve()}};var Lv=class{constructor(){this.overlays=new ke(W.comparator),this.dr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ti();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Ti(),o=t.length+1,s=new W(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ti(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ti(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _v(t,r));let o=this.dr.get(t);o===void 0&&(o=ge(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var Uv=class{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var lc=class{constructor(){this.Er=new Je($e.Ar),this.Rr=new Je($e.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new $e(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new $e(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new W(new xe([])),r=new $e(t,e),i=new $e(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new W(new xe([])),r=new $e(t,e),i=new $e(t,e+1),o=ge();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new $e(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},$e=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return W.comparator(e.key,t.key)||me(e.br,t.br)}static Vr(e,t){return me(e.br,t.br)||W.comparator(e.key,t.key)}};var jv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Je($e.Ar)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yv(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new $e(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new $e(t,0),i=new $e(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(me);return t.forEach(i=>{let o=new $e(i,0),s=new $e(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),x.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;W.isDocumentKey(o)||(o=o.child(""));let s=new $e(new W(o),0),a=new Je(me);return this.vr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},s),x.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ee(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return x.forEach(t.mutations,i=>{let o=new $e(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new $e(t,0),i=this.vr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Bv=class{constructor(e){this.Nr=e,this.docs=function(){return new ke(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let r=nr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():sn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=nr(),s=t.path,a=new W(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||TU(CU(h),r)<=0||(i.has(h.key)||Ih(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Br(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $v(this)}getSize(e){return x.resolve(this.size)}},$v=class extends kv{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var Hv=class{constructor(e){this.persistence=e,this.Lr=new tr(t=>S_(t),A_),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.kr=0,this.qr=new lc,this.targetCount=0,this.Qr=uc.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),x.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Un(t),x.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.qr.containsKey(t))}};var Jd=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new b_(0),this.Ur=!1,this.Ur=!0,this.Wr=new Uv,this.referenceDelegate=e(this),this.Gr=new Hv(this),this.indexManager=new Rv,this.remoteDocumentCache=function(i){return new Bv(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Av(t),this.jr=new Vv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new jv(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new qv(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return x.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},qv=class extends ev{constructor(e){super(),this.currentSequenceNumber=e}},zv=class n{constructor(e){this.persistence=e,this.Zr=new lc,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw K()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),x.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.ti,r=>{let i=W.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,te.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return x.or([()=>x.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},Xd=class n{constructor(e,t){this.persistence=e,this.ri=new tr(r=>MU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wj(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return x.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),x.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Od(e.data.value)),t}ir(e,t,r){return x.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Gv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=ge(),i=ge();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Wv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Kv=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return kC()?8:AU(Ye())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Wv;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Yo()<=de.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),x.resolve()):(Yo()<=de.DEBUG&&j("QueryEngine","Query:",Zo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Yo()<=de.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):x.resolve())}Xi(e,t){if(dS(t))return x.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pv(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ge(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.rs(t,a);return this.ss(t,l,s,u.readTime)?this.Xi(e,pv(t,null,"F")):this.os(e,l,t,u)}))})))}es(e,t,r,i){return dS(t)||i.isEqual(te.min())?x.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?x.resolve(null):(Yo()<=de.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zo(t)),this.os(e,s,t,bU(i,-1)).next(a=>a))})}rs(e,t){let r=new Je(HS(e));return t.forEach((i,o)=>{Ih(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Yo()<=de.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Mi.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Qv=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new ke(me),this.cs=new tr(o=>S_(o),A_),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fv(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Ej(n,e,t,r){return new Qv(n,e,t,r)}function cA(n,e){return v(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ge();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Dj(n,e){let t=Z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),_=x.resolve();return y.forEach(S=>{_=_.next(()=>h.getEntry(u,S)).next(P=>{let R=l.docVersions.get(S);Ee(R!==null),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ge();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function uA(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function bj(n,e){let t=Z(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Gr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Gr.addMatchingKeys(o,h.addedDocuments,p)));let _=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ut.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(P,R,U){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(y,_,h)&&a.push(t.Gr.updateTargetData(o,_))});let u=nr(),l=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Cj(o,s,e.documentUpdates).next(h=>{u=h.Is,l=h.ds})),!r.isEqual(te.min())){let h=t.Gr.getLastRemoteSnapshotVersion(o).next(p=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.us=i,o))}function Cj(n,e,t){let r=ge(),i=ge();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=nr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:s,ds:i}})}function Tj(n,e){let t=Z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sj(n,e){let t=Z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new cc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function Yv(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!vs(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function DS(n,e,t){let r=Z(n),i=te.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Z(u),y=p.cs.get(h);return y!==void 0?x.resolve(p.us.get(y)):p.Gr.getTargetData(l,h)}(r,s,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:te.min(),t?o:ge())).next(a=>(Aj(r,$U(e),a),{documents:a,Es:o})))}function Aj(n,e,t){let r=n.ls.get(e)||te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var eh=class{constructor(){this.activeTargetIds=KU()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Zv=class{constructor(){this._o=new eh,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new eh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Jv=class{uo(e){}shutdown(){}};var th=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kd=null;function Hy(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}var Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Xv=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var ct="WebChannelConnection",e_=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=Hy(),u=this.No(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,o,s),this.Lo(t,u,l,i).then(h=>(j("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw rs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=Rj[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=Hy();return new Promise((s,a)=>{let u=new Vy;u.setWithCredentials(!0),u.listenOnce(Ly.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ja.NO_ERROR:let h=u.getResponseJson();j(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ja.TIMEOUT:j(ct,`RPC '${e}' ${o} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:let p=u.getStatus();if(j(ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let S=function(R){let U=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(U)>=0?U:N.UNKNOWN}(_.status);a(new B(S,_.message))}else a(new B(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{j(ct,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);j(ct,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}qo(e,t,r){let i=Hy(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=By(),a=jy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,_=!1,S=new Xv({Eo:R=>{_?j(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(y||(j(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),j(ct,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Ao:()=>p.close()}),P=(R,U,z)=>{R.listen(U,G=>{try{z(G)}catch(ce){setTimeout(()=>{throw ce},0)}})};return P(p,Qo.EventType.OPEN,()=>{_||(j(ct,`RPC '${e}' stream ${i} transport opened.`),S.So())}),P(p,Qo.EventType.CLOSE,()=>{_||(_=!0,j(ct,`RPC '${e}' stream ${i} transport closed`),S.Do())}),P(p,Qo.EventType.ERROR,R=>{_||(_=!0,rs(ct,`RPC '${e}' stream ${i} transport errored:`,R),S.Do(new B(N.UNAVAILABLE,"The operation could not be completed")))}),P(p,Qo.EventType.MESSAGE,R=>{var U;if(!_){let z=R.data[0];Ee(!!z);let G=z,ce=G?.error||((U=G[0])===null||U===void 0?void 0:U.error);if(ce){j(ct,`RPC '${e}' stream ${i} received error:`,ce);let Fe=ce.status,ne=function(I){let E=Be[I];if(E!==void 0)return eA(E)}(Fe),D=ce.message;ne===void 0&&(ne=N.INTERNAL,D="Unknown error status: "+Fe+" with message "+ce.message),_=!0,S.Do(new B(ne,D)),p.close()}else j(ct,`RPC '${e}' stream ${i} received:`,z),S.vo(z)}}),P(a,Uy.STAT_EVENT,R=>{R.stat===Nd.PROXY?j(ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Nd.NOPROXY&&j(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}};function qy(){return typeof document<"u"?document:null}function wh(n){return new Dv(n,!0)}var nh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var rh=class{constructor(e,t,r,i,o,s,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new nh(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return v(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return v(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return v(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Jn(t.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>v(this,null,function*(){this.state=0,this.start()}))}d_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},t_=class extends rh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=uj(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?Dn(s.readTime):te.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=Sv(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=fv(u)?{documents:hj(o,u)}:{query:fj(o,u).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=tA(o,s.resumeToken);let l=bv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Yd(o,s.snapshotVersion.toTimestamp());let l=bv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=gj(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=Sv(this.serializer),t.removeTarget=e,this.c_(t)}},n_=class extends rh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=dj(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=Sv(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>lj(this.serializer,r))};this.c_(t)}};var r_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,Cv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,Cv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},i_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Jn(t),this.C_=!1):j("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var o_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Fi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=Z(u);l.k_.add(4),yield yc(l),l.K_.set("Unknown"),l.k_.delete(4),yield Eh(l)})}(this))}))}),this.K_=new i_(r,i)}};function Eh(n){return v(this,null,function*(){if(Fi(n))for(let e of n.q_)yield e(!0)})}function yc(n){return v(this,null,function*(){for(let e of n.q_)yield e(!1)})}function lA(n,e){let t=Z(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),O_(t)?k_(t):_s(t).s_()&&P_(t,e))}function x_(n,e){let t=Z(n),r=_s(t);t.L_.delete(e),r.s_()&&dA(t,e),t.L_.size===0&&(r.s_()?r.a_():Fi(t)&&t.K_.set("Unknown"))}function P_(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_s(n).V_(e)}function dA(n,e){n.U_.xe(e),_s(n).m_(e)}function k_(n){n.U_=new Ev({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),_s(n).start(),n.K_.F_()}function O_(n){return Fi(n)&&!_s(n).i_()&&n.L_.size>0}function Fi(n){return Z(n).k_.size===0}function hA(n){n.U_=void 0}function Mj(n){return v(this,null,function*(){n.K_.set("Online")})}function Nj(n){return v(this,null,function*(){n.L_.forEach((e,t)=>{P_(n,e)})})}function xj(n,e){return v(this,null,function*(){hA(n),O_(n)?(n.K_.O_(e),k_(n)):n.K_.set("Unknown")})}function Pj(n,e,t){return v(this,null,function*(){if(n.K_.set("Online"),e instanceof Kd&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ih(n,r)}else if(e instanceof ts?n.U_.$e(e):e instanceof Wd?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(te.min()))try{let r=yield uA(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.L_.get(l);h&&o.L_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.L_.get(u);if(!h)return;o.L_.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),dA(o,u);let p=new cc(h.target,u,l,h.sequenceNumber);P_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield ih(n,r)}})}function ih(n,e,t){return v(this,null,function*(){if(!vs(e))throw e;n.k_.add(1),yield yc(n),n.K_.set("Offline"),t||(t=()=>uA(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Eh(n)}))})}function fA(n,e){return e().catch(t=>ih(n,t,e))}function Dh(n){return v(this,null,function*(){let e=Z(n),t=Gr(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;kj(e);)try{let i=yield Tj(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,Oj(e,i)}catch(i){yield ih(e,i)}pA(e)&&gA(e)})}function kj(n){return Fi(n)&&n.B_.length<10}function Oj(n,e){n.B_.push(e);let t=Gr(n);t.s_()&&t.f_&&t.g_(e.mutations)}function pA(n){return Fi(n)&&!Gr(n).i_()&&n.B_.length>0}function gA(n){Gr(n).start()}function Fj(n){return v(this,null,function*(){Gr(n).w_()})}function Vj(n){return v(this,null,function*(){let e=Gr(n);for(let t of n.B_)e.g_(t.mutations)})}function Lj(n,e,t){return v(this,null,function*(){let r=n.B_.shift(),i=vv.from(r,e,t);yield fA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dh(n)})}function Uj(n,e){return v(this,null,function*(){e&&Gr(n).f_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return tj(s)&&s!==N.ABORTED}(i.code)){let o=r.B_.shift();Gr(r).__(),yield fA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Dh(r)}})}(n,e)),pA(n)&&gA(n)})}function bS(n,e){return v(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Fi(t);t.k_.add(3),yield yc(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Eh(t)})}function jj(n,e){return v(this,null,function*(){let t=Z(n);e?(t.k_.delete(2),yield Eh(t)):e||(t.k_.add(2),yield yc(t),t.K_.set("Unknown"))})}function _s(n){return n.W_||(n.W_=function(t,r,i){let o=Z(t);return o.b_(),new t_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:Mj.bind(null,n),mo:Nj.bind(null,n),po:xj.bind(null,n),R_:Pj.bind(null,n)}),n.q_.push(e=>v(this,null,function*(){e?(n.W_.__(),O_(n)?k_(n):n.K_.set("Unknown")):(yield n.W_.stop(),hA(n))}))),n.W_}function Gr(n){return n.G_||(n.G_=function(t,r,i){let o=Z(t);return o.b_(),new n_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Fj.bind(null,n),po:Uj.bind(null,n),p_:Vj.bind(null,n),y_:Lj.bind(null,n)}),n.q_.push(e=>v(this,null,function*(){e?(n.G_.__(),yield Dh(n)):(yield n.G_.stop(),n.B_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var s_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bh(n,e){if(Jn("AsyncQueue",`${e}: ${n}`),vs(n))return new B(N.UNAVAILABLE,`${e}: ${n}`);throw n}var oh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=Xa(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sh=class{constructor(){this.z_=new ke(W.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):K():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},ps=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,oh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var a_=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},c_=class{constructor(){this.queries=CS(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=Z(t),o=i.queries;i.queries=CS(),o.forEach((s,a)=>{for(let u of a.J_)u.onError(r)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function CS(){return new tr(n=>$S(n),_h)}function mA(n,e){return v(this,null,function*(){let t=Z(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new a_,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=bh(s,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&F_(t)})}function yA(n,e){return v(this,null,function*(){let t=Z(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Bj(n,e){let t=Z(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&F_(t)}function $j(n,e,t){let r=Z(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function F_(n){n.X_.forEach(e=>{e.next()})}var u_,TS;(TS=u_||(u_={})).na="default",TS.Cache="cache";var ah=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==u_.Cache}};var ch=class{constructor(e){this.key=e}},uh=class{constructor(e){this.key=e}},l_=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ge(),this.mutatedKeys=ge(),this.Va=HS(e),this.ma=new oh(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new sh,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),_=Ih(this.query,p)?p:null,S=!!y&&this.mutatedKeys.has(y.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;y&&_?y.data.isEqual(_.data)?S!==P&&(r.track({type:3,doc:_}),R=!0):this.ya(y,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Va(_,u)>0||l&&this.Va(_,l)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),R=!0):y&&!_&&(r.track({type:1,doc:y}),R=!0,(u||l)&&(a=!0)),R&&(_?(s=s.add(_),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((h,p)=>function(_,S){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return P(_)-P(S)}(h.type,p.type)||this.Va(h.doc,p.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,s.length!==0||l?{snapshot:new ps(this.query,e.ma,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sh,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=ge(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new uh(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new ch(r))}),t}va(e){this.Ea=e.Es,this.Ra=ge();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ps.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},d_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},h_=class{constructor(e){this.key=e,this.Fa=!1}},f_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new tr(a=>$S(a),_h),this.Oa=new Map,this.Na=new Set,this.Ba=new ke(W.comparator),this.La=new Map,this.ka=new lc,this.qa={},this.Qa=new Map,this.Ka=uc.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function Hj(n,e,t=!0){return v(this,null,function*(){let r=DA(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield vA(r,e,t,!0),i})}function qj(n,e){return v(this,null,function*(){let t=DA(n);yield vA(t,e,!0,!1)})}function vA(n,e,t,r){return v(this,null,function*(){let i=yield Sj(n.localStore,En(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield zj(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&lA(n.remoteStore,i),a})}function zj(n,e,t,r,i){return v(this,null,function*(){n.Ua=(p,y,_)=>function(P,R,U,z){return v(this,null,function*(){let G=R.view.ga(U);G.ss&&(G=yield DS(P.localStore,R.query,!1).then(({documents:D})=>R.view.ga(D,G)));let ce=z&&z.targetChanges.get(R.targetId),Fe=z&&z.targetMismatches.get(R.targetId)!=null,ne=R.view.applyChanges(G,P.isPrimaryClient,ce,Fe);return AS(P,R.targetId,ne.ba),ne.snapshot})}(n,p,y,_);let o=yield DS(n.localStore,e,!0),s=new l_(e,o.Es),a=s.ga(o.documents),u=ac.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);AS(n,t,l.ba);let h=new d_(e,t,s);return n.xa.set(e,h),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot})}function Gj(n,e,t){return v(this,null,function*(){let r=Z(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!_h(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&x_(r.remoteStore,i.targetId),p_(r,i.targetId)}).catch(ys))):(p_(r,i.targetId),yield Yv(r.localStore,i.targetId,!0))})}function Wj(n,e){return v(this,null,function*(){let t=Z(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),x_(t.remoteStore,r.targetId))})}function Kj(n,e,t){return v(this,null,function*(){let r=tB(n);try{let i=yield function(s,a){let u=Z(s),l=Pe.now(),h=a.reduce((_,S)=>_.add(S.key),ge()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=nr(),P=ge();return u.hs.getEntries(_,h).next(R=>{S=R,S.forEach((U,z)=>{z.isValidDocument()||(P=P.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(R=>{p=R;let U=[];for(let z of a){let G=ej(z,p.get(z.key).overlayedDocument);G!=null&&U.push(new rr(z.key,G,FS(G.value.mapValue),Ai.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,U,a)}).next(R=>{y=R;let U=R.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(_,R.batchId,U)})}).then(()=>({batchId:y.batchId,changes:zS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.qa[s.currentUser.toKey()];l||(l=new ke(me)),l=l.insert(a,u),s.qa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield vc(r,i.changes),yield Dh(r.remoteStore)}catch(i){let o=bh(i,"Failed to persist write");t.reject(o)}})}function _A(n,e){return v(this,null,function*(){let t=Z(n);try{let r=yield bj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Ee(s.Fa):i.removedDocuments.size>0&&(Ee(s.Fa),s.Fa=!1))}),yield vc(t,r,e)}catch(r){yield ys(r)}})}function SS(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Z(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.J_)y.ea(a)&&(l=!0)}),l&&F_(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qj(n,e,t){return v(this,null,function*(){let r=Z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new ke(W.comparator);s=s.insert(o,sn.newNoDocument(o,te.min()));let a=ge().add(o),u=new Gd(te.min(),new Map,new ke(me),s,a);yield _A(r,u),r.Ba=r.Ba.remove(o),r.La.delete(e),V_(r)}else yield Yv(r.localStore,e,!1).then(()=>p_(r,e,t)).catch(ys)})}function Yj(n,e){return v(this,null,function*(){let t=Z(n),r=e.batch.batchId;try{let i=yield Dj(t.localStore,e);wA(t,r,null),IA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vc(t,i)}catch(i){yield ys(i)}})}function Zj(n,e,t){return v(this,null,function*(){let r=Z(n);try{let i=yield function(s,a){let u=Z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);wA(r,e,t),IA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vc(r,i)}catch(i){yield ys(i)}})}function IA(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function wA(n,e,t){let r=Z(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function p_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||EA(n,r)})}function EA(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(x_(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),V_(n))}function AS(n,e,t){for(let r of t)r instanceof ch?(n.ka.addReference(r.key,e),Jj(n,r)):r instanceof uh?(j("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||EA(n,r.key)):K()}function Jj(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(j("SyncEngine","New document in limbo: "+t),n.Na.add(r),V_(n))}function V_(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new W(xe.fromString(e)),r=n.Ka.next();n.La.set(r,new h_(t)),n.Ba=n.Ba.insert(t,r),lA(n.remoteStore,new cc(En(R_(t.path)),r,"TargetPurposeLimboResolution",b_.oe))}}function vc(n,e,t){return v(this,null,function*(){let r=Z(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{s.push(r.Ua(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Gv.zi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(u,l){return v(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,y=>x.forEach(y.Wi,_=>h.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>x.forEach(y.Gi,_=>h.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!vs(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let _=h.us.get(y),S=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(S);h.us=h.us.insert(y,P)}}})}(r.localStore,o))})}function Xj(n,e){return v(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield cA(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(u=>{u.reject(new B(N.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vc(t,r.Ts)}})}function eB(n,e){let t=Z(n),r=t.La.get(e);if(r&&r.Fa)return ge().add(r.key);{let i=ge(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function DA(n){let e=Z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qj.bind(null,e),e.Ma.R_=Bj.bind(null,e.eventManager),e.Ma.Wa=$j.bind(null,e.eventManager),e}function tB(n){let e=Z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}var bA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=wh(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Ej(this.persistence,new Kv,t.initialUser,this.serializer)}ja(t){return new Jd(zv.ei,this.serializer)}za(t){return new Zv}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),g_=class extends bA{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ee(this.persistence.referenceDelegate instanceof Xd);let r=this.persistence.referenceDelegate.garbageCollector;return new xv(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Jd(r=>Xd.ei(r,t),this.serializer)}};var nB=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,this.syncEngine),yield jj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new c_}()}createDatastore(t){let r=wh(t.databaseInfo.databaseId),i=function(s){return new e_(s)}(t.databaseInfo);return function(s,a,u,l){return new r_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new o_(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>SS(this.syncEngine,r,0),function(){return th.p()?new th:new Jv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new f_(o,s,a,u,l,h);return p&&(y.$a=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=Z(o);j("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield yc(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var lh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var m_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=Ud.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bh(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function zy(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield cA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function RS(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CA(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>bS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>bS(e.remoteStore,i)),n._onlineComponents=e})}function CA(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;rs("Error using user provided cache. Falling back to memory cache: "+t),yield zy(n,new bA)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield zy(n,new g_(void 0));return n._offlineComponents})}function TA(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield RS(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield RS(n,new nB))),n._onlineComponents})}function rB(n){return CA(n).then(e=>e.localStore)}function iB(n){return TA(n).then(e=>e.syncEngine)}function SA(n){return v(this,null,function*(){let e=yield TA(n),t=e.eventManager;return t.onListen=Hj.bind(null,e.syncEngine),t.onUnlisten=Gj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wj.bind(null,e.syncEngine),t})}function oB(n,e){let t=new Kt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield function(l,h){let p=Z(l);return p.persistence.runTransaction("read document","readonly",y=>p.localDocuments.getDocument(y,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=bh(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield rB(n),e,t)})),t.promise}function sB(n,e,t={}){let r=new Kt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new lh({next:y=>{h.eu(),s.enqueueAndForget(()=>yA(o,p));let _=y.docs.has(a);!_&&y.fromCache?l.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?l.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new ah(R_(a.path),h,{includeMetadataChanges:!0,ua:!0});return mA(o,p)}(yield SA(n),n.asyncQueue,e,t,r)})),r.promise}function aB(n,e,t={}){let r=new Kt;return n.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(o,s,a,u,l){let h=new lh({next:y=>{h.eu(),s.enqueueAndForget(()=>yA(o,p)),y.fromCache&&u.source==="server"?l.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new ah(a,h,{includeMetadataChanges:!0,ua:!0});return mA(o,p)}(yield SA(n),n.asyncQueue,e,t,r)})),r.promise}function AA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MS=new Map;function RA(n,e,t){if(!t)throw new B(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cB(n,e,t,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NS(n){if(!W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xS(n){if(W.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function L_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Wr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=L_(n);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var dh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},gs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Gy;switch(r.type){case"firstParty":return new Yy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MS.get(t);r&&(j("ComponentProvider","Removing Datastore"),MS.delete(t),r.terminate())}(this),Promise.resolve()}};function uB(n,e,t,r={}){var i;let o=(n=Wr(n,gs))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ze.MOCK_USER;else{a=AC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ze(l)}n._authCredentials=new Wy(new Ld(a,u))}}var hh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Pt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},qr=class n extends hh{constructor(e,t,r){super(e,t,R_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ch(n,e,...t){if(n=_t(n),RA("collection","path",e),n instanceof gs){let r=xe.fromString(e,...t);return xS(r),new qr(n,null,r)}{if(!(n instanceof Pt||n instanceof qr))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return xS(r),new qr(n.firestore,null,r)}}function U_(n,e,...t){if(n=_t(n),arguments.length===1&&(e=Ud.newId()),RA("doc","path",e),n instanceof gs){let r=xe.fromString(e,...t);return NS(r),new Pt(n,null,new W(r))}{if(!(n instanceof Pt||n instanceof qr))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return NS(r),new Pt(n.firestore,n instanceof qr?n.converter:null,new W(r))}}var fh=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new nh(this,"async_queue_retry"),this.fu=()=>{let r=qy();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=qy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=qy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new Kt;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return v(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!vs(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Jn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=s_.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&K()}verifyOperationInProgress(){}bu(){return v(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};var ki=class extends gs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fh(e),this._firestoreClient=void 0,yield e}})}};function Is(n,e){let t=typeof n=="object"?n:ud(),r=typeof n=="string"?n:e||"(default)",i=$a(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=SC("firestore");o&&uB(i,...o)}return i}function Th(n){if(n._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lB(n),n._firestoreClient}function lB(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new tv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AA(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new m_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var dc=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ut.fromBase64String(e))}catch(t){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ph=class{constructor(e){this._methodName=e}};var fc=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var pc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var dB=/^__.*__$/,y_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pi(e,this.data,t,this.fieldTransforms)}};function MA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var v_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return gh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(MA(this.Mu)&&dB.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},__=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wh(e)}$u(e,t,r,i=!1){return new v_({Mu:e,methodName:t,Ku:r,path:xt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hB(n){let e=n._freezeSettings(),t=wh(n._databaseId);return new __(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fB(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);kA("Data must be an object, but it was:",s,r);let a=xA(r,s),u,l;if(o.merge)u=new In(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=pB(e,p,t);if(!s.contains(y))throw new B(N.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);mB(h,y)||h.push(y)}u=new In(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new y_(new on(a),u,l)}function NA(n,e){if(PA(n=_t(n)))return kA("Unsupported field value:",e,n),xA(n,e);if(n instanceof ph)return function(r,i){if(!MA(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=NA(a,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=_t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Pe.fromDate(r);return{timestampValue:Yd(i.serializer,o)}}if(r instanceof Pe){let o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yd(i.serializer,o)}}if(r instanceof fc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dc)return{bytesValue:tA(i.serializer,r._byteString)};if(r instanceof Pt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:N_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof pc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return M_(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${L_(r)}`)}(n,e)}function xA(n,e){let t={};return PS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(n,(r,i)=>{let o=NA(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function PA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof fc||n instanceof dc||n instanceof Pt||n instanceof ph||n instanceof pc)}function kA(n,e,t){if(!PA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=L_(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function pB(n,e,t){if((e=_t(e))instanceof hc)return e._internalPath;if(typeof e=="string")return OA(n,e);throw gh("Field path arguments must be of type string or ",n,!1,void 0,t)}var gB=new RegExp("[~\\*/\\[\\]]");function OA(n,e,t){if(e.search(gB)>=0)throw gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch{throw gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(N.INVALID_ARGUMENT,a+n+u)}function mB(n,e){return n.some(t=>t.isEqual(e))}var mh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new I_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(FA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},I_=class extends mh{data(){return super.data()}};function FA(n,e){return typeof e=="string"?OA(n,e):e instanceof hc?e._internalPath:e._delegate._internalPath}function yB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var w_=class{convertValue(e,t="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Oi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new pc(o)}convertGeoPoint(e){return new fc(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){let t=Xn(e);return new Pe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xe.fromString(e);Ee(aA(r));let i=new Hd(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(t)||Jn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function vB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Hr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gc=class extends mh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(FA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ns=class extends gc{data(e={}){return super.data(e)}},E_=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ns(this._firestore,this._userDataWriter,r.key,r,new Hr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ns(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:_B(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _B(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function VA(n){n=Wr(n,Pt);let e=Wr(n.firestore,ki);return sB(Th(e),n._key).then(t=>wB(e,n,t))}var mc=class extends w_{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}};function LA(n){n=Wr(n,Pt);let e=Wr(n.firestore,ki),t=Th(e),r=new mc(e);return oB(t,n._key).then(i=>new gc(e,r,n._key,i,new Hr(i!==null&&i.hasLocalMutations,!0),n.converter))}function UA(n){n=Wr(n,hh);let e=Wr(n.firestore,ki),t=Th(e),r=new mc(e);return yB(n._query),aB(t,n._query).then(i=>new E_(e,r,n,i))}function jA(n,e){let t=Wr(n.firestore,ki),r=U_(n),i=vB(n.converter,e);return IB(t,[fB(hB(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ai.exists(!1))]).then(()=>r)}function IB(n,e){return function(r,i){let o=new Kt;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Kj(yield iB(r),i,o)})),o.promise}(Th(n),e)}function wB(n,e,t){let r=t.docs.get(e._key),i=new mc(n);return new gc(n,i,e._key,r,new Hr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ms=i})(Vr),Fr(new Gt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ki(new Ky(r.getProvider("auth-internal")),new Jy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hd(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),rn(tS,"4.7.6",e),rn(tS,"4.7.6","esm2017")})();var EB=n=>["/detail/",n];function DB(n,e){if(n&1&&(k(0,"tr")(1,"td"),F(2),M(),k(3,"td"),F(4),M(),k(5,"td"),F(6),M(),k(7,"td"),F(8),M(),k(9,"td"),F(10),M(),k(11,"td"),F(12),M(),k(13,"button",11),F(14," D\xE9tails "),M()()),n&2){let t,r=e.$implicit,i=Ln();re(2),St(" ",r.id," "),re(2),Dg(" ",r.get("nom")," ",r.get("prenom")," "),re(2),St(" ",r.get("age")," "),re(2),St(" ",r.get("email")," "),re(2),St(" ",(t=i.findLastWeight(r.data()))==null?null:t.unPoid," "),re(2),St(" ",i.dateToStringFormat(r.data().createdAt.toDate())," "),re(),Se("routerLink",T0(8,EB,r.id))}}var bB=Wn($r),CB=Is(bB),Sh=class n{constructor(e){this.router=e;this.data=null}data;formattedDate=Date.toLocaleString();ngOnInit(){this.getData()}getData(){return v(this,null,function*(){let e=yield UA(Ch(CB,"user"));this.data=e.docs,this.data.forEach(t=>{let r})})}logWeightMeasurements(e){e&&e.poids&&Array.isArray(e.poids)?e.poids.forEach(t=>{console.log(`Poids : ${t.unPoid} kg, Mesur\xE9 le : ${t.createdAt}`)}):console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`)}sortByDate(e,t="asc"){if(e&&e.poids&&Array.isArray(e.poids)){let r=e.poids.sort((o,s)=>{console.log("a=",o),console.log("b=",s);let a=o.createdAt.toDate().getTime();return s.createdAt.toDate().getTime()-a});console.log("Mesures de poids tri\xE9es par date :",r);let i=r[0];return r}else return console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`),[]}findLastWeight(e){if(console.log(e),console.log(typeof e),e&&e.poids&&Array.isArray(e.poids)){let r=e.poids.sort((i,o)=>{let s=i.createdAt.toDate().getTime();return o.createdAt.toDate().getTime()-s})[0];return{unPoid:r.unPoid,createdAt:r.createdAt.toDate()}}else return console.error(`Le champ "poids" est manquant ou n'est pas un tableau.`),null}dateToStringFormat(e){let t,r={year:"numeric",month:"long",day:"numeric"},i=e.toLocaleDateString(void 0,r);return i===null?"":i}testFct(e){}static \u0275fac=function(t){return new(t||n)(le(zt))};static \u0275cmp=at({type:n,selectors:[["app-dashboard"]],decls:30,vars:1,consts:[[1,"p-6","bg-gray-100","min-h-screen"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-xl","font-bold","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"w-full","text-lef","overflow-auto","block"],[1,"w-full"],[1,"border-b","w-full"],[1,"py-2"],[4,"ngFor","ngForOf"],[1,"bg-blue-600","text-white","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300",3,"routerLink"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"header",1)(2,"h1",2),F(3,"Tableau de bord"),M()(),k(4,"div",1)(5,"h2",3),F(6,"Acc\xE8s rapide"),M(),Ne(7,"div",4),M(),k(8,"div",5)(9,"h2",3),F(10,"Mes \xE9l\xE8ves"),M(),k(11,"table",6)(12,"thead",7)(13,"tr",8)(14,"th",9),F(15,"Identifiant"),M(),k(16,"th",9),F(17,"Client"),M(),k(18,"th",9),F(19,"\xC2ge"),M(),k(20,"th",9),F(21,"Adresse e-mail"),M(),k(22,"th",9),F(23,"Poids"),M(),k(24,"th",9),F(25,"Date d'inscription"),M(),k(26,"th",9),F(27,"Boutton"),M()()(),k(28,"tbody"),je(29,DB,15,10,"tr",10),M()()()()),t&2&&(re(29),Se("ngForOf",r.data))},dependencies:[At,yl,gn,Nr],encapsulation:2})};function TB(n,e){n&1&&(k(0,"div",13),F(1," Veuillez entrer un email valide. "),M())}function SB(n,e){n&1&&(k(0,"div",13),F(1," Le mot de passe doit contenir au moins 6 caract\xE8res. "),M())}function AB(n,e){if(n&1){let t=Eg();k(0,"div")(1,"form",4)(2,"div",5)(3,"label",6),F(4,"Email"),M(),Ne(5,"input",7),je(6,TB,2,0,"div",8),M(),k(7,"div",9)(8,"label",10),F(9,"Mot de passe"),M(),Ne(10,"input",11),je(11,SB,2,0,"div",8),M(),k(12,"button",12),gt("click",function(){zp(t);let i=Ln();return Gp(i.suivant())}),F(13," Suivant "),M()()()}if(n&2){let t,r,i,o=Ln();re(),Se("formGroup",o.inscriptionForm),re(5),Se("ngIf",((t=o.inscriptionForm.get("email"))==null?null:t.invalid)&&((t=o.inscriptionForm.get("email"))==null?null:t.touched)),re(5),Se("ngIf",((r=o.inscriptionForm.get("password"))==null?null:r.invalid)&&((r=o.inscriptionForm.get("password"))==null?null:r.touched)),re(),Se("disabled",((i=o.inscriptionForm.get("email"))==null?null:i.invalid)||((i=o.inscriptionForm.get("password"))==null?null:i.invalid))}}function RB(n,e){n&1&&(k(0,"div",13),F(1," Veuillez entrer votre nom. "),M())}function MB(n,e){n&1&&(k(0,"div",13),F(1," Veuillez entrer votre pr\xE9nom. "),M())}function NB(n,e){n&1&&(k(0,"div",13),F(1," Vous devez avoir au moins 18 ans. "),M())}function xB(n,e){n&1&&(k(0,"div",13),F(1," Veuillez entrer un poids valide (minimum 30 kg). "),M())}function PB(n,e){n&1&&(k(0,"div",13),F(1," Veuillez entrer un pseudo. "),M())}function kB(n,e){if(n&1){let t=Eg();k(0,"div")(1,"form",4)(2,"div",5)(3,"label",14),F(4,"Nom"),M(),Ne(5,"input",15),je(6,RB,2,0,"div",8),M(),k(7,"div",5)(8,"label",16),F(9,"Pr\xE9nom"),M(),Ne(10,"input",17),je(11,MB,2,0,"div",8),M(),k(12,"div",5)(13,"label",18),F(14,"\xC2ge"),M(),Ne(15,"input",19),je(16,NB,2,0,"div",8),M(),k(17,"div",5)(18,"label",20),F(19,"Poids (kg)"),M(),Ne(20,"input",21),je(21,xB,2,0,"div",8),M(),k(22,"div",9)(23,"label",22),F(24,"Pseudo"),M(),Ne(25,"input",23),je(26,PB,2,0,"div",8),M(),k(27,"button",12),gt("click",function(){zp(t);let i=Ln();return Gp(i.soumettre())}),F(28," S'inscrire "),M()()()}if(n&2){let t,r,i,o,s,a=Ln();re(),Se("formGroup",a.inscriptionForm),re(5),Se("ngIf",((t=a.inscriptionForm.get("nom"))==null?null:t.invalid)&&((t=a.inscriptionForm.get("nom"))==null?null:t.touched)),re(5),Se("ngIf",((r=a.inscriptionForm.get("prenom"))==null?null:r.invalid)&&((r=a.inscriptionForm.get("prenom"))==null?null:r.touched)),re(5),Se("ngIf",((i=a.inscriptionForm.get("age"))==null?null:i.invalid)&&((i=a.inscriptionForm.get("age"))==null?null:i.touched)),re(5),Se("ngIf",((o=a.inscriptionForm.get("poids"))==null?null:o.invalid)&&((o=a.inscriptionForm.get("poids"))==null?null:o.touched)),re(5),Se("ngIf",((s=a.inscriptionForm.get("pseudo"))==null?null:s.invalid)&&((s=a.inscriptionForm.get("pseudo"))==null?null:s.touched)),re(),Se("disabled",a.inscriptionForm.invalid)}}var OB=Wn($r),FB=Is(OB),Ah=class n{constructor(e){this.fb=e;this.inscriptionForm=this.fb.group({email:["",[ze.required,ze.email]],password:["",[ze.required,ze.minLength(6)]],nom:["",ze.required],prenom:["",ze.required],age:[18,[ze.required,ze.min(18)]],poids:[30,[ze.required,ze.min(30)]],pseudo:["",ze.required]})}inscriptionForm;etape=1;suivant(){this.etape===1&&this.inscriptionForm.get("email")?.valid&&this.inscriptionForm?.get("password")?.valid&&(this.etape=2)}soumettre(){return v(this,null,function*(){if(this.inscriptionForm.valid){let e=Date.now().toString(),t=yield jA(Ch(FB,"user"),{email:this.inscriptionForm.value.email,nom:this.inscriptionForm.value.nom,prenom:this.inscriptionForm.value.prenom,age:this.inscriptionForm.value.age,poids:[{unPoid:this.inscriptionForm.value.poids,createdAt:Pe.now()}],pseudo:this.inscriptionForm.value.pseudo,createdAt:Pe.now(),role:"client"}).then(r=>{console.log("Document \xE9crit avec ID :",r.id," ts :",e)}).catch(r=>{console.error("Erreur lors de l'ajout du document :",r)});console.log("Apr\xE8s \xE9criture du Document")}else console.error("Formulaire invalide")})}static \u0275fac=function(t){return new(t||n)(le(nd))};static \u0275cmp=at({type:n,selectors:[["app-sign-up"]],decls:6,vars:2,consts:[[1,"bg-gray-100","flex","items-center","justify-center","h-screen"],[1,"container","mx-auto","p-4","max-w-md","bg-white","rounded-lg","shadow-md"],[1,"text-2xl","font-bold","text-center","mb-6","text-gray-800"],[4,"ngIf"],[3,"formGroup"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","formControlName","email","type","email","placeholder","Votre email",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","formControlName","password","type","password","placeholder","Votre mot de passe",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["type","button",1,"w-full","bg-indigo-600","text-white","py-2","px-4","rounded-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-offset-2","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-red-500","text-sm","mt-1"],["for","nom",1,"block","text-sm","font-medium","text-gray-700"],["id","nom","formControlName","nom","type","text","placeholder","Votre nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","prenom",1,"block","text-sm","font-medium","text-gray-700"],["id","prenom","formControlName","prenom","type","text","placeholder","Votre pr\xE9nom",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","age",1,"block","text-sm","font-medium","text-gray-700"],["id","age","formControlName","age","type","number","placeholder","Votre \xE2ge",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","poids",1,"block","text-sm","font-medium","text-gray-700"],["id","poids","formControlName","poids","type","number","placeholder","Votre poids",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"],["for","pseudo",1,"block","text-sm","font-medium","text-gray-700"],["id","pseudo","formControlName","pseudo","type","text","placeholder","Votre pseudo",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"h2",2),F(3,"Inscription"),M(),je(4,AB,14,4,"div",3)(5,kB,29,7,"div",3),M()()),t&2&&(re(4),Se("ngIf",r.etape===1),re(),Se("ngIf",r.etape===2))},dependencies:[rd,td,Ho,Fm,Jl,Xl,Va,La,At,vl],encapsulation:2})};function VB(n,e){n&1&&(k(0,"div",16)(1,"div",17)(2,"a",18),F(3,"Accueil"),M(),k(4,"a",19),F(5,"\xC0 propos"),M(),k(6,"a",20),F(7,"Services"),M(),k(8,"a",21),F(9,"Contact"),M(),k(10,"button",22),F(11," Se connecter "),M()()())}var Rh=class n{isMenuOpen=!1;toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-nav-bar"]],decls:22,vars:1,consts:[[1,"bg-white","shadow-md"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","h-16"],[1,"flex-shrink-0","flex","items-center"],["routerLink","/",1,"text-xl","font-bold","text-gray-800","logo"],[1,"hidden","md:flex","space-x-4","items-center"],["routerLink","/",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/about",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/services",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/contact",1,"text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/auth",1,"bg-blue-600","text-white","font-semibold","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300"],[1,"flex","items-center","md:hidden"],["type","button",1,"inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-800","hover:text-indigo-600","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],["class","md:hidden",4,"ngIf"],[1,"md:hidden"],[1,"px-2","pt-2","pb-3","space-y-1","sm:px-3"],["routerLink","/",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/about",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/services",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/contact",1,"block","text-gray-800","hover:text-indigo-600","px-3","py-2"],["routerLink","/auth",1,"bg-blue-600","text-white","font-semibold","py-2","px-6","rounded-lg","shadow-md","hover:bg-blue-700","transition","duration-300","ease-in-out","transform","hover:scale-105"]],template:function(t,r){t&1&&(k(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),F(5,"MKS"),M()(),k(6,"div",5)(7,"a",6),F(8,"Accueil"),M(),k(9,"a",7),F(10,"\xC0 propos"),M(),k(11,"a",8),F(12,"Services"),M(),k(13,"a",9),F(14,"Contact"),M(),k(15,"button",10),F(16," Se connecter "),M()(),k(17,"div",11)(18,"button",12),gt("click",function(){return r.toggleMenu()}),sD(),k(19,"svg",13),Ne(20,"path",14),M()()()()(),je(21,VB,12,0,"div",15),M()),t&2&&(re(21),Se("ngIf",r.isMenuOpen))},dependencies:[At,vl,gn,Nr],encapsulation:2})};var Mh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-home"]],decls:12,vars:0,consts:[[1,"bg-gray-900","text-white","py-20"],[1,"container","mx-auto","px-6","text-center"],[1,"text-5xl","font-bold","mb-6"],[1,"text-xl","mb-8"],[1,"flex","justify-center","space-x-4"],["routerLink","/programs",1,"bg-blue-600","text-white","font-semibold","py-3","px-8","rounded-lg","shadow-lg","hover:bg-blue-700","transition","duration-300"],["routerLink","/contact",1,"bg-transparent","border","border-white","text-white","font-semibold","py-3","px-8","rounded-lg","hover:bg-white","hover:text-gray-900","transition","duration-300"]],template:function(t,r){t&1&&(Ne(0,"app-nav-bar"),k(1,"section",0)(2,"div",1)(3,"h1",2),F(4,"Transformez votre corps, transformez votre vie"),M(),k(5,"p",3),F(6," Avec un coaching personnalis\xE9, atteignez vos objectifs sportifs et adoptez un mode de vie sain. "),M(),k(7,"div",4)(8,"a",5),F(9," D\xE9couvrir nos programmes "),M(),k(10,"a",6),F(11," Nous contacter "),M()()()())},dependencies:[At,gn,Nr,Rh],encapsulation:2})};var Nh=class n{static app=Wn($r);static db=Is(n.app);constructor(){}static getDetails(e){return v(this,null,function*(){console.log("Service getDetails()");let t=U_(n.db,"user",e);try{console.log("is data cached ?");let r=yield LA(t);return r.exists()?(console.log("data is cached !"),console.log("Cached document data:",r.data())):console.log("No such document!"),r.exists()?new Kr(r.id,r.data().nom,r.data().prenom,r.data().email,r.data().age,r.data().createdAt,r.data().poids):Kr.construct()}catch{console.log("errror getting cached document, dw");let i=yield VA(t);return console.log("retrieving Document data from server"),i.exists()?(console.log("found it"),new Kr(i.id,i.data().nom,i.data().prenom,i.data().email,i.data().age,i.data().createdAt,i.data().poids)):(console.log("No such document!"),Kr.construct())}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})},Kr=class n{userId;nom;prenom;email;age;createdAt;poids;static construct(){return new n("","","","",0,new Pe(0,0),new Array)}constructor(e,t,r,i,o,s,a){this.userId=e,this.nom=t,this.prenom=r,this.email=i,this.age=o,this.createdAt=s,this.poids=[],a.forEach(u=>{this.poids.push(new j_(u.unPoid,u.createdAt))})}toString(){return`User: ${this.nom} ${this.prenom} (${this.email}), \xC2ge: ${this.age}, Cr\xE9\xE9 le: ${this.createdAt.toDate().toLocaleDateString()}. Mesures : [${this.poids.toString()}]`}},j_=class{poid;createdAt;constructor(e,t){this.poid=e,this.createdAt=t}toString(){let e="{";return e+=`poid: ${this.poid},`,e+=`createdAt: ${this.createdAt.toString()}`,e+"}"}};function LB(n,e){if(n&1&&(k(0,"tr",13)(1,"td",14),F(2),M(),k(3,"td",14),F(4),M()()),n&2){let t=e.$implicit;re(2),fl(t.createdAt),re(2),fl(t.poid)}}var xh=class n{userId;count=Tr(0);user=Tr(Kr.construct());constructor(){this.userId=""}set id(e){console.log(`UserDetailComponent: recieved ${e} from the route`),this.userId=e,Nh.getDetails(e).then(r=>{console.log("in input",r.toString()),this.user.set(r),console.log(this.user()),this.count.set(3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-user-details"]],inputs:{id:"id"},decls:37,vars:5,consts:[[1,"bg-gray-100","min-h-screen","p-8"],[1,"max-w-4xl","mx-auto","bg-white","rounded-lg","shadow-md","p-6"],[1,"text-3xl","font-bold","text-gray-800","mb-6"],[1,"mb-8"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"space-y-4"],[1,"font-medium","text-gray-600"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition duration-200",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50","transition","duration-200"],[1,"px-6","py-4","text-sm","text-gray-700"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"h1",2),F(3,"D\xE9tails de l'utilisateur"),M(),k(4,"div",3)(5,"h2",4),F(6,"Informations personnelles"),M(),k(7,"div",5)(8,"p")(9,"span",6),F(10,"Nom :"),M(),F(11),M(),k(12,"p")(13,"span",6),F(14,"Pr\xE9nom :"),M(),F(15),M(),k(16,"p")(17,"span",6),F(18,"Email :"),M(),F(19),M(),k(20,"p")(21,"span",6),F(22,"\xC2ge :"),M(),F(23),M()()(),k(24,"div")(25,"h2",4),F(26,"Historique des mesures de poids"),M(),k(27,"div",7)(28,"table",8)(29,"thead")(30,"tr",9)(31,"th",10),F(32,"Date"),M(),k(33,"th",10),F(34,"Poids (kg)"),M()()(),k(35,"tbody",11),je(36,LB,5,2,"tr",12),M()()()()()()),t&2&&(re(11),St(" ",r.user().nom,""),re(4),St(" ",r.user().prenom,""),re(4),St(" ",r.user().email,""),re(4),St(" ",r.user().age,""),re(13),Se("ngForOf",r.user().poids))},dependencies:[At,yl,gn],encapsulation:2})};var BA=[{path:"auth",title:"Authentification",component:Rd},{path:"dashboard",title:"Tableau de bord",component:Sh},{path:"signup",title:"Inscription",component:Ah},{path:"",title:"Accueil",component:Mh},{path:"detail/:id",title:"Detail d'un utilisateur",component:xh}];var $A={providers:[A0({eventCoalescing:!0}),Hb(BA,bm())]};var Ph=class n{title="mks-coaching";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=at({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Ne(0,"router-outlet")},dependencies:[vm],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient(180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100%);--red-to-pink-to-purple-horizontal-gradient: linear-gradient(90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100%);--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--gray-900);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}}']})};X0(Ph,$A).catch(n=>console.error(n));
